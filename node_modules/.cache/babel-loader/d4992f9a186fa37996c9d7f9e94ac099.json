{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Calendar/CalendarTable/CreateCalendarTable.js\";\nimport { React } from \"react\";\nimport timeObj from \"../../../assets/timeObj/timeObj\";\nimport createYearMonthDay from \"../../../../Others/CreateYearMonthDay/createYearMonthDay\";\nimport coerceNumber from \"../../../../Others/CoerceNumber/coerceNumber\";\nimport mutipleArgsHelper from \"../../../../Others/MultipleArgsHelper/multipleArgsHelper\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport style from \"./CreateCalendarTable.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DATE = new Date();\nconst MONTH = DATE.getMonth();\nconst TODAY = DATE.getDate();\nconst YEAR = DATE.getFullYear();\nconst cacheObj = {};\n/*\n1. get the date having expense and income in current month (array)\n2. get the last date of current month (30 or 31)\n3. get the last date of previous month (30 or 31)\n4. get the last day of current month (1 ~ 7)\n5. get the first day of curret month (1 ~ 7)\n6. create the last couple days of previous month\n   => How to know exactly number of days?\n   => first day of current month\n   => For example, the first day of current month is friday(5)\n   => then the calendar of this month can show 5 days of previous month\n   => sun ~ thu shows the previous month, and fri and sat shows the curret month\n\n7. create the all of days in current month\n   => simply iterate through from 1 to last date of current month(2.)\n\n8. create the next couple days of next month\n   => How to know exactly number of days?\n   => 7 - last day of current month - 1\n   => For example, the last day of current month is MON\n   => then the calendar of this month can show 5 days of next month\n   => Sun and Mon is current month, Tue ~ Sat is next month\n*/\n\nfunction CreateCalendarTable(date, showModalHandler, expenseData) {\n  let key = date.getFullYear() + \"\" + (date.getMonth() + 1);\n\n  if (key.length < 6) {\n    key = date.getFullYear() + \"0\" + (date.getMonth() + 1);\n  }\n\n  const [lastOfCurMonthDate, lastOfPrevMonthDate, firstOfCurMonthDay, daysOfNextMonth] = createCalendarPreData(date);\n  const curMonthData = createMonthData(date, expenseData, lastOfPrevMonthDate);\n  const testRes = []; // day of previous month\n\n  for (let i = firstOfCurMonthDay; i > 0; i--) {\n    testRes.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.negative,\n      children: lastOfPrevMonthDate - i + 1\n    }, uuidv4(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this));\n  }\n\n  for (let i = 1; i <= lastOfCurMonthDate; i++) {\n    const todayIndex = date.getFullYear() === YEAR && date.getMonth() === MONTH && i === TODAY;\n    const indexID = i >= 10 ? i + \"\" : \"0\" + i;\n    testRes.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: showModalHandler,\n      className: todayIndex ? style.current : \"\",\n      \"data-id\": key + indexID,\n      children: [i, !curMonthData[i - 1] || /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style[\"dot__container\"],\n        children: [curMonthData[i - 1] === \"expense\" && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `${style[\"dot--blue\"]} ${style.dot}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 15\n        }, this), curMonthData[i - 1] === \"income\" && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `${style[\"dot--pink\"]} ${style.dot}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this), curMonthData[i - 1] === \"both\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `${style[\"dot--blue\"]} ${style.dot}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `${style[\"dot--pink\"]} ${style.dot}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)]\n    }, uuidv4(), true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this));\n  } // day of next month\n\n\n  for (let i = 1; i <= daysOfNextMonth; i++) {\n    testRes.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.negative,\n      children: i\n    }, uuidv4(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this));\n  } // if (!cacheObj[key]) {\n  //   addCacheData(cacheObj, date, key, expenseData);\n  // }\n\n\n  return testRes; // return res;\n}\n\n_c = CreateCalendarTable;\nexport default CreateCalendarTable;\n\nfunction createCalendarPreData(date) {\n  const lastDayOfCurMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n  const lastDayOfPrevMonth = new Date(date.getFullYear(), date.getMonth(), 0);\n  const firstDayOfCurMonth = new Date(date.getFullYear(), date.getMonth(), 1);\n  const lastOfCurMonthDate = lastDayOfCurMonth.getDate();\n  const lastOfCurMonthDay = lastDayOfCurMonth.getDay();\n  const lastOfPrevMonthDate = lastDayOfPrevMonth.getDate();\n  const firstOfCurMonthDay = firstDayOfCurMonth.getDay();\n  const daysOfNextMonth = 7 - lastOfCurMonthDay - 1;\n  return [lastOfCurMonthDate, lastOfPrevMonthDate, firstOfCurMonthDay, daysOfNextMonth];\n}\n\nfunction createMonthData(date, expenseData, lastOfCurMonthDate) {\n  const [curYear, curMonth] = createYearMonthDay(date);\n  const expenseDaySet = new Set();\n  const incomeDaySet = new Set();\n  expenseData.forEach(data => {\n    const [dataYear, dataMonth, dataDay] = coerceNumber(data.year, data.month, data.day);\n\n    if (curYear === dataYear && curMonth === dataMonth) {\n      if (data.category === \"expense\") expenseDaySet.add(dataDay);else if (data.category === \"income\") incomeDaySet.add(dataDay);\n    }\n  });\n  const expenseDayArr = Array.from(expenseDaySet).sort((a, b) => b - a);\n  const incomeDayArr = Array.from(incomeDaySet).sort((a, b) => b - a);\n  const curMonthData = [];\n\n  for (let i = 1; i <= lastOfCurMonthDate; i++) {\n    const expenseIndex = i === expenseDayArr[expenseDayArr.length - 1];\n    const incomeIndex = i === incomeDayArr[incomeDayArr.length - 1];\n\n    if (expenseIndex && incomeIndex) {\n      curMonthData.push(\"both\");\n      expenseDayArr.pop();\n      incomeDayArr.pop();\n    } else if (expenseIndex && !incomeIndex) {\n      curMonthData.push(\"expense\");\n      expenseDayArr.pop();\n    } else if (incomeIndex && !expenseIndex) {\n      curMonthData.push(\"income\");\n      incomeDayArr.pop();\n    } else curMonthData.push(null);\n  }\n\n  return curMonthData;\n} ///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n// const DATE = new Date();\n// const MONTH = DATE.getMonth();\n// const TODAY = DATE.getDate();\n// const YEAR = DATE.getFullYear();\n// const cacheObj = {};\n// function CreateCalendarTable(date, showModalHandler, expenseData) {\n//   let key = date.getFullYear() + \"\" + (date.getMonth() + 1);\n//   if (key.length < 6) {\n//     key = date.getFullYear() + \"0\" + (date.getMonth() + 1);\n//   }\n//   // if (!cacheObj[key]) {\n//   //   addCacheData(cacheObj, date, key, expenseData);\n//   // }\n//   const res = [];\n//   const dayExpense = expenseData\n//     .filter(\n//       (element) =>\n//         Number(element.time.slice(0, 4)) === date.getFullYear() &&\n//         Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n//         element.category === \"expense\"\n//     )\n//     .map((element) => Number(element.time.slice(8)));\n//   const dayIncome = expenseData\n//     .filter(\n//       (element) =>\n//         Number(element.time.slice(0, 4)) === date.getFullYear() &&\n//         Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n//         element.category === \"income\"\n//     )\n//     .map((element) => Number(element.time.slice(8)));\n//   /*\n//   last day of current month\n//   0 gives us the last day of previous month\n//   + 1 makes to be last day fo current month\n//   getDate gives us the number type\n//   */\n//   const lastDay = new Date(\n//     date.getFullYear(),\n//     date.getMonth() + 1,\n//     0\n//   ).getDate();\n//   // last day of previous month\n//   const prevLastDay = new Date(\n//     date.getFullYear(),\n//     date.getMonth(),\n//     0\n//   ).getDate();\n//   // last day of the week (current month)\n//   const lastDayIndex = new Date(\n//     date.getFullYear(),\n//     date.getMonth() + 1,\n//     0\n//   ).getDay();\n//   // first day of the week (current month)\n//   const firstDayIndex = new Date(\n//     date.getFullYear(),\n//     date.getMonth(),\n//     1\n//   ).getDay();\n//   const nextDays = 7 - lastDayIndex - 1;\n//   // day of previous month\n//   for (let i = firstDayIndex; i > 0; i--) {\n//     res.push(\n//       <div className={style.negative} key={uuidv4()}>\n//         {prevLastDay - i + 1}\n//       </div>\n//     );\n//   }\n//   // day of current month\n//   for (let i = 1; i <= lastDay; i++) {\n//     // TODAY\n//     if (\n//       date.getFullYear() === YEAR &&\n//       date.getMonth() === MONTH &&\n//       i === TODAY\n//     ) {\n//       res.push(\n//         checkDot(\n//           i >= 10 ? i + \"\" : \"0\" + i,\n//           true,\n//           dayExpense,\n//           dayIncome,\n//           showModalHandler,\n//           key\n//         )\n//       );\n//     }\n//     // other days\n//     else\n//       res.push(\n//         checkDot(\n//           i >= 10 ? i + \"\" : \"0\" + i,\n//           false,\n//           dayExpense,\n//           dayIncome,\n//           showModalHandler,\n//           key\n//         )\n//       );\n//   }\n//   // day of next month\n//   for (let i = 1; i <= nextDays; i++) {\n//     res.push(\n//       <div className={style.negative} key={uuidv4()}>\n//         {i}\n//       </div>\n//     );\n//   }\n//   return res;\n// }\n// export default CreateCalendarTable;\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n// function checkDot(i, current, dayExpense, dayIncome, showModalHandler, key) {\n//   const numberI = Number(i);\n//   const noDots = !(dayExpense.includes(numberI) || dayIncome.includes(numberI));\n//   return (\n//     <div\n//       onClick={showModalHandler}\n//       className={current ? style.current : \"\"}\n//       key={uuidv4()}\n//       data-id={key + i}\n//     >\n//       {i}\n//       {noDots || (\n//         <div className={style[\"dot__container\"]}>\n//           {dayExpense.includes(numberI) && (\n//             <span className={`${style[\"dot--blue\"]} ${style.dot}`}></span>\n//           )}\n//           {dayIncome.includes(numberI) && (\n//             <span className={`${style[\"dot--pink\"]} ${style.dot}`}></span>\n//           )}\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n/*\nfunction addCacheData(cacheObj, date, key, expenseData) {\n  // each value in cache object is an array containing two arrays(day of expense and income)\n  cacheObj[key] = [];\n  const dayExpense = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"expense\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n  const dayIncome = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"income\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n  cacheObj[key].push(dayExpense);\n  cacheObj[key].push(dayIncome);\n}\n*/\n\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateCalendarTable\");","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Calendar/CalendarTable/CreateCalendarTable.js"],"names":["React","timeObj","createYearMonthDay","coerceNumber","mutipleArgsHelper","v4","uuidv4","style","DATE","Date","MONTH","getMonth","TODAY","getDate","YEAR","getFullYear","cacheObj","CreateCalendarTable","date","showModalHandler","expenseData","key","length","lastOfCurMonthDate","lastOfPrevMonthDate","firstOfCurMonthDay","daysOfNextMonth","createCalendarPreData","curMonthData","createMonthData","testRes","i","push","negative","todayIndex","indexID","current","dot","lastDayOfCurMonth","lastDayOfPrevMonth","firstDayOfCurMonth","lastOfCurMonthDay","getDay","curYear","curMonth","expenseDaySet","Set","incomeDaySet","forEach","data","dataYear","dataMonth","dataDay","year","month","day","category","add","expenseDayArr","Array","from","sort","a","b","incomeDayArr","expenseIndex","incomeIndex","pop"],"mappings":";AAAA,SAASA,KAAT,QAAsB,OAAtB;AACA,OAAOC,OAAP,MAAoB,iCAApB;AACA,OAAOC,kBAAP,MAA+B,0DAA/B;AACA,OAAOC,YAAP,MAAyB,8CAAzB;AACA,OAAOC,iBAAP,MAA8B,0DAA9B;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,OAAOC,KAAP,MAAkB,kCAAlB;;;AAEA,MAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;AACA,MAAMC,KAAK,GAAGF,IAAI,CAACG,QAAL,EAAd;AACA,MAAMC,KAAK,GAAGJ,IAAI,CAACK,OAAL,EAAd;AACA,MAAMC,IAAI,GAAGN,IAAI,CAACO,WAAL,EAAb;AAEA,MAAMC,QAAQ,GAAG,EAAjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,mBAAT,CAA6BC,IAA7B,EAAmCC,gBAAnC,EAAqDC,WAArD,EAAkE;AAChE,MAAIC,GAAG,GAAGH,IAAI,CAACH,WAAL,KAAqB,EAArB,IAA2BG,IAAI,CAACP,QAAL,KAAkB,CAA7C,CAAV;;AACA,MAAIU,GAAG,CAACC,MAAJ,GAAa,CAAjB,EAAoB;AAClBD,IAAAA,GAAG,GAAGH,IAAI,CAACH,WAAL,KAAqB,GAArB,IAA4BG,IAAI,CAACP,QAAL,KAAkB,CAA9C,CAAN;AACD;;AAED,QAAM,CACJY,kBADI,EAEJC,mBAFI,EAGJC,kBAHI,EAIJC,eAJI,IAKFC,qBAAqB,CAACT,IAAD,CALzB;AAOA,QAAMU,YAAY,GAAGC,eAAe,CAACX,IAAD,EAAOE,WAAP,EAAoBI,mBAApB,CAApC;AAEA,QAAMM,OAAO,GAAG,EAAhB,CAfgE,CAiBhE;;AACA,OAAK,IAAIC,CAAC,GAAGN,kBAAb,EAAiCM,CAAC,GAAG,CAArC,EAAwCA,CAAC,EAAzC,EAA6C;AAC3CD,IAAAA,OAAO,CAACE,IAAR,eACE;AAAK,MAAA,SAAS,EAAEzB,KAAK,CAAC0B,QAAtB;AAAA,gBACGT,mBAAmB,GAAGO,CAAtB,GAA0B;AAD7B,OAAqCzB,MAAM,EAA3C;AAAA;AAAA;AAAA;AAAA,YADF;AAKD;;AAED,OAAK,IAAIyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIR,kBAArB,EAAyCQ,CAAC,EAA1C,EAA8C;AAC5C,UAAMG,UAAU,GACdhB,IAAI,CAACH,WAAL,OAAuBD,IAAvB,IAA+BI,IAAI,CAACP,QAAL,OAAoBD,KAAnD,IAA4DqB,CAAC,KAAKnB,KADpE;AAGA,UAAMuB,OAAO,GAAGJ,CAAC,IAAI,EAAL,GAAUA,CAAC,GAAG,EAAd,GAAmB,MAAMA,CAAzC;AAEAD,IAAAA,OAAO,CAACE,IAAR,eACE;AACE,MAAA,OAAO,EAAEb,gBADX;AAEE,MAAA,SAAS,EAAEe,UAAU,GAAG3B,KAAK,CAAC6B,OAAT,GAAmB,EAF1C;AAIE,iBAASf,GAAG,GAAGc,OAJjB;AAAA,iBAMGJ,CANH,EAOG,CAACH,YAAY,CAACG,CAAC,GAAG,CAAL,CAAb,iBACC;AAAK,QAAA,SAAS,EAAExB,KAAK,CAAC,gBAAD,CAArB;AAAA,mBACGqB,YAAY,CAACG,CAAC,GAAG,CAAL,CAAZ,KAAwB,SAAxB,iBACC;AAAM,UAAA,SAAS,EAAG,GAAExB,KAAK,CAAC,WAAD,CAAc,IAAGA,KAAK,CAAC8B,GAAI;AAApD;AAAA;AAAA;AAAA;AAAA,gBAFJ,EAIGT,YAAY,CAACG,CAAC,GAAG,CAAL,CAAZ,KAAwB,QAAxB,iBACC;AAAM,UAAA,SAAS,EAAG,GAAExB,KAAK,CAAC,WAAD,CAAc,IAAGA,KAAK,CAAC8B,GAAI;AAApD;AAAA;AAAA;AAAA;AAAA,gBALJ,EAOGT,YAAY,CAACG,CAAC,GAAG,CAAL,CAAZ,KAAwB,MAAxB,iBACC;AAAA,kCACE;AAAM,YAAA,SAAS,EAAG,GAAExB,KAAK,CAAC,WAAD,CAAc,IAAGA,KAAK,CAAC8B,GAAI;AAApD;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAM,YAAA,SAAS,EAAG,GAAE9B,KAAK,CAAC,WAAD,CAAc,IAAGA,KAAK,CAAC8B,GAAI;AAApD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA,wBARJ;AAAA;AAAA;AAAA;AAAA;AAAA,cARJ;AAAA,OAGO/B,MAAM,EAHb;AAAA;AAAA;AAAA;AAAA,YADF;AA0BD,GA1D+D,CA4DhE;;;AACA,OAAK,IAAIyB,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIL,eAArB,EAAsCK,CAAC,EAAvC,EAA2C;AACzCD,IAAAA,OAAO,CAACE,IAAR,eACE;AAAK,MAAA,SAAS,EAAEzB,KAAK,CAAC0B,QAAtB;AAAA,gBACGF;AADH,OAAqCzB,MAAM,EAA3C;AAAA;AAAA;AAAA;AAAA,YADF;AAKD,GAnE+D,CAqEhE;AACA;AACA;;;AAEA,SAAOwB,OAAP,CAzEgE,CA0EhE;AACD;;KA3EQb,mB;AA6ET,eAAeA,mBAAf;;AAEA,SAASU,qBAAT,CAA+BT,IAA/B,EAAqC;AACnC,QAAMoB,iBAAiB,GAAG,IAAI7B,IAAJ,CACxBS,IAAI,CAACH,WAAL,EADwB,EAExBG,IAAI,CAACP,QAAL,KAAkB,CAFM,EAGxB,CAHwB,CAA1B;AAKA,QAAM4B,kBAAkB,GAAG,IAAI9B,IAAJ,CAASS,IAAI,CAACH,WAAL,EAAT,EAA6BG,IAAI,CAACP,QAAL,EAA7B,EAA8C,CAA9C,CAA3B;AAEA,QAAM6B,kBAAkB,GAAG,IAAI/B,IAAJ,CAASS,IAAI,CAACH,WAAL,EAAT,EAA6BG,IAAI,CAACP,QAAL,EAA7B,EAA8C,CAA9C,CAA3B;AAEA,QAAMY,kBAAkB,GAAGe,iBAAiB,CAACzB,OAAlB,EAA3B;AACA,QAAM4B,iBAAiB,GAAGH,iBAAiB,CAACI,MAAlB,EAA1B;AACA,QAAMlB,mBAAmB,GAAGe,kBAAkB,CAAC1B,OAAnB,EAA5B;AACA,QAAMY,kBAAkB,GAAGe,kBAAkB,CAACE,MAAnB,EAA3B;AACA,QAAMhB,eAAe,GAAG,IAAIe,iBAAJ,GAAwB,CAAhD;AAEA,SAAO,CACLlB,kBADK,EAELC,mBAFK,EAGLC,kBAHK,EAILC,eAJK,CAAP;AAMD;;AAED,SAASG,eAAT,CAAyBX,IAAzB,EAA+BE,WAA/B,EAA4CG,kBAA5C,EAAgE;AAC9D,QAAM,CAACoB,OAAD,EAAUC,QAAV,IAAsB1C,kBAAkB,CAACgB,IAAD,CAA9C;AAEA,QAAM2B,aAAa,GAAG,IAAIC,GAAJ,EAAtB;AACA,QAAMC,YAAY,GAAG,IAAID,GAAJ,EAArB;AAEA1B,EAAAA,WAAW,CAAC4B,OAAZ,CAAqBC,IAAD,IAAU;AAC5B,UAAM,CAACC,QAAD,EAAWC,SAAX,EAAsBC,OAAtB,IAAiCjD,YAAY,CACjD8C,IAAI,CAACI,IAD4C,EAEjDJ,IAAI,CAACK,KAF4C,EAGjDL,IAAI,CAACM,GAH4C,CAAnD;;AAMA,QAAIZ,OAAO,KAAKO,QAAZ,IAAwBN,QAAQ,KAAKO,SAAzC,EAAoD;AAClD,UAAIF,IAAI,CAACO,QAAL,KAAkB,SAAtB,EAAiCX,aAAa,CAACY,GAAd,CAAkBL,OAAlB,EAAjC,KACK,IAAIH,IAAI,CAACO,QAAL,KAAkB,QAAtB,EAAgCT,YAAY,CAACU,GAAb,CAAiBL,OAAjB;AACtC;AACF,GAXD;AAaA,QAAMM,aAAa,GAAGC,KAAK,CAACC,IAAN,CAAWf,aAAX,EAA0BgB,IAA1B,CAA+B,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,GAAGD,CAA7C,CAAtB;AACA,QAAME,YAAY,GAAGL,KAAK,CAACC,IAAN,CAAWb,YAAX,EAAyBc,IAAzB,CAA8B,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,GAAGD,CAA5C,CAArB;AAEA,QAAMlC,YAAY,GAAG,EAArB;;AAEA,OAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIR,kBAArB,EAAyCQ,CAAC,EAA1C,EAA8C;AAC5C,UAAMkC,YAAY,GAAGlC,CAAC,KAAK2B,aAAa,CAACA,aAAa,CAACpC,MAAd,GAAuB,CAAxB,CAAxC;AACA,UAAM4C,WAAW,GAAGnC,CAAC,KAAKiC,YAAY,CAACA,YAAY,CAAC1C,MAAb,GAAsB,CAAvB,CAAtC;;AAEA,QAAI2C,YAAY,IAAIC,WAApB,EAAiC;AAC/BtC,MAAAA,YAAY,CAACI,IAAb,CAAkB,MAAlB;AACA0B,MAAAA,aAAa,CAACS,GAAd;AACAH,MAAAA,YAAY,CAACG,GAAb;AACD,KAJD,MAIO,IAAIF,YAAY,IAAI,CAACC,WAArB,EAAkC;AACvCtC,MAAAA,YAAY,CAACI,IAAb,CAAkB,SAAlB;AACA0B,MAAAA,aAAa,CAACS,GAAd;AACD,KAHM,MAGA,IAAID,WAAW,IAAI,CAACD,YAApB,EAAkC;AACvCrC,MAAAA,YAAY,CAACI,IAAb,CAAkB,QAAlB;AACAgC,MAAAA,YAAY,CAACG,GAAb;AACD,KAHM,MAGAvC,YAAY,CAACI,IAAb,CAAkB,IAAlB;AACR;;AAED,SAAOJ,YAAP;AACD,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { React } from \"react\";\nimport timeObj from \"../../../assets/timeObj/timeObj\";\nimport createYearMonthDay from \"../../../../Others/CreateYearMonthDay/createYearMonthDay\";\nimport coerceNumber from \"../../../../Others/CoerceNumber/coerceNumber\";\nimport mutipleArgsHelper from \"../../../../Others/MultipleArgsHelper/multipleArgsHelper\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport style from \"./CreateCalendarTable.module.css\";\n\nconst DATE = new Date();\nconst MONTH = DATE.getMonth();\nconst TODAY = DATE.getDate();\nconst YEAR = DATE.getFullYear();\n\nconst cacheObj = {};\n/*\n1. get the date having expense and income in current month (array)\n2. get the last date of current month (30 or 31)\n3. get the last date of previous month (30 or 31)\n4. get the last day of current month (1 ~ 7)\n5. get the first day of curret month (1 ~ 7)\n6. create the last couple days of previous month\n   => How to know exactly number of days?\n   => first day of current month\n   => For example, the first day of current month is friday(5)\n   => then the calendar of this month can show 5 days of previous month\n   => sun ~ thu shows the previous month, and fri and sat shows the curret month\n\n7. create the all of days in current month\n   => simply iterate through from 1 to last date of current month(2.)\n\n8. create the next couple days of next month\n   => How to know exactly number of days?\n   => 7 - last day of current month - 1\n   => For example, the last day of current month is MON\n   => then the calendar of this month can show 5 days of next month\n   => Sun and Mon is current month, Tue ~ Sat is next month\n*/\n\nfunction CreateCalendarTable(date, showModalHandler, expenseData) {\n  let key = date.getFullYear() + \"\" + (date.getMonth() + 1);\n  if (key.length < 6) {\n    key = date.getFullYear() + \"0\" + (date.getMonth() + 1);\n  }\n\n  const [\n    lastOfCurMonthDate,\n    lastOfPrevMonthDate,\n    firstOfCurMonthDay,\n    daysOfNextMonth,\n  ] = createCalendarPreData(date);\n\n  const curMonthData = createMonthData(date, expenseData, lastOfPrevMonthDate);\n\n  const testRes = [];\n\n  // day of previous month\n  for (let i = firstOfCurMonthDay; i > 0; i--) {\n    testRes.push(\n      <div className={style.negative} key={uuidv4()}>\n        {lastOfPrevMonthDate - i + 1}\n      </div>\n    );\n  }\n\n  for (let i = 1; i <= lastOfCurMonthDate; i++) {\n    const todayIndex =\n      date.getFullYear() === YEAR && date.getMonth() === MONTH && i === TODAY;\n\n    const indexID = i >= 10 ? i + \"\" : \"0\" + i;\n\n    testRes.push(\n      <div\n        onClick={showModalHandler}\n        className={todayIndex ? style.current : \"\"}\n        key={uuidv4()}\n        data-id={key + indexID}\n      >\n        {i}\n        {!curMonthData[i - 1] || (\n          <div className={style[\"dot__container\"]}>\n            {curMonthData[i - 1] === \"expense\" && (\n              <span className={`${style[\"dot--blue\"]} ${style.dot}`}></span>\n            )}\n            {curMonthData[i - 1] === \"income\" && (\n              <span className={`${style[\"dot--pink\"]} ${style.dot}`}></span>\n            )}\n            {curMonthData[i - 1] === \"both\" && (\n              <>\n                <span className={`${style[\"dot--blue\"]} ${style.dot}`}></span>\n                <span className={`${style[\"dot--pink\"]} ${style.dot}`}></span>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // day of next month\n  for (let i = 1; i <= daysOfNextMonth; i++) {\n    testRes.push(\n      <div className={style.negative} key={uuidv4()}>\n        {i}\n      </div>\n    );\n  }\n\n  // if (!cacheObj[key]) {\n  //   addCacheData(cacheObj, date, key, expenseData);\n  // }\n\n  return testRes;\n  // return res;\n}\n\nexport default CreateCalendarTable;\n\nfunction createCalendarPreData(date) {\n  const lastDayOfCurMonth = new Date(\n    date.getFullYear(),\n    date.getMonth() + 1,\n    0\n  );\n  const lastDayOfPrevMonth = new Date(date.getFullYear(), date.getMonth(), 0);\n\n  const firstDayOfCurMonth = new Date(date.getFullYear(), date.getMonth(), 1);\n\n  const lastOfCurMonthDate = lastDayOfCurMonth.getDate();\n  const lastOfCurMonthDay = lastDayOfCurMonth.getDay();\n  const lastOfPrevMonthDate = lastDayOfPrevMonth.getDate();\n  const firstOfCurMonthDay = firstDayOfCurMonth.getDay();\n  const daysOfNextMonth = 7 - lastOfCurMonthDay - 1;\n\n  return [\n    lastOfCurMonthDate,\n    lastOfPrevMonthDate,\n    firstOfCurMonthDay,\n    daysOfNextMonth,\n  ];\n}\n\nfunction createMonthData(date, expenseData, lastOfCurMonthDate) {\n  const [curYear, curMonth] = createYearMonthDay(date);\n\n  const expenseDaySet = new Set();\n  const incomeDaySet = new Set();\n\n  expenseData.forEach((data) => {\n    const [dataYear, dataMonth, dataDay] = coerceNumber(\n      data.year,\n      data.month,\n      data.day\n    );\n\n    if (curYear === dataYear && curMonth === dataMonth) {\n      if (data.category === \"expense\") expenseDaySet.add(dataDay);\n      else if (data.category === \"income\") incomeDaySet.add(dataDay);\n    }\n  });\n\n  const expenseDayArr = Array.from(expenseDaySet).sort((a, b) => b - a);\n  const incomeDayArr = Array.from(incomeDaySet).sort((a, b) => b - a);\n\n  const curMonthData = [];\n\n  for (let i = 1; i <= lastOfCurMonthDate; i++) {\n    const expenseIndex = i === expenseDayArr[expenseDayArr.length - 1];\n    const incomeIndex = i === incomeDayArr[incomeDayArr.length - 1];\n\n    if (expenseIndex && incomeIndex) {\n      curMonthData.push(\"both\");\n      expenseDayArr.pop();\n      incomeDayArr.pop();\n    } else if (expenseIndex && !incomeIndex) {\n      curMonthData.push(\"expense\");\n      expenseDayArr.pop();\n    } else if (incomeIndex && !expenseIndex) {\n      curMonthData.push(\"income\");\n      incomeDayArr.pop();\n    } else curMonthData.push(null);\n  }\n\n  return curMonthData;\n}\n\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n// const DATE = new Date();\n// const MONTH = DATE.getMonth();\n// const TODAY = DATE.getDate();\n// const YEAR = DATE.getFullYear();\n\n// const cacheObj = {};\n\n// function CreateCalendarTable(date, showModalHandler, expenseData) {\n//   let key = date.getFullYear() + \"\" + (date.getMonth() + 1);\n//   if (key.length < 6) {\n//     key = date.getFullYear() + \"0\" + (date.getMonth() + 1);\n//   }\n\n//   // if (!cacheObj[key]) {\n//   //   addCacheData(cacheObj, date, key, expenseData);\n//   // }\n\n//   const res = [];\n\n//   const dayExpense = expenseData\n//     .filter(\n//       (element) =>\n//         Number(element.time.slice(0, 4)) === date.getFullYear() &&\n//         Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n//         element.category === \"expense\"\n//     )\n//     .map((element) => Number(element.time.slice(8)));\n\n//   const dayIncome = expenseData\n//     .filter(\n//       (element) =>\n//         Number(element.time.slice(0, 4)) === date.getFullYear() &&\n//         Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n//         element.category === \"income\"\n//     )\n//     .map((element) => Number(element.time.slice(8)));\n\n//   /*\n//   last day of current month\n//   0 gives us the last day of previous month\n//   + 1 makes to be last day fo current month\n//   getDate gives us the number type\n//   */\n//   const lastDay = new Date(\n//     date.getFullYear(),\n//     date.getMonth() + 1,\n//     0\n//   ).getDate();\n\n//   // last day of previous month\n//   const prevLastDay = new Date(\n//     date.getFullYear(),\n//     date.getMonth(),\n//     0\n//   ).getDate();\n\n//   // last day of the week (current month)\n//   const lastDayIndex = new Date(\n//     date.getFullYear(),\n//     date.getMonth() + 1,\n//     0\n//   ).getDay();\n\n//   // first day of the week (current month)\n//   const firstDayIndex = new Date(\n//     date.getFullYear(),\n//     date.getMonth(),\n//     1\n//   ).getDay();\n\n//   const nextDays = 7 - lastDayIndex - 1;\n\n//   // day of previous month\n//   for (let i = firstDayIndex; i > 0; i--) {\n//     res.push(\n//       <div className={style.negative} key={uuidv4()}>\n//         {prevLastDay - i + 1}\n//       </div>\n//     );\n//   }\n\n//   // day of current month\n//   for (let i = 1; i <= lastDay; i++) {\n//     // TODAY\n//     if (\n//       date.getFullYear() === YEAR &&\n//       date.getMonth() === MONTH &&\n//       i === TODAY\n//     ) {\n//       res.push(\n//         checkDot(\n//           i >= 10 ? i + \"\" : \"0\" + i,\n//           true,\n//           dayExpense,\n//           dayIncome,\n//           showModalHandler,\n//           key\n//         )\n//       );\n//     }\n//     // other days\n//     else\n//       res.push(\n//         checkDot(\n//           i >= 10 ? i + \"\" : \"0\" + i,\n//           false,\n//           dayExpense,\n//           dayIncome,\n//           showModalHandler,\n//           key\n//         )\n//       );\n//   }\n\n//   // day of next month\n//   for (let i = 1; i <= nextDays; i++) {\n//     res.push(\n//       <div className={style.negative} key={uuidv4()}>\n//         {i}\n//       </div>\n//     );\n//   }\n\n//   return res;\n// }\n\n// export default CreateCalendarTable;\n\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n// function checkDot(i, current, dayExpense, dayIncome, showModalHandler, key) {\n//   const numberI = Number(i);\n//   const noDots = !(dayExpense.includes(numberI) || dayIncome.includes(numberI));\n\n//   return (\n//     <div\n//       onClick={showModalHandler}\n//       className={current ? style.current : \"\"}\n//       key={uuidv4()}\n//       data-id={key + i}\n//     >\n//       {i}\n//       {noDots || (\n//         <div className={style[\"dot__container\"]}>\n//           {dayExpense.includes(numberI) && (\n//             <span className={`${style[\"dot--blue\"]} ${style.dot}`}></span>\n//           )}\n//           {dayIncome.includes(numberI) && (\n//             <span className={`${style[\"dot--pink\"]} ${style.dot}`}></span>\n//           )}\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n/*\nfunction addCacheData(cacheObj, date, key, expenseData) {\n  // each value in cache object is an array containing two arrays(day of expense and income)\n  cacheObj[key] = [];\n  const dayExpense = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"expense\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n  const dayIncome = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"income\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n  cacheObj[key].push(dayExpense);\n  cacheObj[key].push(dayIncome);\n}\n*/\n"]},"metadata":{},"sourceType":"module"}