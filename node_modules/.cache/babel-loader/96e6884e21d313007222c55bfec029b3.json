{"ast":null,"code":"import createStandardLabelsArr from \"./createStandardLabelsArr\";\nimport createLabelsArr from \"./createLabelsArr\";\nimport createDataArr from \"./createDataArr\";\nimport createFilteredData from \"./createFilteredData\";\nimport compareTimeWithRange from \"../compareTimeWithRange\";\n\nfunction createConfigObj(mainType, timeDuration, startingDate, endingDate, expenseData, mainCategory, subCategory, theme, showLabel) {\n  if (mainType === \"time\") {\n    const standardLabels = createStandardLabelsArr(timeDuration, startingDate);\n    const labels = createLabelsArr(standardLabels, timeDuration);\n    const data = createDataArr(standardLabels, createFilteredData(standardLabels, expenseData), timeDuration, mainCategory, subCategory);\n    let legend = null;\n    /*\n    Only show chart label above when \n    1. In the big chart section\n    2. Chart is one week, six month or twelve month\n    Too many labels is messy\n    */\n\n    if (showLabel && (timeDuration === \"7\" || timeDuration === \"6\" || timeDuration === \"12\")) {\n      legend = {\n        onClick: (e, legendItem, legend) => {\n          const index = legend.chart.data.labels.indexOf(legendItem.text);\n          legend.chart.toggleDataVisibility(index);\n          legend.chart.update();\n        },\n        labels: {\n          generateLabels: chart => {\n            const colorLength = chart.data.datasets[0].borderColor.length;\n            const visibility = [];\n\n            for (let i = 0; i < chart.data.labels.length; i++) {\n              if (chart.getDataVisibility(i)) visibility.push(false);else visibility.push(true);\n            }\n\n            return chart.data.labels.map((label, index) => {\n              const newIndex = index % colorLength;\n              return {\n                text: label,\n                strokeStyle: chart.data.datasets[0].borderColor[newIndex],\n                fillStyle: chart.data.datasets[0].backgroundColor[newIndex],\n                hidden: visibility[index]\n              };\n            });\n          }\n        }\n      };\n    }\n\n    return {\n      type: \"bar\",\n      data: {\n        labels: labels,\n        datasets: [{\n          label: \"\",\n          data: data,\n          backgroundColor: [\"rgba(255, 99, 132, 0.2)\", \"rgba(255, 159, 64, 0.2)\", \"rgba(255, 205, 86, 0.2)\", \"rgba(75, 192, 192, 0.2)\", \"rgba(54, 162, 235, 0.2)\", \"rgba(153, 102, 255, 0.2)\", \"rgba(201, 203, 207, 0.2)\"],\n          borderColor: [\"rgb(255, 99, 132)\", \"rgb(255, 159, 64)\", \"rgb(255, 205, 86)\", \"rgb(75, 192, 192)\", \"rgb(54, 162, 235)\", \"rgb(153, 102, 255)\", \"rgb(201, 203, 207)\"],\n          borderWidth: 1\n        }]\n      },\n      options: {\n        maintainAspectRatio: false,\n        plugins: {\n          tooltip: {\n            yAlign: \"bottom\",\n            displayColors: false,\n            backgroundColor: tooltipItem => {\n              return tooltipItem.tooltip.labelColors[0].borderColor;\n            }\n          },\n          legend\n        },\n        scales: {\n          y: {\n            beginAtZero: true,\n            ticks: {\n              color: `${theme === \"dark\" ? \"rgb(190,190,190)\" : \"rgb(70,70,70)\"}`\n            }\n          },\n          x: {\n            ticks: {\n              color: `${theme === \"dark\" ? \"rgb(190,190,190)\" : \"rgb(70,70,70)\"}`\n            }\n          }\n        }\n      }\n    };\n  } else {\n    const startingDateObj = new Date(startingDate);\n    const endingDateObj = new Date(endingDate);\n    const filteredData = expenseData.filter(element => compareTimeWithRange(element, startingDateObj, endingDateObj) && element.category === mainCategory); // let labels = [];\n    // filteredData.forEach((element) => {\n    //   if (!labels.includes(element.mainCate)) labels.push(element.mainCate);\n    // });\n\n    const labels = new Set();\n\n    for (let data of filteredData) {\n      labels.add(data);\n    }\n\n    console.log(labels);\n    let newFilteredData = [];\n    labels.forEach(label => {\n      newFilteredData.push(filteredData.filter(data => data.mainCate === label));\n    });\n    const dataArr = [];\n    newFilteredData.forEach(data => {\n      let dataTmp;\n\n      if (data.length > 0) {\n        dataTmp = data.reduce((acc, cur) => acc += Number(cur.price), 0);\n      } else dataTmp = 0;\n\n      dataArr.push(dataTmp);\n    });\n    return {\n      type: \"pie\",\n      data: {\n        labels: labels,\n        datasets: [{\n          label: \"My First Dataset\",\n          data: dataArr,\n          backgroundColor: [\"rgb(255, 99, 132)\", \"rgb(255, 159, 64)\", \"rgb(255, 205, 86)\", \"rgb(75, 192, 192)\", \"rgb(54, 162, 235)\", \"rgb(153, 102, 255)\", \"rgb(201, 203, 207)\"],\n          hoverOffset: 4\n        }]\n      },\n      options: {\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            labels: {\n              font: {\n                size: 14\n              },\n              color: `${theme === \"dark\" ? \"rgb(190,190,190)\" : \"rgb(70,70,70)\"}`\n            }\n          }\n        }\n      },\n      plugins: [100]\n    };\n  }\n}\n\nexport default createConfigObj;","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/Others/CreateChartData/createConfigObj.js"],"names":["createStandardLabelsArr","createLabelsArr","createDataArr","createFilteredData","compareTimeWithRange","createConfigObj","mainType","timeDuration","startingDate","endingDate","expenseData","mainCategory","subCategory","theme","showLabel","standardLabels","labels","data","legend","onClick","e","legendItem","index","chart","indexOf","text","toggleDataVisibility","update","generateLabels","colorLength","datasets","borderColor","length","visibility","i","getDataVisibility","push","map","label","newIndex","strokeStyle","fillStyle","backgroundColor","hidden","type","borderWidth","options","maintainAspectRatio","plugins","tooltip","yAlign","displayColors","tooltipItem","labelColors","scales","y","beginAtZero","ticks","color","x","startingDateObj","Date","endingDateObj","filteredData","filter","element","category","Set","add","console","log","newFilteredData","forEach","mainCate","dataArr","dataTmp","reduce","acc","cur","Number","price","hoverOffset","font","size"],"mappings":"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","sourcesContent":["import createStandardLabelsArr from \"./createStandardLabelsArr\";\nimport createLabelsArr from \"./createLabelsArr\";\nimport createDataArr from \"./createDataArr\";\nimport createFilteredData from \"./createFilteredData\";\nimport compareTimeWithRange from \"../compareTimeWithRange\";\n\nfunction createConfigObj(\n  mainType,\n  timeDuration,\n  startingDate,\n  endingDate,\n  expenseData,\n  mainCategory,\n  subCategory,\n  theme,\n  showLabel\n) {\n  if (mainType === \"time\") {\n    const standardLabels = createStandardLabelsArr(timeDuration, startingDate);\n    const labels = createLabelsArr(standardLabels, timeDuration);\n    const data = createDataArr(\n      standardLabels,\n      createFilteredData(standardLabels, expenseData),\n      timeDuration,\n      mainCategory,\n      subCategory\n    );\n\n    let legend = null;\n\n    /*\n    Only show chart label above when \n    1. In the big chart section\n    2. Chart is one week, six month or twelve month\n    Too many labels is messy\n    */\n    if (\n      showLabel &&\n      (timeDuration === \"7\" || timeDuration === \"6\" || timeDuration === \"12\")\n    ) {\n      legend = {\n        onClick: (e, legendItem, legend) => {\n          const index = legend.chart.data.labels.indexOf(legendItem.text);\n          legend.chart.toggleDataVisibility(index);\n          legend.chart.update();\n        },\n        labels: {\n          generateLabels: (chart) => {\n            const colorLength = chart.data.datasets[0].borderColor.length;\n            const visibility = [];\n            for (let i = 0; i < chart.data.labels.length; i++) {\n              if (chart.getDataVisibility(i)) visibility.push(false);\n              else visibility.push(true);\n            }\n            return chart.data.labels.map((label, index) => {\n              const newIndex = index % colorLength;\n              return {\n                text: label,\n                strokeStyle: chart.data.datasets[0].borderColor[newIndex],\n                fillStyle: chart.data.datasets[0].backgroundColor[newIndex],\n                hidden: visibility[index],\n              };\n            });\n          },\n        },\n      };\n    }\n\n    return {\n      type: \"bar\",\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: \"\",\n            data: data,\n            backgroundColor: [\n              \"rgba(255, 99, 132, 0.2)\",\n              \"rgba(255, 159, 64, 0.2)\",\n              \"rgba(255, 205, 86, 0.2)\",\n              \"rgba(75, 192, 192, 0.2)\",\n              \"rgba(54, 162, 235, 0.2)\",\n              \"rgba(153, 102, 255, 0.2)\",\n              \"rgba(201, 203, 207, 0.2)\",\n            ],\n            borderColor: [\n              \"rgb(255, 99, 132)\",\n              \"rgb(255, 159, 64)\",\n              \"rgb(255, 205, 86)\",\n              \"rgb(75, 192, 192)\",\n              \"rgb(54, 162, 235)\",\n              \"rgb(153, 102, 255)\",\n              \"rgb(201, 203, 207)\",\n            ],\n            borderWidth: 1,\n          },\n        ],\n      },\n      options: {\n        maintainAspectRatio: false,\n        plugins: {\n          tooltip: {\n            yAlign: \"bottom\",\n            displayColors: false,\n            backgroundColor: (tooltipItem) => {\n              return tooltipItem.tooltip.labelColors[0].borderColor;\n            },\n          },\n          legend,\n        },\n        scales: {\n          y: {\n            beginAtZero: true,\n            ticks: {\n              color: `${\n                theme === \"dark\" ? \"rgb(190,190,190)\" : \"rgb(70,70,70)\"\n              }`,\n            },\n          },\n          x: {\n            ticks: {\n              color: `${\n                theme === \"dark\" ? \"rgb(190,190,190)\" : \"rgb(70,70,70)\"\n              }`,\n            },\n          },\n        },\n      },\n    };\n  } else {\n    const startingDateObj = new Date(startingDate);\n    const endingDateObj = new Date(endingDate);\n    const filteredData = expenseData.filter(\n      (element) =>\n        compareTimeWithRange(element, startingDateObj, endingDateObj) &&\n        element.category === mainCategory\n    );\n\n    // let labels = [];\n    // filteredData.forEach((element) => {\n    //   if (!labels.includes(element.mainCate)) labels.push(element.mainCate);\n    // });\n    const labels = new Set();\n    for (let data of filteredData) {\n      labels.add(data);\n    }\n\n    console.log(labels);\n\n    let newFilteredData = [];\n    labels.forEach((label) => {\n      newFilteredData.push(\n        filteredData.filter((data) => data.mainCate === label)\n      );\n    });\n\n    const dataArr = [];\n\n    newFilteredData.forEach((data) => {\n      let dataTmp;\n\n      if (data.length > 0) {\n        dataTmp = data.reduce((acc, cur) => (acc += Number(cur.price)), 0);\n      } else dataTmp = 0;\n\n      dataArr.push(dataTmp);\n    });\n\n    return {\n      type: \"pie\",\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: \"My First Dataset\",\n            data: dataArr,\n            backgroundColor: [\n              \"rgb(255, 99, 132)\",\n              \"rgb(255, 159, 64)\",\n              \"rgb(255, 205, 86)\",\n              \"rgb(75, 192, 192)\",\n              \"rgb(54, 162, 235)\",\n              \"rgb(153, 102, 255)\",\n              \"rgb(201, 203, 207)\",\n            ],\n            hoverOffset: 4,\n          },\n        ],\n      },\n      options: {\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            labels: {\n              font: {\n                size: 14,\n              },\n              color: `${\n                theme === \"dark\" ? \"rgb(190,190,190)\" : \"rgb(70,70,70)\"\n              }`,\n            },\n          },\n        },\n      },\n      plugins: [100],\n    };\n  }\n}\n\nexport default createConfigObj;\n"]},"metadata":{},"sourceType":"module"}