{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/expense-tracker/src/store/userInfo/userInfoProvider.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport UserInfoContext from \"./userInfo--context\";\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\nimport { signInWithPopup } from \"firebase/auth\";\nimport { db, provider, auth } from \"../../firebase-config\";\nimport createInitialData from \"../../Others/CreateInitialData/createInitialData\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction UserInfoProvider(props) {\n  _s();\n\n  const [userInfo, setUserInfo] = useState(false);\n  onAuthStateChanged(auth, async user => {\n    if (user) {\n      const {\n        displayName,\n        email\n      } = user;\n      const userID = `${email}${displayName.split(\" \").join(\"\")}`;\n      const userDocSnap = await getDoc(doc(db, \"users\", userID));\n      const {\n        userName,\n        displayTheme\n      } = userDocSnap.data(); // setUserInfo({ userName, displayTheme, userID });\n\n      setSignedIn(true);\n      console.log(\"signed in\");\n    } else {\n      setSignedIn(false);\n      console.log(\"signed out\");\n    }\n  });\n\n  async function signInWithGoogle() {\n    const res = await signInWithPopup(auth, provider);\n    const {\n      displayName,\n      email\n    } = res.user;\n    let userDataObj;\n    const userID = `${email}${displayName.split(\" \").join(\"\")}`;\n    const userDocSnap = await getDoc(doc(db, \"users\", userID));\n\n    if (userDocSnap.exists()) {\n      const {\n        userName,\n        displayTheme\n      } = userDocSnap.data();\n      userDataObj = {\n        userName,\n        displayTheme,\n        userID\n      };\n      return;\n    }\n\n    const [categoryExpense, categoryIncome, iconObj, iconArr] = createInitialData();\n    await setDoc(doc(db, \"users\", userID), {\n      userName: displayName,\n      email,\n      categoryExpense,\n      categoryIncome,\n      iconObj,\n      iconArr,\n      displayTheme: \"black\"\n    });\n    userDataObj = {\n      userName: displayName,\n      userID,\n      displayTheme: \"black\"\n    };\n    setUserInfo(userDataObj);\n  }\n\n  console.log(userInfo);\n  const contextObj = userInfo ? { ...userInfo,\n    signInWithGoogle,\n    setUserInfo\n  } : {\n    userData: false,\n    signInWithGoogle,\n    setUserInfo\n  };\n  return /*#__PURE__*/_jsxDEV(UserInfoContext.Provider, {\n    value: contextObj,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserInfoProvider, \"2YTLvkr7vbhO2gmIWBE0DJbe0uY=\");\n\n_c = UserInfoProvider;\nexport default UserInfoProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserInfoProvider\");","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/store/userInfo/userInfoProvider.js"],"names":["useState","UserInfoContext","doc","setDoc","getDoc","signInWithPopup","db","provider","auth","createInitialData","UserInfoProvider","props","userInfo","setUserInfo","onAuthStateChanged","user","displayName","email","userID","split","join","userDocSnap","userName","displayTheme","data","setSignedIn","console","log","signInWithGoogle","res","userDataObj","exists","categoryExpense","categoryIncome","iconObj","iconArr","contextObj","userData","children"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport UserInfoContext from \"./userInfo--context\";\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\nimport { signInWithPopup } from \"firebase/auth\";\nimport { db, provider, auth } from \"../../firebase-config\";\nimport createInitialData from \"../../Others/CreateInitialData/createInitialData\";\n\nfunction UserInfoProvider(props) {\n  const [userInfo, setUserInfo] = useState(false);\n\n  onAuthStateChanged(auth, async (user) => {\n    if (user) {\n      const { displayName, email } = user;\n      const userID = `${email}${displayName.split(\" \").join(\"\")}`;\n      const userDocSnap = await getDoc(doc(db, \"users\", userID));\n      const { userName, displayTheme } = userDocSnap.data();\n\n      // setUserInfo({ userName, displayTheme, userID });\n      setSignedIn(true);\n      console.log(\"signed in\");\n    } else {\n      setSignedIn(false);\n      console.log(\"signed out\");\n    }\n  });\n\n  async function signInWithGoogle() {\n    const res = await signInWithPopup(auth, provider);\n    const { displayName, email } = res.user;\n    let userDataObj;\n\n    const userID = `${email}${displayName.split(\" \").join(\"\")}`;\n\n    const userDocSnap = await getDoc(doc(db, \"users\", userID));\n\n    if (userDocSnap.exists()) {\n      const { userName, displayTheme } = userDocSnap.data();\n      userDataObj = {\n        userName,\n        displayTheme,\n        userID,\n      };\n      return;\n    }\n\n    const [categoryExpense, categoryIncome, iconObj, iconArr] =\n      createInitialData();\n\n    await setDoc(doc(db, \"users\", userID), {\n      userName: displayName,\n      email,\n      categoryExpense,\n      categoryIncome,\n      iconObj,\n      iconArr,\n      displayTheme: \"black\",\n    });\n\n    userDataObj = { userName: displayName, userID, displayTheme: \"black\" };\n    setUserInfo(userDataObj);\n  }\n\n  console.log(userInfo);\n  const contextObj = userInfo\n    ? { ...userInfo, signInWithGoogle, setUserInfo }\n    : { userData: false, signInWithGoogle, setUserInfo };\n\n  return (\n    <UserInfoContext.Provider value={contextObj}>\n      {props.children}\n    </UserInfoContext.Provider>\n  );\n}\n\nexport default UserInfoProvider;\n"]},"metadata":{},"sourceType":"module"}