{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/project-expenseTracker-main/src/components/MainContent/Chart/ChartMain/ChartMain.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useEffect, useContext } from \"react\";\nimport ExpenseDataContext from \"../../../../store/expenseData/expenseData--context\";\nimport style from \"./ChartMain.module.css\";\nimport Chart from \"chart.js/auto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst dateOptObj = {\n  month: \"short\"\n};\n\nfunction ChartMain(props) {\n  _s();\n\n  const chartRef = useRef(null);\n  const {\n    EXPENSE_DATA\n  } = useContext(ExpenseDataContext);\n  let labels = [],\n      labels1 = [],\n      data = [];\n\n  if (props.chartData) {\n    const standardLabels = createStandardLabelsArr(props.chartData.timeDuration, props.chartData.startingDate);\n    labels = standardLabels; // labels = standardLabels.map((label) => )\n    // console.log(standardLabels);\n\n    if (props.chartData.timeDuration === \"6\" || props.chartData.timeDuration === \"12\") {\n      labels1 = standardLabels.map(label => new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(new Date(label)));\n    }\n\n    data = createDataArr1(standardLabels, EXPENSE_DATA);\n  }\n\n  const dataObj = {\n    labels: labels,\n    datasets: [{\n      label: \"My First Dataset\",\n      data: data,\n      backgroundColor: [\"rgba(255, 99, 132, 0.2)\", \"rgba(255, 159, 64, 0.2)\", \"rgba(255, 205, 86, 0.2)\", \"rgba(75, 192, 192, 0.2)\", \"rgba(54, 162, 235, 0.2)\", \"rgba(153, 102, 255, 0.2)\", \"rgba(201, 203, 207, 0.2)\"],\n      borderColor: [\"rgb(255, 99, 132)\", \"rgb(255, 159, 64)\", \"rgb(255, 205, 86)\", \"rgb(75, 192, 192)\", \"rgb(54, 162, 235)\", \"rgb(153, 102, 255)\", \"rgb(201, 203, 207)\"],\n      borderWidth: 1\n    }]\n  };\n  const config = {\n    type: \"bar\",\n    data: dataObj,\n    options: {\n      scales: {\n        y: {\n          beginAtZero: true\n        }\n      }\n    }\n  };\n  useEffect(() => {\n    const chart = new Chart(chartRef.current, config);\n    return function cleanUp() {\n      chart.destroy();\n    };\n  }, [labels]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.chartMain,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: chartRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ChartMain, \"s5lVG1FRM670SA5AkZoMH5TxWF8=\");\n\n_c = ChartMain;\nexport default ChartMain;\n\nfunction createDataArr(standardLabels, expensData, start, mainCategory, subCategory, timeDuration) {\n  // const year = new Date(start).getFullYear();\n  // const startingDate = `${year}-${labels[0]?.slice(0, 2)}-${labels[0]?.slice(\n  //   2\n  // )}`;\n  // const endingDate = `${year}-${labels[labels.length - 1]?.slice(\n  //   0,\n  //   2\n  // )}-${labels[labels.length - 1]?.slice(2)}`;\n  const numStartingDate = Number(new Date(standardLabels[0]));\n  const numEndingDate = Number(new Date(standardLabels[standardLabels.length - 1]));\n  const filteredData = expensData.filter(element => Number(new Date(element.time)) >= numStartingDate && Number(new Date(element.time)) <= numEndingDate).sort((elementA, elementB) => Number(new Date(elementA.time)) - Number(new Date(elementB.time)));\n  const data = [];\n  let indexData = 0;\n  let indexCurrentDate = true;\n  let currentAmount = 0;\n  let currentLabel;\n\n  for (let i = 0; i < standardLabels.length; i++) {\n    currentLabel = Number(new Date(standardLabels[i]));\n\n    while (indexCurrentDate) {\n      var _filteredData$indexDa;\n\n      if (Number(new Date((_filteredData$indexDa = filteredData[indexData]) === null || _filteredData$indexDa === void 0 ? void 0 : _filteredData$indexDa.time)) <= currentLabel) {\n        if (filteredData[indexData].category === \"expense\") {\n          currentAmount += Number(filteredData[indexData].price);\n        }\n\n        indexData++;\n      } else indexCurrentDate = false;\n    }\n\n    data.push(currentAmount);\n    currentAmount = 0;\n    indexCurrentDate = true;\n  }\n\n  console.log(filteredData);\n  console.log(standardLabels);\n  console.log(data); // console.log(data);\n\n  return data;\n}\n\nfunction createDataArr1(standardLabels, expensData) {\n  const numStartingDate = Number(new Date(standardLabels[0]));\n  const numEndingDate = Number(new Date(standardLabels[standardLabels.length - 1]));\n  const filteredData = expensData.filter(element => Number(new Date(element.time)) >= numStartingDate && Number(new Date(element.time)) <= numEndingDate).sort((elementA, elementB) => Number(new Date(elementA.time)) - Number(new Date(elementB.time)));\n  const data = [];\n  let indexData = 0;\n  let indexCurrentDate = true;\n  let currentAmount = 0;\n  let yearLabel, monthLabel, dayLabel, yearDate, monthData, dayData;\n\n  for (let i = 0; i < standardLabels.length; i++) {\n    yearLabel = standardLabels[i].slice(0, 4);\n    monthLabel = standardLabels[i].slice(5, 7);\n    dayLabel = standardLabels[i].slice(8);\n\n    while (indexCurrentDate) {\n      var _filteredData$indexDa2, _filteredData$indexDa3, _filteredData$indexDa4;\n\n      yearDate = (_filteredData$indexDa2 = filteredData[indexData]) === null || _filteredData$indexDa2 === void 0 ? void 0 : _filteredData$indexDa2.time.slice(0, 4);\n      monthData = (_filteredData$indexDa3 = filteredData[indexData]) === null || _filteredData$indexDa3 === void 0 ? void 0 : _filteredData$indexDa3.time.slice(5, 7);\n      dayData = (_filteredData$indexDa4 = filteredData[indexData]) === null || _filteredData$indexDa4 === void 0 ? void 0 : _filteredData$indexDa4.time.slice(8);\n\n      if (yearLabel === yearDate && monthLabel === monthData) {\n        if (Number(dayLabel) <= Number(dayData) && 31 >= Number(dayData)) if (filteredData[indexData].category === \"expense\") {\n          currentAmount += Number(filteredData[indexData].price);\n        }\n        indexData++;\n      } else indexCurrentDate = false;\n    }\n\n    data.push(currentAmount);\n    currentAmount = 0;\n    indexCurrentDate = true;\n  }\n\n  return data;\n}\n\nfunction createStandardLabelsArr(duration, startingDate) {\n  const today = new Date(startingDate);\n  let labels = []; // one week\n\n  if (duration === \"7\") {\n    createStandardLabelsArrHelper(labels, 7, 1, \"day\", today);\n  }\n\n  if (duration === \"14\") {\n    createStandardLabelsArrHelper(labels, 14, 1, \"day\", today);\n  }\n\n  if (duration === \"30\") {\n    createStandardLabelsArrHelper(labels, 30, 1, \"day\", today);\n  }\n\n  if (duration === \"90\") {\n    createStandardLabelsArrHelper(labels, 30, 3, \"day\", today);\n  }\n\n  if (duration === \"6\") {\n    createStandardLabelsArrHelper(labels, 6, 1, \"month\", today);\n  }\n\n  if (duration === \"12\") {\n    createStandardLabelsArrHelper(labels, 12, 1, \"month\", today);\n  }\n\n  return labels;\n}\n\nfunction createStandardLabelsArrHelper(labels, duration, incrementAmount, dayMonth, today) {\n  let tmpDay = today;\n  let day;\n  let month;\n  let year = today.getFullYear();\n  let changeYear = false; // if it's increment by month, the day is never change\n  // we could put it outisde for-loop\n\n  if (dayMonth === \"month\") {\n    if (tmpDay.getDate() < 10) day = `0${tmpDay.getDate()}`;else day = tmpDay.getDate();\n  }\n\n  for (let i = 0; i < duration; i++) {\n    // incremenet by month\n    if (dayMonth === \"month\") tmpDay.setMonth(tmpDay.getMonth() + incrementAmount); // increment by day\n\n    if (dayMonth === \"day\") {\n      tmpDay.setDate(tmpDay.getDate() + incrementAmount); // day will change, so put this inside for-loop\n\n      if (tmpDay.getDate() < 10) day = `0${tmpDay.getDate()}`;else day = tmpDay.getDate();\n    }\n\n    if (tmpDay.getMonth() + 1 < 10) month = `0${tmpDay.getMonth() + 1}`;else month = tmpDay.getMonth() + 1; // increment year\n\n    if (changeYear) {\n      year++;\n      changeYear = false;\n    }\n\n    if (tmpDay.getMonth() === 11) changeYear = true;\n    labels.push(`${year}-${month}-${day}`);\n  }\n}\n/*\n if (timeDuration === \"6\" || timeDuration === \"12\") {\n    if (mainCategory === \"income\" && subCategory.length === 3) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentMonth;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        // keep adding if it's still at current date(time)\n        while (indexCurrentDate) {\n          currentMonth = new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(\n            new Date(filteredData[indexData]?.time)\n          );\n          // check date(time)\n          if (currentMonth === labels1[indexLabel]) {\n            // check main category\n            if (filteredData[indexData].category === \"income\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n\n    if (mainCategory === \"expense\" && subCategory.length === 6) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentMonth;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        // keep adding if it's still at current date(time)\n        while (indexCurrentDate) {\n          console.log(filteredData);\n          if (!filteredData[indexData]?.time)\n            currentMonth = new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(\n              new Date(filteredData[indexData]?.time)\n            );\n          console.log(currentMonth);\n\n          if (currentMonth === labels1[indexLabel]) {\n            // check main category\n            if (filteredData[indexData].category === \"income\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n  }\n  // day base\n  else {\n    if (mainCategory === \"income\" && subCategory.length === 3) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentDate;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        currentDate = `${year}-${labels[indexLabel].slice(0, 2)}-${labels[\n          indexLabel\n        ].slice(2)}`;\n\n        // keep adding if it's still at current date(time)\n        if (indexData < filteredData.length - 1) {\n          while (indexCurrentDate) {\n            // check date(time)\n            if (filteredData[indexData].time === currentDate) {\n              // check main category\n              if (filteredData[indexData].category === \"income\") {\n                currentAmount += Number(filteredData[indexData].price);\n              }\n\n              indexData++;\n            } else indexCurrentDate = false;\n          }\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n\n    if (mainCategory === \"expense\" && subCategory.length === 6) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentDate;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        currentDate = `${year}-${labels[indexLabel].slice(0, 2)}-${labels[\n          indexLabel\n        ].slice(2)}`;\n\n        // keep adding if it's still at current date(time)\n\n        while (indexCurrentDate) {\n          // check date(time)\n          if (filteredData[indexData]?.time === currentDate) {\n            // check main category\n            if (filteredData[indexData].category === \"expense\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n  }\n*/\n\n\nvar _c;\n\n$RefreshReg$(_c, \"ChartMain\");","map":{"version":3,"sources":["/Users/eyo/Desktop/project-expenseTracker-main/src/components/MainContent/Chart/ChartMain/ChartMain.js"],"names":["useRef","useEffect","useContext","ExpenseDataContext","style","Chart","dateOptObj","month","ChartMain","props","chartRef","EXPENSE_DATA","labels","labels1","data","chartData","standardLabels","createStandardLabelsArr","timeDuration","startingDate","map","label","Intl","DateTimeFormat","format","Date","createDataArr1","dataObj","datasets","backgroundColor","borderColor","borderWidth","config","type","options","scales","y","beginAtZero","chart","current","cleanUp","destroy","chartMain","createDataArr","expensData","start","mainCategory","subCategory","numStartingDate","Number","numEndingDate","length","filteredData","filter","element","time","sort","elementA","elementB","indexData","indexCurrentDate","currentAmount","currentLabel","i","category","price","push","console","log","yearLabel","monthLabel","dayLabel","yearDate","monthData","dayData","slice","duration","today","createStandardLabelsArrHelper","incrementAmount","dayMonth","tmpDay","day","year","getFullYear","changeYear","getDate","setMonth","getMonth","setDate"],"mappings":"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GD,MAAM,CAACK,OAAP,EAAiB,EAA3B,CAA3B,KACKJ,GAAG,GAAGD,MAAM,CAACK,OAAP,EAAN;AACN;;AAED,QAAIL,MAAM,CAACO,QAAP,KAAoB,CAApB,GAAwB,EAA5B,EAAgCjF,KAAK,GAAI,IAAG0E,MAAM,CAACO,QAAP,KAAoB,CAAE,EAAlC,CAAhC,KACKjF,KAAK,GAAG0E,MAAM,CAACO,QAAP,KAAoB,CAA5B,CAf4B,CAiBjC;;AACA,QAAIH,UAAJ,EAAgB;AACdF,MAAAA,IAAI;AACJE,MAAAA,UAAU,GAAG,KAAb;AACD;;AACD,QAAIJ,MAAM,CAACO,QAAP,OAAsB,EAA1B,EAA8BH,UAAU,GAAG,IAAb;AAE9BzE,IAAAA,MAAM,CAACsD,IAAP,CAAa,GAAEiB,IAAK,IAAG5E,KAAM,IAAG2E,GAAI,EAApC;AACD;AACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { useRef, useEffect, useContext } from \"react\";\nimport ExpenseDataContext from \"../../../../store/expenseData/expenseData--context\";\nimport style from \"./ChartMain.module.css\";\nimport Chart from \"chart.js/auto\";\n\nconst dateOptObj = { month: \"short\" };\n\nfunction ChartMain(props) {\n  const chartRef = useRef(null);\n  const { EXPENSE_DATA } = useContext(ExpenseDataContext);\n\n  let labels = [],\n    labels1 = [],\n    data = [];\n\n  if (props.chartData) {\n    const standardLabels = createStandardLabelsArr(\n      props.chartData.timeDuration,\n      props.chartData.startingDate\n    );\n\n    labels = standardLabels;\n\n    // labels = standardLabels.map((label) => )\n    // console.log(standardLabels);\n\n    if (\n      props.chartData.timeDuration === \"6\" ||\n      props.chartData.timeDuration === \"12\"\n    ) {\n      labels1 = standardLabels.map((label) =>\n        new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(new Date(label))\n      );\n    }\n\n    data = createDataArr1(standardLabels, EXPENSE_DATA);\n  }\n\n  const dataObj = {\n    labels: labels,\n    datasets: [\n      {\n        label: \"My First Dataset\",\n        data: data,\n        backgroundColor: [\n          \"rgba(255, 99, 132, 0.2)\",\n          \"rgba(255, 159, 64, 0.2)\",\n          \"rgba(255, 205, 86, 0.2)\",\n          \"rgba(75, 192, 192, 0.2)\",\n          \"rgba(54, 162, 235, 0.2)\",\n          \"rgba(153, 102, 255, 0.2)\",\n          \"rgba(201, 203, 207, 0.2)\",\n        ],\n        borderColor: [\n          \"rgb(255, 99, 132)\",\n          \"rgb(255, 159, 64)\",\n          \"rgb(255, 205, 86)\",\n          \"rgb(75, 192, 192)\",\n          \"rgb(54, 162, 235)\",\n          \"rgb(153, 102, 255)\",\n          \"rgb(201, 203, 207)\",\n        ],\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  const config = {\n    type: \"bar\",\n    data: dataObj,\n    options: {\n      scales: {\n        y: {\n          beginAtZero: true,\n        },\n      },\n    },\n  };\n\n  useEffect(() => {\n    const chart = new Chart(chartRef.current, config);\n\n    return function cleanUp() {\n      chart.destroy();\n    };\n  }, [labels]);\n\n  return (\n    <div className={style.chartMain}>\n      <div>\n        <canvas ref={chartRef}></canvas>\n      </div>\n    </div>\n  );\n}\n\nexport default ChartMain;\n\nfunction createDataArr(\n  standardLabels,\n  expensData,\n  start,\n  mainCategory,\n  subCategory,\n  timeDuration\n) {\n  // const year = new Date(start).getFullYear();\n  // const startingDate = `${year}-${labels[0]?.slice(0, 2)}-${labels[0]?.slice(\n  //   2\n  // )}`;\n  // const endingDate = `${year}-${labels[labels.length - 1]?.slice(\n  //   0,\n  //   2\n  // )}-${labels[labels.length - 1]?.slice(2)}`;\n\n  const numStartingDate = Number(new Date(standardLabels[0]));\n  const numEndingDate = Number(\n    new Date(standardLabels[standardLabels.length - 1])\n  );\n\n  const filteredData = expensData\n    .filter(\n      (element) =>\n        Number(new Date(element.time)) >= numStartingDate &&\n        Number(new Date(element.time)) <= numEndingDate\n    )\n    .sort(\n      (elementA, elementB) =>\n        Number(new Date(elementA.time)) - Number(new Date(elementB.time))\n    );\n\n  const data = [];\n\n  let indexData = 0;\n  let indexCurrentDate = true;\n  let currentAmount = 0;\n  let currentLabel;\n\n  for (let i = 0; i < standardLabels.length; i++) {\n    currentLabel = Number(new Date(standardLabels[i]));\n    while (indexCurrentDate) {\n      if (Number(new Date(filteredData[indexData]?.time)) <= currentLabel) {\n        if (filteredData[indexData].category === \"expense\") {\n          currentAmount += Number(filteredData[indexData].price);\n        }\n\n        indexData++;\n      } else indexCurrentDate = false;\n    }\n\n    data.push(currentAmount);\n    currentAmount = 0;\n    indexCurrentDate = true;\n  }\n\n  console.log(filteredData);\n  console.log(standardLabels);\n  console.log(data);\n  // console.log(data);\n  return data;\n}\n\nfunction createDataArr1(standardLabels, expensData) {\n  const numStartingDate = Number(new Date(standardLabels[0]));\n  const numEndingDate = Number(\n    new Date(standardLabels[standardLabels.length - 1])\n  );\n\n  const filteredData = expensData\n    .filter(\n      (element) =>\n        Number(new Date(element.time)) >= numStartingDate &&\n        Number(new Date(element.time)) <= numEndingDate\n    )\n    .sort(\n      (elementA, elementB) =>\n        Number(new Date(elementA.time)) - Number(new Date(elementB.time))\n    );\n\n  const data = [];\n\n  let indexData = 0;\n  let indexCurrentDate = true;\n  let currentAmount = 0;\n  let yearLabel, monthLabel, dayLabel, yearDate, monthData, dayData;\n\n  for (let i = 0; i < standardLabels.length; i++) {\n    yearLabel = standardLabels[i].slice(0, 4);\n    monthLabel = standardLabels[i].slice(5, 7);\n    dayLabel = standardLabels[i].slice(8);\n\n    while (indexCurrentDate) {\n      yearDate = filteredData[indexData]?.time.slice(0, 4);\n      monthData = filteredData[indexData]?.time.slice(5, 7);\n      dayData = filteredData[indexData]?.time.slice(8);\n\n      if (yearLabel === yearDate && monthLabel === monthData) {\n        if (Number(dayLabel) <= Number(dayData) && 31 >= Number(dayData))\n          if (filteredData[indexData].category === \"expense\") {\n            currentAmount += Number(filteredData[indexData].price);\n          }\n\n        indexData++;\n      } else indexCurrentDate = false;\n    }\n\n    data.push(currentAmount);\n    currentAmount = 0;\n    indexCurrentDate = true;\n  }\n\n  return data;\n}\n\nfunction createStandardLabelsArr(duration, startingDate) {\n  const today = new Date(startingDate);\n\n  let labels = [];\n\n  // one week\n  if (duration === \"7\") {\n    createStandardLabelsArrHelper(labels, 7, 1, \"day\", today);\n  }\n\n  if (duration === \"14\") {\n    createStandardLabelsArrHelper(labels, 14, 1, \"day\", today);\n  }\n\n  if (duration === \"30\") {\n    createStandardLabelsArrHelper(labels, 30, 1, \"day\", today);\n  }\n\n  if (duration === \"90\") {\n    createStandardLabelsArrHelper(labels, 30, 3, \"day\", today);\n  }\n\n  if (duration === \"6\") {\n    createStandardLabelsArrHelper(labels, 6, 1, \"month\", today);\n  }\n\n  if (duration === \"12\") {\n    createStandardLabelsArrHelper(labels, 12, 1, \"month\", today);\n  }\n\n  return labels;\n}\n\nfunction createStandardLabelsArrHelper(\n  labels,\n  duration,\n  incrementAmount,\n  dayMonth,\n  today\n) {\n  let tmpDay = today;\n  let day;\n  let month;\n  let year = today.getFullYear();\n  let changeYear = false;\n\n  // if it's increment by month, the day is never change\n  // we could put it outisde for-loop\n  if (dayMonth === \"month\") {\n    if (tmpDay.getDate() < 10) day = `0${tmpDay.getDate()}`;\n    else day = tmpDay.getDate();\n  }\n\n  for (let i = 0; i < duration; i++) {\n    // incremenet by month\n    if (dayMonth === \"month\")\n      tmpDay.setMonth(tmpDay.getMonth() + incrementAmount);\n\n    // increment by day\n    if (dayMonth === \"day\") {\n      tmpDay.setDate(tmpDay.getDate() + incrementAmount);\n\n      // day will change, so put this inside for-loop\n      if (tmpDay.getDate() < 10) day = `0${tmpDay.getDate()}`;\n      else day = tmpDay.getDate();\n    }\n\n    if (tmpDay.getMonth() + 1 < 10) month = `0${tmpDay.getMonth() + 1}`;\n    else month = tmpDay.getMonth() + 1;\n\n    // increment year\n    if (changeYear) {\n      year++;\n      changeYear = false;\n    }\n    if (tmpDay.getMonth() === 11) changeYear = true;\n\n    labels.push(`${year}-${month}-${day}`);\n  }\n}\n\n/*\n if (timeDuration === \"6\" || timeDuration === \"12\") {\n    if (mainCategory === \"income\" && subCategory.length === 3) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentMonth;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        // keep adding if it's still at current date(time)\n        while (indexCurrentDate) {\n          currentMonth = new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(\n            new Date(filteredData[indexData]?.time)\n          );\n          // check date(time)\n          if (currentMonth === labels1[indexLabel]) {\n            // check main category\n            if (filteredData[indexData].category === \"income\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n\n    if (mainCategory === \"expense\" && subCategory.length === 6) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentMonth;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        // keep adding if it's still at current date(time)\n        while (indexCurrentDate) {\n          console.log(filteredData);\n          if (!filteredData[indexData]?.time)\n            currentMonth = new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(\n              new Date(filteredData[indexData]?.time)\n            );\n          console.log(currentMonth);\n\n          if (currentMonth === labels1[indexLabel]) {\n            // check main category\n            if (filteredData[indexData].category === \"income\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n  }\n  // day base\n  else {\n    if (mainCategory === \"income\" && subCategory.length === 3) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentDate;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        currentDate = `${year}-${labels[indexLabel].slice(0, 2)}-${labels[\n          indexLabel\n        ].slice(2)}`;\n\n        // keep adding if it's still at current date(time)\n        if (indexData < filteredData.length - 1) {\n          while (indexCurrentDate) {\n            // check date(time)\n            if (filteredData[indexData].time === currentDate) {\n              // check main category\n              if (filteredData[indexData].category === \"income\") {\n                currentAmount += Number(filteredData[indexData].price);\n              }\n\n              indexData++;\n            } else indexCurrentDate = false;\n          }\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n\n    if (mainCategory === \"expense\" && subCategory.length === 6) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentDate;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        currentDate = `${year}-${labels[indexLabel].slice(0, 2)}-${labels[\n          indexLabel\n        ].slice(2)}`;\n\n        // keep adding if it's still at current date(time)\n\n        while (indexCurrentDate) {\n          // check date(time)\n          if (filteredData[indexData]?.time === currentDate) {\n            // check main category\n            if (filteredData[indexData].category === \"expense\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n  }\n*/\n"]},"metadata":{},"sourceType":"module"}