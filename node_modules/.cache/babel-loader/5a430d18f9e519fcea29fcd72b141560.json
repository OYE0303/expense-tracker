{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/project-expenseTracker-main/src/components/MainContent/Chart/ChartMain/ChartMain.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useEffect, useContext } from \"react\";\nimport ExpenseDataContext from \"../../../../store/expenseData/expenseData--context\";\nimport style from \"./ChartMain.module.css\";\nimport Chart from \"chart.js/auto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst dateOptObj = {\n  month: \"short\"\n}; // const data1 = {\n//   labels: [\"Red\", \"Blue\", \"Yellow\"],\n//   datasets: [\n//     {\n//       label: \"My First Dataset\",\n//       data: [300, 50, 100],\n//       backgroundColor: [\n//         \"rgb(255, 99, 132)\",\n//         \"rgb(54, 162, 235)\",\n//         \"rgb(255, 205, 86)\",\n//       ],\n//       hoverOffset: 4,\n//     },\n//   ],\n// };\n// const config1 = {\n//   type: \"doughnut\",\n//   data: data1,\n// };\n\nfunction ChartMain(props) {\n  _s();\n\n  const chartRef = useRef(null);\n  const {\n    EXPENSE_DATA\n  } = useContext(ExpenseDataContext); // let configPPP;\n  // if (props.chartData.mainType === \"time\") {\n  //   let labels = [],\n  //     data = [];\n  //   const standardLabels = createStandardLabelsArr(\n  //     props.chartData.timeDuration,\n  //     props.chartData.startingDate\n  //   );\n  //   labels = createLabelsArr(standardLabels, props.chartData.timeDuration);\n  //   data = createDataArr(\n  //     standardLabels,\n  //     createFilteredData(standardLabels, EXPENSE_DATA),\n  //     props.chartData.timeDuration,\n  //     props.chartData.mainCategory,\n  //     props.chartData.subCategory\n  //   );\n  //   const dataObj = {\n  //     labels: labels,\n  //     datasets: [\n  //       {\n  //         label: \"\",\n  //         data: data,\n  //         backgroundColor: [\n  //           \"rgba(255, 99, 132, 0.2)\",\n  //           \"rgba(255, 159, 64, 0.2)\",\n  //           \"rgba(255, 205, 86, 0.2)\",\n  //           \"rgba(75, 192, 192, 0.2)\",\n  //           \"rgba(54, 162, 235, 0.2)\",\n  //           \"rgba(153, 102, 255, 0.2)\",\n  //           \"rgba(201, 203, 207, 0.2)\",\n  //         ],\n  //         borderColor: [\n  //           \"rgb(255, 99, 132)\",\n  //           \"rgb(255, 159, 64)\",\n  //           \"rgb(255, 205, 86)\",\n  //           \"rgb(75, 192, 192)\",\n  //           \"rgb(54, 162, 235)\",\n  //           \"rgb(153, 102, 255)\",\n  //           \"rgb(201, 203, 207)\",\n  //         ],\n  //         borderWidth: 1,\n  //       },\n  //     ],\n  //   };\n  //   const config = {\n  //     type: \"bar\",\n  //     data: dataObj,\n  //     options: {\n  //       scales: {\n  //         y: {\n  //           beginAtZero: true,\n  //         },\n  //       },\n  //     },\n  //   };\n  //   configPPP = config;\n  // } else {\n  //   const filteredData = EXPENSE_DATA.filter(\n  //     (element) =>\n  //       Number(new Date(element.time)) >=\n  //         Number(new Date(props.chartData.startingDate)) &&\n  //       Number(new Date(element.time)) <=\n  //         Number(new Date(props.chartData.endingDate)) &&\n  //       element.category === props.chartData.mainCategory\n  //   );\n  //   const labels = props.chartData.subCategory;\n  //   let newFilteredData = [];\n  //   labels.forEach((label) => {\n  //     newFilteredData.push(\n  //       filteredData.filter((data) => data.mainCate === label)\n  //     );\n  //   });\n  //   let dataArr = [];\n  //   newFilteredData.forEach((data) => {\n  //     let dataTmp;\n  //     if (data.length > 0) {\n  //       dataTmp = data.reduce((acc, cur) => (acc += Number(cur.price)), 0);\n  //     } else dataTmp = 0;\n  //     dataArr.push(dataTmp);\n  //   });\n  //   const data1 = {\n  //     labels: labels,\n  //     datasets: [\n  //       {\n  //         label: \"My First Dataset\",\n  //         data: dataArr,\n  //         backgroundColor: [\n  //           \"rgb(255, 99, 132)\",\n  //           \"rgb(255, 159, 64)\",\n  //           \"rgb(255, 205, 86)\",\n  //           \"rgb(75, 192, 192)\",\n  //           \"rgb(54, 162, 235)\",\n  //           \"rgb(153, 102, 255)\",\n  //           \"rgb(201, 203, 207)\",\n  //         ],\n  //         hoverOffset: 4,\n  //       },\n  //     ],\n  //   };\n  //   const config1 = {\n  //     type: \"doughnut\",\n  //     data: data1,\n  //   };\n  //   configPPP = config1;\n  //   // console.log(da);\n  //   // console.log(labels);\n  // }\n\n  useEffect(() => {\n    const chart = new Chart(chartRef.current, configPPP);\n    return function cleanUp() {\n      chart.destroy();\n    };\n  }, [props.chartData]);\n  let charClassName = \"chart--bar\";\n  if (props.chartData.mainType === \"category\") charClassName = \"chart--circle\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.chartMain,\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      className: style[charClassName],\n      ref: chartRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ChartMain, \"s5lVG1FRM670SA5AkZoMH5TxWF8=\");\n\n_c = ChartMain;\nexport default ChartMain;\n\nfunction createConfig(mainType, timeDuration, startingDate, endingDate, expensData, mainCategory, subCategory) {\n  if (mainType === \"time\") {\n    const standardLabels = createStandardLabelsArr(timeDuration, startingDate);\n    const labels = createLabelsArr(standardLabels, timeDuration);\n    const data = createDataArr(standardLabels, createFilteredData(standardLabels, expensData), timeDuration, mainCategory, subCategory);\n    return {\n      type: \"bar\",\n      data: {\n        labels: labels,\n        datasets: [{\n          label: \"\",\n          data: data,\n          backgroundColor: [\"rgba(255, 99, 132, 0.2)\", \"rgba(255, 159, 64, 0.2)\", \"rgba(255, 205, 86, 0.2)\", \"rgba(75, 192, 192, 0.2)\", \"rgba(54, 162, 235, 0.2)\", \"rgba(153, 102, 255, 0.2)\", \"rgba(201, 203, 207, 0.2)\"],\n          borderColor: [\"rgb(255, 99, 132)\", \"rgb(255, 159, 64)\", \"rgb(255, 205, 86)\", \"rgb(75, 192, 192)\", \"rgb(54, 162, 235)\", \"rgb(153, 102, 255)\", \"rgb(201, 203, 207)\"],\n          borderWidth: 1\n        }]\n      },\n      options: {\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    };\n  } else {\n    const filteredData = expensData.filter(element => Number(new Date(element.time)) >= Number(new Date(startingDate)) && Number(new Date(element.time)) <= Number(new Date(endingDate)) && element.category === mainCategory);\n    const labels = subCategory;\n    let newFilteredData = [];\n    labels.forEach(label => {\n      newFilteredData.push(filteredData.filter(data => data.mainCate === label));\n    });\n    let dataArr = [];\n    newFilteredData.forEach(data => {\n      let dataTmp;\n\n      if (data.length > 0) {\n        dataTmp = data.reduce((acc, cur) => acc += Number(cur.price), 0);\n      } else dataTmp = 0;\n\n      dataArr.push(dataTmp);\n    });\n    return {\n      type: \"doughnut\",\n      data: {\n        labels: labels,\n        datasets: [{\n          label: \"My First Dataset\",\n          data: dataArr,\n          backgroundColor: [\"rgb(255, 99, 132)\", \"rgb(255, 159, 64)\", \"rgb(255, 205, 86)\", \"rgb(75, 192, 192)\", \"rgb(54, 162, 235)\", \"rgb(153, 102, 255)\", \"rgb(201, 203, 207)\"],\n          hoverOffset: 4\n        }]\n      }\n    };\n  }\n}\n\nfunction createLabelsArr(standardLabels, duration) {\n  if (duration === \"6\" || duration === \"12\") {\n    return standardLabels.map(label => new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(new Date(label)));\n  }\n\n  return standardLabels.map(label => `${label.slice(5, 7)}${label.slice(8)}`);\n}\n\nfunction createFilteredData(standardLabels, expensData) {\n  const numStartingDate = Number(new Date(standardLabels[0]));\n  const numEndingDate = Number(new Date(standardLabels[standardLabels.length - 1]));\n  return expensData.filter(element => Number(new Date(element.time)) >= numStartingDate && Number(new Date(element.time)) <= numEndingDate).sort((elementA, elementB) => Number(new Date(elementA.time)) - Number(new Date(elementB.time)));\n}\n\nfunction createDataArr(standardLabels, filteredData, timeDuration, mainCategory, subCategory) {\n  if (timeDuration === \"12\" || timeDuration === \"6\") return createDataArrMonth(standardLabels, filteredData, mainCategory, subCategory);else return createDataArrDay(standardLabels, filteredData, mainCategory, subCategory);\n}\n\nfunction createDataArrDay(standardLabels, filteredData, mainCategory, subCategory) {\n  const data = [];\n  const checkboxNoChange = mainCategory === \"expense\" && subCategory.length === 6 || mainCategory === \"income\" && subCategory.length === 3;\n  let indexData = 0;\n  let indexCurrentDate = true;\n  let currentAmount = 0;\n  let currentLabel;\n\n  for (let i = 0; i < standardLabels.length; i++) {\n    currentLabel = Number(new Date(standardLabels[i]));\n\n    while (indexCurrentDate) {\n      var _filteredData$indexDa;\n\n      if (Number(new Date((_filteredData$indexDa = filteredData[indexData]) === null || _filteredData$indexDa === void 0 ? void 0 : _filteredData$indexDa.time)) <= currentLabel) {\n        if (filteredData[indexData].category === mainCategory) {\n          if (checkboxNoChange || subCategory.includes(filteredData[indexData].mainCate)) currentAmount += Number(filteredData[indexData].price);\n        }\n\n        indexData++;\n      } else indexCurrentDate = false;\n    }\n\n    data.push(currentAmount);\n    currentAmount = 0;\n    indexCurrentDate = true;\n  }\n\n  return data;\n}\n\nfunction createDataArrMonth(standardLabels, filteredData, mainCategory, subCategory) {\n  const data = [];\n  const checkboxNoChange = mainCategory === \"expense\" && subCategory.length === 6 || mainCategory === \"income\" && subCategory.length === 3;\n  let indexData = 0;\n  let indexCurrentDate = true;\n  let currentAmount = 0;\n  let yearLabel, monthLabel, dayLabel, yearDate, monthData, dayData;\n\n  for (let i = 0; i < standardLabels.length; i++) {\n    yearLabel = standardLabels[i].slice(0, 4);\n    monthLabel = standardLabels[i].slice(5, 7);\n    dayLabel = standardLabels[i].slice(8);\n\n    while (indexCurrentDate) {\n      var _filteredData$indexDa2, _filteredData$indexDa3, _filteredData$indexDa4;\n\n      yearDate = (_filteredData$indexDa2 = filteredData[indexData]) === null || _filteredData$indexDa2 === void 0 ? void 0 : _filteredData$indexDa2.time.slice(0, 4);\n      monthData = (_filteredData$indexDa3 = filteredData[indexData]) === null || _filteredData$indexDa3 === void 0 ? void 0 : _filteredData$indexDa3.time.slice(5, 7);\n      dayData = (_filteredData$indexDa4 = filteredData[indexData]) === null || _filteredData$indexDa4 === void 0 ? void 0 : _filteredData$indexDa4.time.slice(8);\n\n      if (yearLabel === yearDate && monthLabel === monthData) {\n        if (Number(dayLabel) <= Number(dayData) && 31 >= Number(dayData)) if (filteredData[indexData].category === mainCategory) {\n          if (checkboxNoChange || subCategory.includes(filteredData[indexData].mainCate)) currentAmount += Number(filteredData[indexData].price);\n        }\n        indexData++;\n      } else indexCurrentDate = false;\n    }\n\n    data.push(currentAmount);\n    currentAmount = 0;\n    indexCurrentDate = true;\n  }\n\n  return data;\n}\n\nfunction createStandardLabelsArr(duration, startingDate) {\n  const today = new Date(startingDate);\n  let labels = []; // one week\n\n  if (duration === \"7\") {\n    createStandardLabelsArrHelper(labels, 7, 1, \"day\", today);\n  }\n\n  if (duration === \"14\") {\n    createStandardLabelsArrHelper(labels, 14, 1, \"day\", today);\n  }\n\n  if (duration === \"30\") {\n    createStandardLabelsArrHelper(labels, 30, 1, \"day\", today);\n  }\n\n  if (duration === \"90\") {\n    createStandardLabelsArrHelper(labels, 30, 3, \"day\", today);\n  }\n\n  if (duration === \"6\") {\n    createStandardLabelsArrHelper(labels, 6, 1, \"month\", today);\n  }\n\n  if (duration === \"12\") {\n    createStandardLabelsArrHelper(labels, 12, 1, \"month\", today);\n  }\n\n  return labels;\n}\n\nfunction createStandardLabelsArrHelper(labels, duration, incrementAmount, dayMonth, today) {\n  let tmpDay = today;\n  let day;\n  let month;\n  let year = today.getFullYear();\n  let changeYear = false; // if it's increment by month, the day is never change\n  // we could put it outisde for-loop\n\n  if (dayMonth === \"month\") {\n    if (tmpDay.getDate() < 10) day = `0${tmpDay.getDate()}`;else day = tmpDay.getDate();\n  }\n\n  for (let i = 0; i < duration; i++) {\n    // incremenet by month\n    if (dayMonth === \"month\") tmpDay.setMonth(tmpDay.getMonth() + incrementAmount); // increment by day\n\n    if (dayMonth === \"day\") {\n      tmpDay.setDate(tmpDay.getDate() + incrementAmount); // day will change, so put this inside for-loop\n\n      if (tmpDay.getDate() < 10) day = `0${tmpDay.getDate()}`;else day = tmpDay.getDate();\n    }\n\n    if (tmpDay.getMonth() + 1 < 10) month = `0${tmpDay.getMonth() + 1}`;else month = tmpDay.getMonth() + 1; // increment year\n\n    if (changeYear) {\n      year++;\n      changeYear = false;\n    }\n\n    if (tmpDay.getMonth() === 11) changeYear = true;\n    labels.push(`${year}-${month}-${day}`);\n  }\n}\n/*\n if (timeDuration === \"6\" || timeDuration === \"12\") {\n    if (mainCategory === \"income\" && subCategory.length === 3) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentMonth;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        // keep adding if it's still at current date(time)\n        while (indexCurrentDate) {\n          currentMonth = new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(\n            new Date(filteredData[indexData]?.time)\n          );\n          // check date(time)\n          if (currentMonth === labels1[indexLabel]) {\n            // check main category\n            if (filteredData[indexData].category === \"income\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n\n    if (mainCategory === \"expense\" && subCategory.length === 6) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentMonth;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        // keep adding if it's still at current date(time)\n        while (indexCurrentDate) {\n          console.log(filteredData);\n          if (!filteredData[indexData]?.time)\n            currentMonth = new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(\n              new Date(filteredData[indexData]?.time)\n            );\n          console.log(currentMonth);\n\n          if (currentMonth === labels1[indexLabel]) {\n            // check main category\n            if (filteredData[indexData].category === \"income\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n  }\n  // day base\n  else {\n    if (mainCategory === \"income\" && subCategory.length === 3) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentDate;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        currentDate = `${year}-${labels[indexLabel].slice(0, 2)}-${labels[\n          indexLabel\n        ].slice(2)}`;\n\n        // keep adding if it's still at current date(time)\n        if (indexData < filteredData.length - 1) {\n          while (indexCurrentDate) {\n            // check date(time)\n            if (filteredData[indexData].time === currentDate) {\n              // check main category\n              if (filteredData[indexData].category === \"income\") {\n                currentAmount += Number(filteredData[indexData].price);\n              }\n\n              indexData++;\n            } else indexCurrentDate = false;\n          }\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n\n    if (mainCategory === \"expense\" && subCategory.length === 6) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentDate;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        currentDate = `${year}-${labels[indexLabel].slice(0, 2)}-${labels[\n          indexLabel\n        ].slice(2)}`;\n\n        // keep adding if it's still at current date(time)\n\n        while (indexCurrentDate) {\n          // check date(time)\n          if (filteredData[indexData]?.time === currentDate) {\n            // check main category\n            if (filteredData[indexData].category === \"expense\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n  }\n*/\n\n\nvar _c;\n\n$RefreshReg$(_c, \"ChartMain\");","map":{"version":3,"sources":["/Users/eyo/Desktop/project-expenseTracker-main/src/components/MainContent/Chart/ChartMain/ChartMain.js"],"names":["useRef","useEffect","useContext","ExpenseDataContext","style","Chart","dateOptObj","month","ChartMain","props","chartRef","EXPENSE_DATA","chart","current","configPPP","cleanUp","destroy","chartData","charClassName","mainType","chartMain","createConfig","timeDuration","startingDate","endingDate","expensData","mainCategory","subCategory","standardLabels","createStandardLabelsArr","labels","createLabelsArr","data","createDataArr","createFilteredData","type","datasets","label","backgroundColor","borderColor","borderWidth","options","scales","y","beginAtZero","filteredData","filter","element","Number","Date","time","category","newFilteredData","forEach","push","mainCate","dataArr","dataTmp","length","reduce","acc","cur","price","hoverOffset","duration","map","Intl","DateTimeFormat","format","slice","numStartingDate","numEndingDate","sort","elementA","elementB","createDataArrMonth","createDataArrDay","checkboxNoChange","indexData","indexCurrentDate","currentAmount","currentLabel","i","includes","yearLabel","monthLabel","dayLabel","yearDate","monthData","dayData","today","createStandardLabelsArrHelper","incrementAmount","dayMonth","tmpDay","day","year","getFullYear","changeYear","getDate","setMonth","getMonth","setDate"],"mappings":";;;AAAA,SAASA,MAAT,EAAiBC,SAAjB,EAA4BC,UAA5B,QAA8C,OAA9C;AACA,OAAOC,kBAAP,MAA+B,oDAA/B;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,OAAOC,KAAP,MAAkB,eAAlB;;AAEA,MAAMC,UAAU,GAAG;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAAnB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAA;;AACxB,QAAMC,QAAQ,GAAGV,MAAM,CAAC,IAAD,CAAvB;AACA,QAAM;AAAEW,IAAAA;AAAF,MAAmBT,UAAU,CAACC,kBAAD,CAAnC,CAFwB,CAIxB;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMW,KAAK,GAAG,IAAIP,KAAJ,CAAUK,QAAQ,CAACG,OAAnB,EAA4BC,SAA5B,CAAd;AAEA,WAAO,SAASC,OAAT,GAAmB;AACxBH,MAAAA,KAAK,CAACI,OAAN;AACD,KAFD;AAGD,GANQ,EAMN,CAACP,KAAK,CAACQ,SAAP,CANM,CAAT;AAQA,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GAAI,IAAGuF,MAAM,CAACO,QAAP,KAAoB,CAAE,EAAlC,CAAhC,KACK9F,KAAK,GAAGuF,MAAM,CAACO,QAAP,KAAoB,CAA5B,CAf4B,CAiBjC;;AACA,QAAIH,UAAJ,EAAgB;AACdF,MAAAA,IAAI;AACJE,MAAAA,UAAU,GAAG,KAAb;AACD;;AACD,QAAIJ,MAAM,CAACO,QAAP,OAAsB,EAA1B,EAA8BH,UAAU,GAAG,IAAb;AAE9BpE,IAAAA,MAAM,CAACwB,IAAP,CAAa,GAAE0C,IAAK,IAAGzF,KAAM,IAAGwF,GAAI,EAApC;AACD;AACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { useRef, useEffect, useContext } from \"react\";\nimport ExpenseDataContext from \"../../../../store/expenseData/expenseData--context\";\nimport style from \"./ChartMain.module.css\";\nimport Chart from \"chart.js/auto\";\n\nconst dateOptObj = { month: \"short\" };\n\n// const data1 = {\n//   labels: [\"Red\", \"Blue\", \"Yellow\"],\n//   datasets: [\n//     {\n//       label: \"My First Dataset\",\n//       data: [300, 50, 100],\n//       backgroundColor: [\n//         \"rgb(255, 99, 132)\",\n//         \"rgb(54, 162, 235)\",\n//         \"rgb(255, 205, 86)\",\n//       ],\n//       hoverOffset: 4,\n//     },\n//   ],\n// };\n\n// const config1 = {\n//   type: \"doughnut\",\n//   data: data1,\n// };\n\nfunction ChartMain(props) {\n  const chartRef = useRef(null);\n  const { EXPENSE_DATA } = useContext(ExpenseDataContext);\n\n  // let configPPP;\n  // if (props.chartData.mainType === \"time\") {\n  //   let labels = [],\n  //     data = [];\n\n  //   const standardLabels = createStandardLabelsArr(\n  //     props.chartData.timeDuration,\n  //     props.chartData.startingDate\n  //   );\n\n  //   labels = createLabelsArr(standardLabels, props.chartData.timeDuration);\n\n  //   data = createDataArr(\n  //     standardLabels,\n  //     createFilteredData(standardLabels, EXPENSE_DATA),\n  //     props.chartData.timeDuration,\n  //     props.chartData.mainCategory,\n  //     props.chartData.subCategory\n  //   );\n\n  //   const dataObj = {\n  //     labels: labels,\n  //     datasets: [\n  //       {\n  //         label: \"\",\n  //         data: data,\n  //         backgroundColor: [\n  //           \"rgba(255, 99, 132, 0.2)\",\n  //           \"rgba(255, 159, 64, 0.2)\",\n  //           \"rgba(255, 205, 86, 0.2)\",\n  //           \"rgba(75, 192, 192, 0.2)\",\n  //           \"rgba(54, 162, 235, 0.2)\",\n  //           \"rgba(153, 102, 255, 0.2)\",\n  //           \"rgba(201, 203, 207, 0.2)\",\n  //         ],\n  //         borderColor: [\n  //           \"rgb(255, 99, 132)\",\n  //           \"rgb(255, 159, 64)\",\n  //           \"rgb(255, 205, 86)\",\n  //           \"rgb(75, 192, 192)\",\n  //           \"rgb(54, 162, 235)\",\n  //           \"rgb(153, 102, 255)\",\n  //           \"rgb(201, 203, 207)\",\n  //         ],\n  //         borderWidth: 1,\n  //       },\n  //     ],\n  //   };\n\n  //   const config = {\n  //     type: \"bar\",\n  //     data: dataObj,\n  //     options: {\n  //       scales: {\n  //         y: {\n  //           beginAtZero: true,\n  //         },\n  //       },\n  //     },\n  //   };\n\n  //   configPPP = config;\n  // } else {\n  //   const filteredData = EXPENSE_DATA.filter(\n  //     (element) =>\n  //       Number(new Date(element.time)) >=\n  //         Number(new Date(props.chartData.startingDate)) &&\n  //       Number(new Date(element.time)) <=\n  //         Number(new Date(props.chartData.endingDate)) &&\n  //       element.category === props.chartData.mainCategory\n  //   );\n\n  //   const labels = props.chartData.subCategory;\n  //   let newFilteredData = [];\n  //   labels.forEach((label) => {\n  //     newFilteredData.push(\n  //       filteredData.filter((data) => data.mainCate === label)\n  //     );\n  //   });\n\n  //   let dataArr = [];\n  //   newFilteredData.forEach((data) => {\n  //     let dataTmp;\n\n  //     if (data.length > 0) {\n  //       dataTmp = data.reduce((acc, cur) => (acc += Number(cur.price)), 0);\n  //     } else dataTmp = 0;\n\n  //     dataArr.push(dataTmp);\n  //   });\n\n  //   const data1 = {\n  //     labels: labels,\n  //     datasets: [\n  //       {\n  //         label: \"My First Dataset\",\n  //         data: dataArr,\n  //         backgroundColor: [\n  //           \"rgb(255, 99, 132)\",\n  //           \"rgb(255, 159, 64)\",\n  //           \"rgb(255, 205, 86)\",\n  //           \"rgb(75, 192, 192)\",\n  //           \"rgb(54, 162, 235)\",\n  //           \"rgb(153, 102, 255)\",\n  //           \"rgb(201, 203, 207)\",\n  //         ],\n  //         hoverOffset: 4,\n  //       },\n  //     ],\n  //   };\n\n  //   const config1 = {\n  //     type: \"doughnut\",\n  //     data: data1,\n  //   };\n\n  //   configPPP = config1;\n\n  //   // console.log(da);\n\n  //   // console.log(labels);\n  // }\n\n  useEffect(() => {\n    const chart = new Chart(chartRef.current, configPPP);\n\n    return function cleanUp() {\n      chart.destroy();\n    };\n  }, [props.chartData]);\n\n  let charClassName = \"chart--bar\";\n  if (props.chartData.mainType === \"category\") charClassName = \"chart--circle\";\n\n  return (\n    <div className={style.chartMain}>\n      <canvas className={style[charClassName]} ref={chartRef}></canvas>\n    </div>\n  );\n}\n\nexport default ChartMain;\n\nfunction createConfig(\n  mainType,\n  timeDuration,\n  startingDate,\n  endingDate,\n  expensData,\n  mainCategory,\n  subCategory\n) {\n  if (mainType === \"time\") {\n    const standardLabels = createStandardLabelsArr(timeDuration, startingDate);\n    const labels = createLabelsArr(standardLabels, timeDuration);\n    const data = createDataArr(\n      standardLabels,\n      createFilteredData(standardLabels, expensData),\n      timeDuration,\n      mainCategory,\n      subCategory\n    );\n\n    return {\n      type: \"bar\",\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: \"\",\n            data: data,\n            backgroundColor: [\n              \"rgba(255, 99, 132, 0.2)\",\n              \"rgba(255, 159, 64, 0.2)\",\n              \"rgba(255, 205, 86, 0.2)\",\n              \"rgba(75, 192, 192, 0.2)\",\n              \"rgba(54, 162, 235, 0.2)\",\n              \"rgba(153, 102, 255, 0.2)\",\n              \"rgba(201, 203, 207, 0.2)\",\n            ],\n            borderColor: [\n              \"rgb(255, 99, 132)\",\n              \"rgb(255, 159, 64)\",\n              \"rgb(255, 205, 86)\",\n              \"rgb(75, 192, 192)\",\n              \"rgb(54, 162, 235)\",\n              \"rgb(153, 102, 255)\",\n              \"rgb(201, 203, 207)\",\n            ],\n            borderWidth: 1,\n          },\n        ],\n      },\n      options: {\n        scales: {\n          y: {\n            beginAtZero: true,\n          },\n        },\n      },\n    };\n  } else {\n    const filteredData = expensData.filter(\n      (element) =>\n        Number(new Date(element.time)) >= Number(new Date(startingDate)) &&\n        Number(new Date(element.time)) <= Number(new Date(endingDate)) &&\n        element.category === mainCategory\n    );\n    const labels = subCategory;\n\n    let newFilteredData = [];\n\n    labels.forEach((label) => {\n      newFilteredData.push(\n        filteredData.filter((data) => data.mainCate === label)\n      );\n    });\n\n    let dataArr = [];\n    newFilteredData.forEach((data) => {\n      let dataTmp;\n\n      if (data.length > 0) {\n        dataTmp = data.reduce((acc, cur) => (acc += Number(cur.price)), 0);\n      } else dataTmp = 0;\n\n      dataArr.push(dataTmp);\n    });\n\n    return {\n      type: \"doughnut\",\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: \"My First Dataset\",\n            data: dataArr,\n            backgroundColor: [\n              \"rgb(255, 99, 132)\",\n              \"rgb(255, 159, 64)\",\n              \"rgb(255, 205, 86)\",\n              \"rgb(75, 192, 192)\",\n              \"rgb(54, 162, 235)\",\n              \"rgb(153, 102, 255)\",\n              \"rgb(201, 203, 207)\",\n            ],\n            hoverOffset: 4,\n          },\n        ],\n      },\n    };\n  }\n}\n\nfunction createLabelsArr(standardLabels, duration) {\n  if (duration === \"6\" || duration === \"12\") {\n    return standardLabels.map((label) =>\n      new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(new Date(label))\n    );\n  }\n\n  return standardLabels.map((label) => `${label.slice(5, 7)}${label.slice(8)}`);\n}\n\nfunction createFilteredData(standardLabels, expensData) {\n  const numStartingDate = Number(new Date(standardLabels[0]));\n  const numEndingDate = Number(\n    new Date(standardLabels[standardLabels.length - 1])\n  );\n\n  return expensData\n    .filter(\n      (element) =>\n        Number(new Date(element.time)) >= numStartingDate &&\n        Number(new Date(element.time)) <= numEndingDate\n    )\n    .sort(\n      (elementA, elementB) =>\n        Number(new Date(elementA.time)) - Number(new Date(elementB.time))\n    );\n}\n\nfunction createDataArr(\n  standardLabels,\n  filteredData,\n  timeDuration,\n  mainCategory,\n  subCategory\n) {\n  if (timeDuration === \"12\" || timeDuration === \"6\")\n    return createDataArrMonth(\n      standardLabels,\n      filteredData,\n      mainCategory,\n      subCategory\n    );\n  else\n    return createDataArrDay(\n      standardLabels,\n      filteredData,\n      mainCategory,\n      subCategory\n    );\n}\n\nfunction createDataArrDay(\n  standardLabels,\n  filteredData,\n  mainCategory,\n  subCategory\n) {\n  const data = [];\n  const checkboxNoChange =\n    (mainCategory === \"expense\" && subCategory.length === 6) ||\n    (mainCategory === \"income\" && subCategory.length === 3);\n  let indexData = 0;\n  let indexCurrentDate = true;\n  let currentAmount = 0;\n  let currentLabel;\n\n  for (let i = 0; i < standardLabels.length; i++) {\n    currentLabel = Number(new Date(standardLabels[i]));\n\n    while (indexCurrentDate) {\n      if (Number(new Date(filteredData[indexData]?.time)) <= currentLabel) {\n        if (filteredData[indexData].category === mainCategory) {\n          if (\n            checkboxNoChange ||\n            subCategory.includes(filteredData[indexData].mainCate)\n          )\n            currentAmount += Number(filteredData[indexData].price);\n        }\n\n        indexData++;\n      } else indexCurrentDate = false;\n    }\n\n    data.push(currentAmount);\n    currentAmount = 0;\n    indexCurrentDate = true;\n  }\n\n  return data;\n}\n\nfunction createDataArrMonth(\n  standardLabels,\n  filteredData,\n  mainCategory,\n  subCategory\n) {\n  const data = [];\n  const checkboxNoChange =\n    (mainCategory === \"expense\" && subCategory.length === 6) ||\n    (mainCategory === \"income\" && subCategory.length === 3);\n  let indexData = 0;\n  let indexCurrentDate = true;\n  let currentAmount = 0;\n  let yearLabel, monthLabel, dayLabel, yearDate, monthData, dayData;\n\n  for (let i = 0; i < standardLabels.length; i++) {\n    yearLabel = standardLabels[i].slice(0, 4);\n    monthLabel = standardLabels[i].slice(5, 7);\n    dayLabel = standardLabels[i].slice(8);\n\n    while (indexCurrentDate) {\n      yearDate = filteredData[indexData]?.time.slice(0, 4);\n      monthData = filteredData[indexData]?.time.slice(5, 7);\n      dayData = filteredData[indexData]?.time.slice(8);\n\n      if (yearLabel === yearDate && monthLabel === monthData) {\n        if (Number(dayLabel) <= Number(dayData) && 31 >= Number(dayData))\n          if (filteredData[indexData].category === mainCategory) {\n            if (\n              checkboxNoChange ||\n              subCategory.includes(filteredData[indexData].mainCate)\n            )\n              currentAmount += Number(filteredData[indexData].price);\n          }\n\n        indexData++;\n      } else indexCurrentDate = false;\n    }\n\n    data.push(currentAmount);\n    currentAmount = 0;\n    indexCurrentDate = true;\n  }\n\n  return data;\n}\n\nfunction createStandardLabelsArr(duration, startingDate) {\n  const today = new Date(startingDate);\n\n  let labels = [];\n\n  // one week\n  if (duration === \"7\") {\n    createStandardLabelsArrHelper(labels, 7, 1, \"day\", today);\n  }\n\n  if (duration === \"14\") {\n    createStandardLabelsArrHelper(labels, 14, 1, \"day\", today);\n  }\n\n  if (duration === \"30\") {\n    createStandardLabelsArrHelper(labels, 30, 1, \"day\", today);\n  }\n\n  if (duration === \"90\") {\n    createStandardLabelsArrHelper(labels, 30, 3, \"day\", today);\n  }\n\n  if (duration === \"6\") {\n    createStandardLabelsArrHelper(labels, 6, 1, \"month\", today);\n  }\n\n  if (duration === \"12\") {\n    createStandardLabelsArrHelper(labels, 12, 1, \"month\", today);\n  }\n\n  return labels;\n}\n\nfunction createStandardLabelsArrHelper(\n  labels,\n  duration,\n  incrementAmount,\n  dayMonth,\n  today\n) {\n  let tmpDay = today;\n  let day;\n  let month;\n  let year = today.getFullYear();\n  let changeYear = false;\n\n  // if it's increment by month, the day is never change\n  // we could put it outisde for-loop\n  if (dayMonth === \"month\") {\n    if (tmpDay.getDate() < 10) day = `0${tmpDay.getDate()}`;\n    else day = tmpDay.getDate();\n  }\n\n  for (let i = 0; i < duration; i++) {\n    // incremenet by month\n    if (dayMonth === \"month\")\n      tmpDay.setMonth(tmpDay.getMonth() + incrementAmount);\n\n    // increment by day\n    if (dayMonth === \"day\") {\n      tmpDay.setDate(tmpDay.getDate() + incrementAmount);\n\n      // day will change, so put this inside for-loop\n      if (tmpDay.getDate() < 10) day = `0${tmpDay.getDate()}`;\n      else day = tmpDay.getDate();\n    }\n\n    if (tmpDay.getMonth() + 1 < 10) month = `0${tmpDay.getMonth() + 1}`;\n    else month = tmpDay.getMonth() + 1;\n\n    // increment year\n    if (changeYear) {\n      year++;\n      changeYear = false;\n    }\n    if (tmpDay.getMonth() === 11) changeYear = true;\n\n    labels.push(`${year}-${month}-${day}`);\n  }\n}\n\n/*\n if (timeDuration === \"6\" || timeDuration === \"12\") {\n    if (mainCategory === \"income\" && subCategory.length === 3) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentMonth;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        // keep adding if it's still at current date(time)\n        while (indexCurrentDate) {\n          currentMonth = new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(\n            new Date(filteredData[indexData]?.time)\n          );\n          // check date(time)\n          if (currentMonth === labels1[indexLabel]) {\n            // check main category\n            if (filteredData[indexData].category === \"income\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n\n    if (mainCategory === \"expense\" && subCategory.length === 6) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentMonth;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        // keep adding if it's still at current date(time)\n        while (indexCurrentDate) {\n          console.log(filteredData);\n          if (!filteredData[indexData]?.time)\n            currentMonth = new Intl.DateTimeFormat(\"en-US\", dateOptObj).format(\n              new Date(filteredData[indexData]?.time)\n            );\n          console.log(currentMonth);\n\n          if (currentMonth === labels1[indexLabel]) {\n            // check main category\n            if (filteredData[indexData].category === \"income\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n  }\n  // day base\n  else {\n    if (mainCategory === \"income\" && subCategory.length === 3) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentDate;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        currentDate = `${year}-${labels[indexLabel].slice(0, 2)}-${labels[\n          indexLabel\n        ].slice(2)}`;\n\n        // keep adding if it's still at current date(time)\n        if (indexData < filteredData.length - 1) {\n          while (indexCurrentDate) {\n            // check date(time)\n            if (filteredData[indexData].time === currentDate) {\n              // check main category\n              if (filteredData[indexData].category === \"income\") {\n                currentAmount += Number(filteredData[indexData].price);\n              }\n\n              indexData++;\n            } else indexCurrentDate = false;\n          }\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n\n    if (mainCategory === \"expense\" && subCategory.length === 6) {\n      const labelsLength = labels.length;\n      let indexLabel = 0;\n      let indexData = 0;\n      let indexCurrentDate = true;\n      let currentDate;\n      let currentAmount = 0;\n\n      while (indexLabel < labelsLength) {\n        currentDate = `${year}-${labels[indexLabel].slice(0, 2)}-${labels[\n          indexLabel\n        ].slice(2)}`;\n\n        // keep adding if it's still at current date(time)\n\n        while (indexCurrentDate) {\n          // check date(time)\n          if (filteredData[indexData]?.time === currentDate) {\n            // check main category\n            if (filteredData[indexData].category === \"expense\") {\n              currentAmount += Number(filteredData[indexData].price);\n            }\n\n            indexData++;\n          } else indexCurrentDate = false;\n        }\n\n        data.push(currentAmount);\n\n        currentAmount = 0;\n        indexCurrentDate = true;\n        indexLabel++;\n      }\n    }\n  }\n*/\n"]},"metadata":{},"sourceType":"module"}