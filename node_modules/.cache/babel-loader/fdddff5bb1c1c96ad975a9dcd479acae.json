{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Calendar/CalendarTable/CreateCalendarTable.js\";\nimport { React } from \"react\";\nimport timeObj from \"../../../assets/timeObj/timeObj\";\nimport createYearMonthDay from \"../../../../Others/CreateYearMonthDay/createYearMonthDay\";\nimport coerceNumber from \"../../../../Others/CoerceNumber/coerceNumber\";\nimport mutipleArgsHelper from \"../../../../Others/MultipleArgsHelper/multipleArgsHelper\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport style from \"./CreateCalendarTable.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DATE = new Date();\nconst MONTH = DATE.getMonth();\nconst TODAY = DATE.getDate();\nconst YEAR = DATE.getFullYear();\nconst cacheObj = {};\n/*\n1. get the date having expense and income in current month (array)\n2. get the last date of current month (30 or 31)\n3. get the last date of previous month (30 or 31)\n4. get the last day of current month (1 ~ 7)\n5. get the first day of curret month (1 ~ 7)\n6. create the last couple days of previous month\n   => How to know exactly number of days?\n   => first day of current month\n   => For example, the first day of current month is friday(5)\n   => then the calendar of this month can show 5 days of previous month\n   => sun ~ thu shows the previous month, and fri and sat shows the curret month\n\n7. create the all of days in current month\n   => simply iterate through from 1 to last date of current month(2.)\n\n8. create the next couple days of next month\n   => How to know exactly number of days?\n   => 7 - last day of current month - 1\n   => For example, the last day of current month is MON\n   => then the calendar of this month can show 5 days of next month\n   => Sun and Mon is current month, Tue ~ Sat is next month\n*/\n\nfunction CreateCalendarTable(date, showModalHandler, expenseData) {\n  let key = date.getFullYear() + \"\" + (date.getMonth() + 1);\n\n  if (key.length < 6) {\n    key = date.getFullYear() + \"0\" + (date.getMonth() + 1);\n  }\n  /*\n  last day of current month\n  0 gives us the last day of previous month\n  + 1 makes to be last day fo current month\n  getDate gives us the number type\n  */\n\n\n  const lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n  const [curYear, curMonth] = createYearMonthDay(date);\n  const expenseDaySet = new Set();\n  const incomeDaySet = new Set();\n  expenseData.forEach(data => {\n    const [dataYear, dataMonth, dataDay] = coerceNumber(data.year, data.month, data.day);\n\n    if (curYear === dataYear && curMonth === dataMonth) {\n      if (data.category === \"expense\") expenseDaySet.add(dataDay);else if (data.category === \"income\") incomeDaySet.add(dataDay);\n    }\n  });\n  const expenseDayArr = Array.from(expenseDaySet).sort((a, b) => b - a);\n  const incomeDayArr = Array.from(incomeDaySet).sort((a, b) => b - a);\n  const curMonthData = [];\n\n  for (let i = 1; i <= lastDay; i++) {\n    const expenseIndex = i === expenseDayArr[expenseDayArr.length - 1];\n    const incomeIndex = i === incomeDayArr[incomeDayArr.length - 1];\n\n    if (expenseIndex && incomeIndex) {\n      curMonthData.push(\"both\");\n      expenseDayArr.pop();\n      incomeDayArr.pop();\n    } else if (expenseIndex && !incomeIndex) {\n      curMonthData.push(\"expense\");\n      expenseDayArr.pop();\n    } else if (incomeIndex && !expenseIndex) {\n      curMonthData.push(\"income\");\n      incomeDayArr.pop();\n    } else curMonthData.push(null);\n  }\n\n  const testRes = []; // day of previous month\n\n  for (let i = firstDayIndex; i > 0; i--) {\n    testRes.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.negative,\n      children: prevLastDay - i + 1\n    }, uuidv4(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this));\n  }\n\n  for (let i = 1; i <= lastDay; i++) {\n    if (date.getFullYear() === YEAR && date.getMonth() === MONTH && i === TODAY) {\n      testRes.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: showModalHandler,\n        className: current ? style.current : \"\",\n        \"data-id\": key + i,\n        children: [i, noDots || /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style[\"dot__container\"],\n          children: [dayExpense.includes(numberI) && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `${style[\"dot--blue\"]} ${style.dot}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }, this), dayIncome.includes(numberI) && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `${style[\"dot--pink\"]} ${style.dot}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)]\n      }, uuidv4(), true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this));\n    }\n  } // if (!cacheObj[key]) {\n  //   addCacheData(cacheObj, date, key, expenseData);\n  // }\n\n\n  const res = [];\n  const dayExpense = expenseData.filter(element => Number(element.time.slice(0, 4)) === date.getFullYear() && Number(element.time.slice(5, 7)) === date.getMonth() + 1 && element.category === \"expense\").map(element => Number(element.time.slice(8)));\n  const dayIncome = expenseData.filter(element => Number(element.time.slice(0, 4)) === date.getFullYear() && Number(element.time.slice(5, 7)) === date.getMonth() + 1 && element.category === \"income\").map(element => Number(element.time.slice(8))); // last day of previous month\n\n  const prevLastDay = new Date(date.getFullYear(), date.getMonth(), 0).getDate(); // last day of the week (current month)\n\n  const lastDayIndex = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDay(); // first day of the week (current month)\n\n  const firstDayIndex = new Date(date.getFullYear(), date.getMonth(), 1).getDay();\n  const nextDays = 7 - lastDayIndex - 1; // day of previous month\n\n  for (let i = firstDayIndex; i > 0; i--) {\n    res.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.negative,\n      children: prevLastDay - i + 1\n    }, uuidv4(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this));\n  } // day of current month\n\n\n  for (let i = 1; i <= lastDay; i++) {\n    // TODAY\n    if (date.getFullYear() === YEAR && date.getMonth() === MONTH && i === TODAY) {\n      res.push(checkDot(i >= 10 ? i + \"\" : \"0\" + i, true, dayExpense, dayIncome, showModalHandler, key));\n    } // other days\n    else res.push(checkDot(i >= 10 ? i + \"\" : \"0\" + i, false, dayExpense, dayIncome, showModalHandler, key));\n  } // day of next month\n\n\n  for (let i = 1; i <= nextDays; i++) {\n    res.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.negative,\n      children: i\n    }, uuidv4(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this));\n  }\n\n  return res;\n}\n\n_c = CreateCalendarTable;\nexport default CreateCalendarTable; ///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n\nfunction checkDot(i, current, dayExpense, dayIncome, showModalHandler, key) {\n  const numberI = Number(i);\n  const noDots = !(dayExpense.includes(numberI) || dayIncome.includes(numberI));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: showModalHandler,\n    className: current ? style.current : \"\",\n    \"data-id\": key + i,\n    children: [i, noDots || /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style[\"dot__container\"],\n      children: [dayExpense.includes(numberI) && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `${style[\"dot--blue\"]} ${style.dot}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 13\n      }, this), dayIncome.includes(numberI) && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `${style[\"dot--pink\"]} ${style.dot}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }, this)]\n  }, uuidv4(), true, {\n    fileName: _jsxFileName,\n    lineNumber: 249,\n    columnNumber: 5\n  }, this);\n}\n/*\nfunction addCacheData(cacheObj, date, key, expenseData) {\n  // each value in cache object is an array containing two arrays(day of expense and income)\n  cacheObj[key] = [];\n\n  const dayExpense = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"expense\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n\n  const dayIncome = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"income\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n\n  cacheObj[key].push(dayExpense);\n  cacheObj[key].push(dayIncome);\n}\n*/\n\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateCalendarTable\");","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Calendar/CalendarTable/CreateCalendarTable.js"],"names":["React","timeObj","createYearMonthDay","coerceNumber","mutipleArgsHelper","v4","uuidv4","style","DATE","Date","MONTH","getMonth","TODAY","getDate","YEAR","getFullYear","cacheObj","CreateCalendarTable","date","showModalHandler","expenseData","key","length","lastDay","curYear","curMonth","expenseDaySet","Set","incomeDaySet","forEach","data","dataYear","dataMonth","dataDay","year","month","day","category","add","expenseDayArr","Array","from","sort","a","b","incomeDayArr","curMonthData","i","expenseIndex","incomeIndex","push","pop","testRes","firstDayIndex","negative","prevLastDay","current","noDots","dayExpense","includes","numberI","dot","dayIncome","res","filter","element","Number","time","slice","map","lastDayIndex","getDay","nextDays","checkDot"],"mappings":"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","sourcesContent":["import { React } from \"react\";\nimport timeObj from \"../../../assets/timeObj/timeObj\";\nimport createYearMonthDay from \"../../../../Others/CreateYearMonthDay/createYearMonthDay\";\nimport coerceNumber from \"../../../../Others/CoerceNumber/coerceNumber\";\nimport mutipleArgsHelper from \"../../../../Others/MultipleArgsHelper/multipleArgsHelper\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport style from \"./CreateCalendarTable.module.css\";\n\nconst DATE = new Date();\nconst MONTH = DATE.getMonth();\nconst TODAY = DATE.getDate();\nconst YEAR = DATE.getFullYear();\n\nconst cacheObj = {};\n\n/*\n1. get the date having expense and income in current month (array)\n2. get the last date of current month (30 or 31)\n3. get the last date of previous month (30 or 31)\n4. get the last day of current month (1 ~ 7)\n5. get the first day of curret month (1 ~ 7)\n6. create the last couple days of previous month\n   => How to know exactly number of days?\n   => first day of current month\n   => For example, the first day of current month is friday(5)\n   => then the calendar of this month can show 5 days of previous month\n   => sun ~ thu shows the previous month, and fri and sat shows the curret month\n\n7. create the all of days in current month\n   => simply iterate through from 1 to last date of current month(2.)\n\n8. create the next couple days of next month\n   => How to know exactly number of days?\n   => 7 - last day of current month - 1\n   => For example, the last day of current month is MON\n   => then the calendar of this month can show 5 days of next month\n   => Sun and Mon is current month, Tue ~ Sat is next month\n*/\n\nfunction CreateCalendarTable(date, showModalHandler, expenseData) {\n  let key = date.getFullYear() + \"\" + (date.getMonth() + 1);\n  if (key.length < 6) {\n    key = date.getFullYear() + \"0\" + (date.getMonth() + 1);\n  }\n\n  /*\n  last day of current month\n  0 gives us the last day of previous month\n  + 1 makes to be last day fo current month\n  getDate gives us the number type\n  */\n  const lastDay = new Date(\n    date.getFullYear(),\n    date.getMonth() + 1,\n    0\n  ).getDate();\n\n  const [curYear, curMonth] = createYearMonthDay(date);\n\n  const expenseDaySet = new Set();\n  const incomeDaySet = new Set();\n\n  expenseData.forEach((data) => {\n    const [dataYear, dataMonth, dataDay] = coerceNumber(\n      data.year,\n      data.month,\n      data.day\n    );\n\n    if (curYear === dataYear && curMonth === dataMonth) {\n      if (data.category === \"expense\") expenseDaySet.add(dataDay);\n      else if (data.category === \"income\") incomeDaySet.add(dataDay);\n    }\n  });\n\n  const expenseDayArr = Array.from(expenseDaySet).sort((a, b) => b - a);\n  const incomeDayArr = Array.from(incomeDaySet).sort((a, b) => b - a);\n\n  const curMonthData = [];\n\n  for (let i = 1; i <= lastDay; i++) {\n    const expenseIndex = i === expenseDayArr[expenseDayArr.length - 1];\n    const incomeIndex = i === incomeDayArr[incomeDayArr.length - 1];\n\n    if (expenseIndex && incomeIndex) {\n      curMonthData.push(\"both\");\n      expenseDayArr.pop();\n      incomeDayArr.pop();\n    } else if (expenseIndex && !incomeIndex) {\n      curMonthData.push(\"expense\");\n      expenseDayArr.pop();\n    } else if (incomeIndex && !expenseIndex) {\n      curMonthData.push(\"income\");\n      incomeDayArr.pop();\n    } else curMonthData.push(null);\n  }\n\n  const testRes = [];\n\n  // day of previous month\n  for (let i = firstDayIndex; i > 0; i--) {\n    testRes.push(\n      <div className={style.negative} key={uuidv4()}>\n        {prevLastDay - i + 1}\n      </div>\n    );\n  }\n\n  for (let i = 1; i <= lastDay; i++) {\n    if (\n      date.getFullYear() === YEAR &&\n      date.getMonth() === MONTH &&\n      i === TODAY\n    ) {\n      testRes.push(\n        <div\n          onClick={showModalHandler}\n          className={current ? style.current : \"\"}\n          key={uuidv4()}\n          data-id={key + i}\n        >\n          {i}\n          {noDots || (\n            <div className={style[\"dot__container\"]}>\n              {dayExpense.includes(numberI) && (\n                <span className={`${style[\"dot--blue\"]} ${style.dot}`}></span>\n              )}\n              {dayIncome.includes(numberI) && (\n                <span className={`${style[\"dot--pink\"]} ${style.dot}`}></span>\n              )}\n            </div>\n          )}\n        </div>\n      );\n    }\n  }\n\n  // if (!cacheObj[key]) {\n  //   addCacheData(cacheObj, date, key, expenseData);\n  // }\n\n  const res = [];\n\n  const dayExpense = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"expense\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n\n  const dayIncome = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"income\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n\n  // last day of previous month\n  const prevLastDay = new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    0\n  ).getDate();\n\n  // last day of the week (current month)\n  const lastDayIndex = new Date(\n    date.getFullYear(),\n    date.getMonth() + 1,\n    0\n  ).getDay();\n\n  // first day of the week (current month)\n  const firstDayIndex = new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    1\n  ).getDay();\n\n  const nextDays = 7 - lastDayIndex - 1;\n\n  // day of previous month\n  for (let i = firstDayIndex; i > 0; i--) {\n    res.push(\n      <div className={style.negative} key={uuidv4()}>\n        {prevLastDay - i + 1}\n      </div>\n    );\n  }\n\n  // day of current month\n  for (let i = 1; i <= lastDay; i++) {\n    // TODAY\n    if (\n      date.getFullYear() === YEAR &&\n      date.getMonth() === MONTH &&\n      i === TODAY\n    ) {\n      res.push(\n        checkDot(\n          i >= 10 ? i + \"\" : \"0\" + i,\n          true,\n          dayExpense,\n          dayIncome,\n          showModalHandler,\n          key\n        )\n      );\n    }\n    // other days\n    else\n      res.push(\n        checkDot(\n          i >= 10 ? i + \"\" : \"0\" + i,\n          false,\n          dayExpense,\n          dayIncome,\n          showModalHandler,\n          key\n        )\n      );\n  }\n\n  // day of next month\n  for (let i = 1; i <= nextDays; i++) {\n    res.push(\n      <div className={style.negative} key={uuidv4()}>\n        {i}\n      </div>\n    );\n  }\n\n  return res;\n}\n\nexport default CreateCalendarTable;\n\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\nfunction checkDot(i, current, dayExpense, dayIncome, showModalHandler, key) {\n  const numberI = Number(i);\n  const noDots = !(dayExpense.includes(numberI) || dayIncome.includes(numberI));\n\n  return (\n    <div\n      onClick={showModalHandler}\n      className={current ? style.current : \"\"}\n      key={uuidv4()}\n      data-id={key + i}\n    >\n      {i}\n      {noDots || (\n        <div className={style[\"dot__container\"]}>\n          {dayExpense.includes(numberI) && (\n            <span className={`${style[\"dot--blue\"]} ${style.dot}`}></span>\n          )}\n          {dayIncome.includes(numberI) && (\n            <span className={`${style[\"dot--pink\"]} ${style.dot}`}></span>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\n/*\nfunction addCacheData(cacheObj, date, key, expenseData) {\n  // each value in cache object is an array containing two arrays(day of expense and income)\n  cacheObj[key] = [];\n\n  const dayExpense = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"expense\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n\n  const dayIncome = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"income\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n\n  cacheObj[key].push(dayExpense);\n  cacheObj[key].push(dayIncome);\n}\n*/\n"]},"metadata":{},"sourceType":"module"}