{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/project-expenseTracker-main/src/components/MainContent/Account/AccountSubSection/AccountSmallChart.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useEffect, useState, useContext } from \"react\";\nimport Title from \"../../../UI/Title/Title\";\nimport ExpenseDataContext from \"../../../../store/expenseData/expenseData--context\";\nimport Card from \"../../../UI/Card/Card\";\nimport Select from \"../../../UI/Select/Select\";\nimport style from \"./AccountSmallChart.module.css\";\nimport Chart from \"chart.js/auto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AccountSmallChart(props) {\n  _s();\n\n  const {\n    expenseData,\n    categoryExpense\n  } = useContext(ExpenseDataContext);\n  const [smallChart, setSmallChart] = useState(\"category\");\n  const chartRef = useRef(null);\n  const newFilteredExpenseData = expenseData.filter(element => element.category === \"expense\");\n  useEffect(() => {\n    const [labels, data] = createLabelData(smallChart, newFilteredExpenseData, categoryExpense);\n    const configBar = {\n      type: \"bar\",\n      data: {\n        labels,\n        datasets: [{\n          label: \"\",\n          data: data,\n          backgroundColor: [\"rgba(54, 162, 235, 0.2)\", \"rgb(255, 99, 132,0.2)\", \"rgb(255, 205, 86,0.2)\"],\n          borderColor: [\"rgb(54, 162, 235)\", \"rgb(255, 99, 132)\", \"rgb(255, 205, 86)\"],\n          borderWidth: 1,\n          pointBackgroundColor: [\"rgb(54, 162, 235)\"]\n        }]\n      },\n      options: {\n        indexAxis: \"y\"\n      }\n    };\n    const chart = new Chart(chartRef.current, configBar);\n    return function cleanUp() {\n      chart.destroy();\n    };\n  }, [smallChart]);\n\n  function selectChangeHandler(e) {\n    setSmallChart(e.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: style[\"chart__section\"],\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      className: style.title,\n      children: \"Chart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: selectChangeHandler,\n      className: style.select,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"category\",\n        children: \"which category expense the most\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"day\",\n        children: \"which day expense the most\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"month\",\n        children: \"which month expense the most\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style[\"chart__container\"],\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: chartRef,\n        height: \"200\",\n        width: \"auto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AccountSmallChart, \"WSrrR6YY0f2tf0Qpk/hEkS8+AHY=\");\n\n_c = AccountSmallChart;\nexport default AccountSmallChart;\n\nfunction createLabelData(type, expensData, categoryExpense) {\n  let labels, data;\n  if (type === \"category\") [labels, data] = createDataCategory(categoryExpense, expensData);\n  if (type === \"day\") [labels, data] = createDataDay(expensData);\n  if (type === \"month\") [labels, data] = createDataMonth(expensData);\n  return [labels, data];\n}\n\nfunction createDataCategory(categoryExpense, expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n\n  for (const key of Object.keys(categoryExpense)) {\n    const amount = createTotalAmount(expensData, \"mainCate\", key);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${key}`;\n      continue;\n    }\n\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${key}`;\n      continue;\n    }\n\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${key}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createDataDay(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const arr = [0, 1, 2, 3, 4, 5, 6];\n  const dayArr = [\"MON\", \"TUE\", \"WED\", \"THR\", \"FRI\", \"SUN\", \"SAT\"];\n\n  for (let i = 0; i < arr.length; i++) {\n    const amount = expensData.filter(data => new Date(data.time).getDay() === arr[i]).reduce((acc, cur) => acc + Number(cur.price), 0);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createDataMonth(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n  const dayArr = [\"JAN\", \"FEB\", \"MAR\", \"APR\", \"MAY\", \"JUN\", \"JUL\", \"AUG\", \"SEP\", \"OCT\", \"NOV\", \"DEC\"];\n\n  for (let i = 0; i < arr.length; i++) {\n    const amount = expensData.filter(data => new Date(data.time).getMonth() === arr[i]).reduce((acc, cur) => acc + Number(cur.price), 0);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createTotalAmount(expenseData, comparisonA, comparisonB) {\n  const newFilteredData = expenseData.filter(element => element[comparisonA] === comparisonB);\n  const totalAmount = newFilteredData.reduce((acc, cur) => acc + Number(cur.price), 0);\n  return totalAmount;\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountSmallChart\");","map":{"version":3,"sources":["/Users/eyo/Desktop/project-expenseTracker-main/src/components/MainContent/Account/AccountSubSection/AccountSmallChart.js"],"names":["useRef","useEffect","useState","useContext","Title","ExpenseDataContext","Card","Select","style","Chart","AccountSmallChart","props","expenseData","categoryExpense","smallChart","setSmallChart","chartRef","newFilteredExpenseData","filter","element","category","labels","data","createLabelData","configBar","type","datasets","label","backgroundColor","borderColor","borderWidth","pointBackgroundColor","options","indexAxis","chart","current","cleanUp","destroy","selectChangeHandler","e","target","value","title","select","expensData","createDataCategory","createDataDay","createDataMonth","key","Object","keys","amount","createTotalAmount","arr","dayArr","i","length","Date","time","getDay","reduce","acc","cur","Number","price","getMonth","comparisonA","comparisonB","newFilteredData","totalAmount"],"mappings":"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","sourcesContent":["import { useRef, useEffect, useState, useContext } from \"react\";\nimport Title from \"../../../UI/Title/Title\";\nimport ExpenseDataContext from \"../../../../store/expenseData/expenseData--context\";\nimport Card from \"../../../UI/Card/Card\";\nimport Select from \"../../../UI/Select/Select\";\nimport style from \"./AccountSmallChart.module.css\";\nimport Chart from \"chart.js/auto\";\n\nfunction AccountSmallChart(props) {\n  const { expenseData, categoryExpense } = useContext(ExpenseDataContext);\n  const [smallChart, setSmallChart] = useState(\"category\");\n  const chartRef = useRef(null);\n\n  const newFilteredExpenseData = expenseData.filter(\n    (element) => element.category === \"expense\"\n  );\n\n  useEffect(() => {\n    const [labels, data] = createLabelData(\n      smallChart,\n      newFilteredExpenseData,\n      categoryExpense\n    );\n\n    const configBar = {\n      type: \"bar\",\n      data: {\n        labels,\n        datasets: [\n          {\n            label: \"\",\n            data: data,\n            backgroundColor: [\n              \"rgba(54, 162, 235, 0.2)\",\n              \"rgb(255, 99, 132,0.2)\",\n              \"rgb(255, 205, 86,0.2)\",\n            ],\n            borderColor: [\n              \"rgb(54, 162, 235)\",\n              \"rgb(255, 99, 132)\",\n              \"rgb(255, 205, 86)\",\n            ],\n            borderWidth: 1,\n            pointBackgroundColor: [\"rgb(54, 162, 235)\"],\n          },\n        ],\n      },\n      options: {\n        indexAxis: \"y\",\n      },\n    };\n\n    const chart = new Chart(chartRef.current, configBar);\n\n    return function cleanUp() {\n      chart.destroy();\n    };\n  }, [smallChart]);\n\n  function selectChangeHandler(e) {\n    setSmallChart(e.target.value);\n  }\n\n  return (\n    <Card className={style[\"chart__section\"]}>\n      <Title className={style.title}>Chart</Title>\n      <select onChange={selectChangeHandler} className={style.select}>\n        <option value=\"category\">which category expense the most</option>\n        <option value=\"day\">which day expense the most</option>\n        <option value=\"month\">which month expense the most</option>\n      </select>\n      <div className={style[\"chart__container\"]}>\n        <canvas ref={chartRef} height=\"200\" width=\"auto\"></canvas>\n      </div>\n    </Card>\n  );\n}\n\nexport default AccountSmallChart;\n\nfunction createLabelData(type, expensData, categoryExpense) {\n  let labels, data;\n  if (type === \"category\")\n    [labels, data] = createDataCategory(categoryExpense, expensData);\n\n  if (type === \"day\") [labels, data] = createDataDay(expensData);\n\n  if (type === \"month\") [labels, data] = createDataMonth(expensData);\n\n  return [labels, data];\n}\n\nfunction createDataCategory(categoryExpense, expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  for (const key of Object.keys(categoryExpense)) {\n    const amount = createTotalAmount(expensData, \"mainCate\", key);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${key}`;\n      continue;\n    }\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${key}`;\n      continue;\n    }\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${key}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createDataDay(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const arr = [0, 1, 2, 3, 4, 5, 6];\n  const dayArr = [\"MON\", \"TUE\", \"WED\", \"THR\", \"FRI\", \"SUN\", \"SAT\"];\n\n  for (let i = 0; i < arr.length; i++) {\n    const amount = expensData\n      .filter((data) => new Date(data.time).getDay() === arr[i])\n      .reduce((acc, cur) => acc + Number(cur.price), 0);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createDataMonth(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n  const dayArr = [\n    \"JAN\",\n    \"FEB\",\n    \"MAR\",\n    \"APR\",\n    \"MAY\",\n    \"JUN\",\n    \"JUL\",\n    \"AUG\",\n    \"SEP\",\n    \"OCT\",\n    \"NOV\",\n    \"DEC\",\n  ];\n\n  for (let i = 0; i < arr.length; i++) {\n    const amount = expensData\n      .filter((data) => new Date(data.time).getMonth() === arr[i])\n      .reduce((acc, cur) => acc + Number(cur.price), 0);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createTotalAmount(expenseData, comparisonA, comparisonB) {\n  const newFilteredData = expenseData.filter(\n    (element) => element[comparisonA] === comparisonB\n  );\n\n  const totalAmount = newFilteredData.reduce(\n    (acc, cur) => acc + Number(cur.price),\n    0\n  );\n\n  return totalAmount;\n}\n"]},"metadata":{},"sourceType":"module"}