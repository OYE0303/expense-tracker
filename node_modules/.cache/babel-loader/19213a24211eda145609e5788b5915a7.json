{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Account/AccountSubSection/AccountSmallChart.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useEffect, useState, useContext } from \"react\";\nimport Title from \"../../../UI/Title/Title\";\nimport ExpenseDataContext from \"../../../../store/expenseData/expenseData--context\";\nimport Card from \"../../../UI/Card/Card\";\nimport Select from \"../../../UI/Select/Select\";\nimport style from \"./AccountSmallChart.module.css\";\nimport Chart from \"chart.js/auto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AccountSmallChart() {\n  _s();\n\n  const {\n    expenseData,\n    categoryExpense\n  } = useContext(ExpenseDataContext);\n  const [smallChartType, setSmallChartType] = useState(\"category\");\n  const chartRef = useRef(null);\n  const filteredData = expenseData.filter(element => element.category === \"expense\");\n  useEffect(() => {\n    const [labels, data] = createLabelData(smallChartType, filteredData, categoryExpense);\n    const configBar = {\n      type: \"bar\",\n      data: {\n        labels,\n        datasets: [{\n          label: \"\",\n          data: data,\n          backgroundColor: [\"rgba(54, 162, 235, 0.2)\", \"rgb(255, 99, 132,0.2)\", \"rgb(255, 205, 86,0.2)\"],\n          borderColor: [\"rgb(54, 162, 235)\", \"rgb(255, 99, 132)\", \"rgb(255, 205, 86)\"],\n          borderWidth: 1,\n          pointBackgroundColor: [\"rgb(54, 162, 235)\"]\n        }]\n      },\n      options: {\n        indexAxis: \"y\"\n      }\n    };\n    const chart = new Chart(chartRef.current, configBar);\n    return function cleanUp() {\n      chart.destroy();\n    };\n  }, [smallChartType, categoryExpense, filteredData]);\n\n  function selectChangeHandler(e) {\n    setSmallChartType(e.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: style[\"chart__section\"],\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      className: style.title,\n      children: \"Chart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Select, {\n      onChange: selectChangeHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"category\",\n        children: \"which category expense the most\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"day\",\n        children: \"which day expense the most\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"month\",\n        children: \"which month expense the most\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: chartRef,\n        height: \"200\",\n        width: \"auto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AccountSmallChart, \"MGiAXPBEC7wb8zC9WQg0U7198kE=\");\n\n_c = AccountSmallChart;\nexport default AccountSmallChart; // return labels and data according to diff type of chart\n\nfunction createLabelData(type, expensData, categoryExpense) {\n  let labels, data;\n  if (type === \"category\") [labels, data] = createDataCategory(expensData);\n  if (type === \"day\") [labels, data] = createDataDay(expensData);\n  if (type === \"month\") [labels, data] = createDataMonth(expensData);\n  return [labels, data];\n}\n\nfunction createDataCategory(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const cacheTable = {};\n  expensData.forEach(data => {\n    if (cacheTable[data.mainCate] !== undefined) {\n      cacheTable[data.mainCate] += Number(data.price);\n    } else cacheTable[data.mainCate] = Number(data.price);\n  });\n\n  for (const [label, value] of Object.entries(cacheTable)) {\n    // 1st value\n    if (value > data[0]) {\n      data[0] = value;\n      labels[0] = label;\n      continue;\n    } // 2nd value\n\n\n    if (value <= data[0] && value > data[1]) {\n      data[1] = value;\n      labels[1] = label;\n      continue;\n    } // 3rd value\n\n\n    if (value <= data[1] && value > data[2]) {\n      data[2] = value;\n      labels[2] = label;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createDataDay(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const arr = [0, 1, 2, 3, 4, 5, 6];\n  const dayArr = [\"MON\", \"TUE\", \"WED\", \"THR\", \"FRI\", \"SUN\", \"SAT\"];\n\n  for (let i = 0; i < arr.length; i++) {\n    const amount = expensData.filter(data => new Date(data.time).getDay() === arr[i]).reduce((acc, cur) => acc + Number(cur.price), 0);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createDataMonth(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n  const dayArr = [\"JAN\", \"FEB\", \"MAR\", \"APR\", \"MAY\", \"JUN\", \"JUL\", \"AUG\", \"SEP\", \"OCT\", \"NOV\", \"DEC\"];\n\n  for (let i = 0; i < arr.length; i++) {\n    const amount = expensData.filter(data => new Date(data.time).getMonth() === arr[i]).reduce((acc, cur) => acc + Number(cur.price), 0);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n/*\nfunction createDataCategory(categoryExpense, expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  for (const key of Object.keys(categoryExpense)) {\n    const amount = createTotalAmount(expensData, \"mainCate\", key);\n\n    // 1st amount\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${key}`;\n      continue;\n    }\n\n    // 2nd amount\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${key}`;\n      continue;\n    }\n\n    // 3rd amount\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${key}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createTotalAmount(expenseData, comparisonA, comparisonB) {\n  return expenseData\n    .filter((element) => element[comparisonA] === comparisonB)\n    .reduce((acc, cur) => acc + Number(cur.price), 0);\n}\n\n*/\n\n\nvar _c;\n\n$RefreshReg$(_c, \"AccountSmallChart\");","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Account/AccountSubSection/AccountSmallChart.js"],"names":["useRef","useEffect","useState","useContext","Title","ExpenseDataContext","Card","Select","style","Chart","AccountSmallChart","expenseData","categoryExpense","smallChartType","setSmallChartType","chartRef","filteredData","filter","element","category","labels","data","createLabelData","configBar","type","datasets","label","backgroundColor","borderColor","borderWidth","pointBackgroundColor","options","indexAxis","chart","current","cleanUp","destroy","selectChangeHandler","e","target","value","title","expensData","createDataCategory","createDataDay","createDataMonth","cacheTable","forEach","mainCate","undefined","Number","price","Object","entries","arr","dayArr","i","length","amount","Date","time","getDay","reduce","acc","cur","getMonth"],"mappings":"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","sourcesContent":["import { useRef, useEffect, useState, useContext } from \"react\";\nimport Title from \"../../../UI/Title/Title\";\nimport ExpenseDataContext from \"../../../../store/expenseData/expenseData--context\";\nimport Card from \"../../../UI/Card/Card\";\nimport Select from \"../../../UI/Select/Select\";\nimport style from \"./AccountSmallChart.module.css\";\nimport Chart from \"chart.js/auto\";\n\nfunction AccountSmallChart() {\n  const { expenseData, categoryExpense } = useContext(ExpenseDataContext);\n  const [smallChartType, setSmallChartType] = useState(\"category\");\n  const chartRef = useRef(null);\n\n  const filteredData = expenseData.filter(\n    (element) => element.category === \"expense\"\n  );\n\n  useEffect(() => {\n    const [labels, data] = createLabelData(\n      smallChartType,\n      filteredData,\n      categoryExpense\n    );\n\n    const configBar = {\n      type: \"bar\",\n      data: {\n        labels,\n        datasets: [\n          {\n            label: \"\",\n            data: data,\n            backgroundColor: [\n              \"rgba(54, 162, 235, 0.2)\",\n              \"rgb(255, 99, 132,0.2)\",\n              \"rgb(255, 205, 86,0.2)\",\n            ],\n            borderColor: [\n              \"rgb(54, 162, 235)\",\n              \"rgb(255, 99, 132)\",\n              \"rgb(255, 205, 86)\",\n            ],\n            borderWidth: 1,\n            pointBackgroundColor: [\"rgb(54, 162, 235)\"],\n          },\n        ],\n      },\n      options: {\n        indexAxis: \"y\",\n      },\n    };\n\n    const chart = new Chart(chartRef.current, configBar);\n\n    return function cleanUp() {\n      chart.destroy();\n    };\n  }, [smallChartType, categoryExpense, filteredData]);\n\n  function selectChangeHandler(e) {\n    setSmallChartType(e.target.value);\n  }\n\n  return (\n    <Card className={style[\"chart__section\"]}>\n      <Title className={style.title}>Chart</Title>\n      <Select onChange={selectChangeHandler}>\n        <option value=\"category\">which category expense the most</option>\n        <option value=\"day\">which day expense the most</option>\n        <option value=\"month\">which month expense the most</option>\n      </Select>\n      <div>\n        <canvas ref={chartRef} height=\"200\" width=\"auto\"></canvas>\n      </div>\n    </Card>\n  );\n}\n\nexport default AccountSmallChart;\n\n// return labels and data according to diff type of chart\nfunction createLabelData(type, expensData, categoryExpense) {\n  let labels, data;\n  if (type === \"category\") [labels, data] = createDataCategory(expensData);\n\n  if (type === \"day\") [labels, data] = createDataDay(expensData);\n\n  if (type === \"month\") [labels, data] = createDataMonth(expensData);\n\n  return [labels, data];\n}\n\nfunction createDataCategory(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const cacheTable = {};\n\n  expensData.forEach((data) => {\n    if (cacheTable[data.mainCate] !== undefined) {\n      cacheTable[data.mainCate] += Number(data.price);\n    } else cacheTable[data.mainCate] = Number(data.price);\n  });\n\n  for (const [label, value] of Object.entries(cacheTable)) {\n    // 1st value\n    if (value > data[0]) {\n      data[0] = value;\n      labels[0] = label;\n      continue;\n    }\n\n    // 2nd value\n    if (value <= data[0] && value > data[1]) {\n      data[1] = value;\n      labels[1] = label;\n      continue;\n    }\n\n    // 3rd value\n    if (value <= data[1] && value > data[2]) {\n      data[2] = value;\n      labels[2] = label;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createDataDay(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const arr = [0, 1, 2, 3, 4, 5, 6];\n  const dayArr = [\"MON\", \"TUE\", \"WED\", \"THR\", \"FRI\", \"SUN\", \"SAT\"];\n\n  for (let i = 0; i < arr.length; i++) {\n    const amount = expensData\n      .filter((data) => new Date(data.time).getDay() === arr[i])\n      .reduce((acc, cur) => acc + Number(cur.price), 0);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createDataMonth(expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  const arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n  const dayArr = [\n    \"JAN\",\n    \"FEB\",\n    \"MAR\",\n    \"APR\",\n    \"MAY\",\n    \"JUN\",\n    \"JUL\",\n    \"AUG\",\n    \"SEP\",\n    \"OCT\",\n    \"NOV\",\n    \"DEC\",\n  ];\n\n  for (let i = 0; i < arr.length; i++) {\n    const amount = expensData\n      .filter((data) => new Date(data.time).getMonth() === arr[i])\n      .reduce((acc, cur) => acc + Number(cur.price), 0);\n\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${dayArr[arr[i]]}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\n/*\nfunction createDataCategory(categoryExpense, expensData) {\n  const labels = [\"\", \"\", \"\"];\n  const data = [0, 0, 0];\n  for (const key of Object.keys(categoryExpense)) {\n    const amount = createTotalAmount(expensData, \"mainCate\", key);\n\n    // 1st amount\n    if (amount > data[0]) {\n      data[0] = amount;\n      labels[0] = `${key}`;\n      continue;\n    }\n\n    // 2nd amount\n    if (amount <= data[0] && amount > data[1]) {\n      data[1] = amount;\n      labels[1] = `${key}`;\n      continue;\n    }\n\n    // 3rd amount\n    if (amount <= data[1] && amount > data[2]) {\n      data[2] = amount;\n      labels[2] = `${key}`;\n      continue;\n    }\n  }\n\n  return [labels, data];\n}\n\nfunction createTotalAmount(expenseData, comparisonA, comparisonB) {\n  return expenseData\n    .filter((element) => element[comparisonA] === comparisonB)\n    .reduce((acc, cur) => acc + Number(cur.price), 0);\n}\n\n*/\n"]},"metadata":{},"sourceType":"module"}