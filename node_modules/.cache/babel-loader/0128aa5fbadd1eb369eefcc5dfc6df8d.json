{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/expense-tracker/src/components/UI/AddDataForm/AddDateForm.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useReducer } from \"react\";\nimport EditModalContext from \"../../../store/editModal/editModal--context\";\nimport Modal from \"../Modal/Modal\";\nimport useAddDataForm from \"../../../Others/Custom/useAddDataForm\";\nimport HorizontalLine from \"../HorizontalLine/HorizontalLine\";\nimport ExpenseDataContext from \"../../../store/expenseData/expenseData--context\";\nimport CategoryContext from \"../../../store/category/category--context\";\nimport createDateStringFormat from \"../../../Others/CreateDateStringFormat/CreateDateStringFormat\";\nimport FormBtn from \"./FormBtn\";\nimport FormPrice from \"./FormPrice\";\nimport FormDate from \"./FormDate\";\nimport FormDescription from \"./FormDescription\";\nimport FormSubCategory from \"./FormSubCategory\";\nimport FormMainCategory from \"./FormMainCategory\";\nimport FormTitle from \"./FormTitle\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport style from \"./AddDataForm.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"CATEGORY\":\n      {\n        let mainCategoryArr, subCategoryArr;\n        const categoryExpenseKeyArr = Object.keys(state.categoryExpense);\n        const categoryIncomeKeyArr = Object.keys(state.categoryIncome);\n        const firstCategoryExpense = Object.keys(state.categoryExpense)[0];\n        const firstCategoryIncome = Object.keys(state.categoryIncome)[0];\n        /*\n        Note that do NOT directly hard code \"food\" or \"salary\"\n        because user may add, remove, edit main and sub category\n        what we want is showing the first main category, and it's sub category\n        */\n\n        if (action.value === \"expense\") {\n          mainCategoryArr = categoryExpenseKeyArr;\n          subCategoryArr = state.categoryExpense[categoryExpenseKeyArr[0]];\n        } else {\n          mainCategoryArr = categoryIncomeKeyArr;\n          subCategoryArr = state.categoryIncome[categoryIncomeKeyArr[0]];\n        }\n\n        return { ...state,\n          category: action.value,\n          mainCategoryArr,\n          subCategoryArr,\n          mainCategory: action.value === \"expense\" ? firstCategoryExpense : firstCategoryIncome,\n          subCategory: action.value === \"expense\" ? state.categoryExpense[categoryExpenseKeyArr[0]][0] : state.categoryIncome[categoryIncomeKeyArr[0]][0],\n          icon: state.iconObj[action.value === \"expense\" ? firstCategoryExpense : firstCategoryIncome]\n        };\n      }\n\n    case \"MAIN_CATEGORY\":\n      {\n        let subCategoryArr;\n        if (state.category === \"expense\") subCategoryArr = state.categoryExpense[action.value];else subCategoryArr = state.categoryIncome[action.value];\n        return { ...state,\n          mainCategory: action.value,\n          subCategoryArr,\n          subCategory: subCategoryArr[0],\n          icon: state.iconObj[action.value]\n        };\n      }\n\n    case \"SUB_CATEGORY\":\n      {\n        return { ...state,\n          subCategory: action.value\n        };\n      }\n\n    case \"DESCRIPTION\":\n      {\n        return { ...state,\n          description: action.value\n        };\n      }\n\n    case \"DATE\":\n      {\n        return { ...state,\n          date: action.value\n        };\n      }\n\n    case \"PRICE\":\n      {\n        let isValid = false,\n            isTooLarge = false;\n        if (action.value.trim().length > 0 && !Object.is(-0, Number(action.value)) && Number(action.value) >= 0) isValid = true;\n        if (Number(action.value) > 1000000000000000) isTooLarge = true;\n        return { ...state,\n          isValid,\n          isTooLarge,\n          price: action.value\n        };\n      }\n\n    case \"PRICE--TOUCH\":\n      {\n        // it will always be true once user have selected or touched the price input\n        return { ...state,\n          priceTouch: true\n        };\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n\nfunction AddDataForm(props) {\n  _s();\n\n  const {\n    addExpenseData,\n    editExpenseData\n  } = useContext(ExpenseDataContext);\n  const [, setEditModal] = useContext(EditModalContext);\n  const {\n    categoryExpense,\n    categoryIncome,\n    iconObj\n  } = useContext(CategoryContext);\n  const mainCateExpenseArr = Object.keys(categoryExpense);\n  const mainCateIncomeArr = Object.keys(categoryIncome);\n  const [, addDataFormModalToggler] = useAddDataForm();\n  /*\n  the data storing in expenseDataProvider do NOT have\n  mainCategoryArr, subCategoryArr categoryExpense, categoryIncome, iconObj, priceTouch\n  but we need this data in the form, so add them\n  */\n\n  let initialObj;\n  if (props.oldExpenseData) initialObj = { ...props.oldExpenseData,\n    mainCategoryArr: props.oldExpenseData.category === \"expense\" ? mainCateExpenseArr : mainCateIncomeArr,\n    subCategoryArr: props.oldExpenseData.category === \"expense\" ? categoryExpense[props.oldExpenseData.mainCategory] : categoryIncome[props.oldExpenseData.mainCategory],\n    categoryExpense,\n    categoryIncome,\n    iconObj,\n    priceTouch: true\n  };else initialObj = {\n    category: \"expense\",\n    mainCategoryArr: mainCateExpenseArr,\n    subCategoryArr: categoryExpense[mainCateExpenseArr[0]],\n    mainCategory: mainCateExpenseArr[0],\n    subCategory: categoryExpense[mainCateExpenseArr[0]][0],\n    date: props.date === undefined ? createDateStringFormat(new Date()) : createDateStringFormat(new Date(props.date)),\n    description: \"\",\n    price: \"\",\n    priceTouch: false,\n    icon: iconObj[Object.keys(categoryExpense)[0]],\n    isValid: false,\n    isTooLarge: false,\n    iconObj,\n    categoryExpense,\n    categoryIncome\n  };\n  const [formData, formDataDispatch] = useReducer(reducer, initialObj);\n\n  function categoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"CATEGORY\",\n      value: e.target.value\n    });\n  }\n\n  function mainCategoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"MAIN_CATEGORY\",\n      value: e.target.value\n    });\n  }\n\n  function subCategoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"SUB_CATEGORY\",\n      value: e.target.value\n    });\n  }\n\n  function descriptionChangeHandler(e) {\n    formDataDispatch({\n      type: \"DESCRIPTION\",\n      value: e.target.value\n    });\n  }\n\n  function dateChangeHandler(e) {\n    formDataDispatch({\n      type: \"DATE\",\n      value: e.target.value\n    });\n  }\n\n  function priceChangeHandler(e) {\n    formDataDispatch({\n      type: \"PRICE\",\n      value: e.target.value\n    });\n  }\n\n  function inputPriceTouchHandler() {\n    // it will always be true until user select or touch the price input\n    formDataDispatch({\n      type: \"PRICE--TOUCH\"\n    });\n  }\n\n  function formSubmitHandler(e) {\n    e.preventDefault();\n    const newFormData = {\n      id: props.oldExpenseData ? props.oldExpenseData.id : uuidv4(),\n      category: formData.category,\n      mainCate: formData.mainCategory,\n      subCate: formData.subCategory,\n      time: formData.date,\n      description: formData.description,\n      price: Number(formData.price),\n      year: formData.date.slice(0, 4),\n      month: formData.date.slice(5, 7),\n      day: formData.date.slice(8, 10)\n    }; // if props.oldExpenseData exist, it means it's editing the old data\n\n    if (props.oldExpenseData) {\n      editExpenseData(newFormData);\n      setEditModal({\n        show: true,\n        type: \"data\",\n        value: \"edit\"\n      });\n    } // add new data\n    else {\n      addExpenseData(newFormData);\n      setEditModal({\n        show: true,\n        type: \"data\",\n        value: \"add\"\n      });\n    } // hide the more functionality after user edit the data\n\n\n    if (props.btnMoreToggler) props.btnMoreToggler();\n    props.addDataFormModalToggler();\n  }\n\n  function BackdropClickHandler(e) {\n    if (e.target.dataset.id === \"backdrop\") addDataFormModalToggler();\n  }\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    onClick: BackdropClickHandler,\n    classModal: style.modal,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: formSubmitHandler,\n      className: style.form,\n      children: [/*#__PURE__*/_jsxDEV(FormTitle, {\n        category: formData.category,\n        categoryChangeHandler: categoryChangeHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(HorizontalLine, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style[\"form__container\"],\n        children: [/*#__PURE__*/_jsxDEV(FormMainCategory, {\n          mainCategory: formData.mainCategory,\n          type: formData.category,\n          icon: formData.icon,\n          mainCategoryChangeHandler: mainCategoryChangeHandler,\n          mainCategoryArr: formData.mainCategoryArr,\n          edit: !(props.oldExpenseData === undefined)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormSubCategory, {\n          subCategoryChangeHandler: subCategoryChangeHandler,\n          subCategory: formData.subCategory,\n          subCategoryArr: formData.subCategoryArr,\n          edit: !(props.oldExpenseData === undefined)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormDescription, {\n          description: formData.description,\n          descriptionChangeHandler: descriptionChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormDate, {\n          date: formData.date,\n          dateChangeHandler: dateChangeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormPrice, {\n          price: formData.price,\n          priceTouch: formData.priceTouch,\n          isValid: formData.isValid,\n          isTooLarge: formData.isTooLarge,\n          priceChangeHandler: priceChangeHandler,\n          inputPriceTouchHandler: inputPriceTouchHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormBtn, {\n          addDataFormModalToggler: props.addDataFormModalToggler,\n          isValid: formData.isValid,\n          isTooLarge: formData.isTooLarge,\n          oldExpenseData: props.oldExpenseData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 263,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddDataForm, \"rM3EZmL17Bf2v6cNXtBCHyzaYTk=\", false, function () {\n  return [useAddDataForm];\n});\n\n_c = AddDataForm;\nexport default AddDataForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddDataForm\");","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/components/UI/AddDataForm/AddDateForm.js"],"names":["useContext","useReducer","EditModalContext","Modal","useAddDataForm","HorizontalLine","ExpenseDataContext","CategoryContext","createDateStringFormat","FormBtn","FormPrice","FormDate","FormDescription","FormSubCategory","FormMainCategory","FormTitle","v4","uuidv4","style","reducer","state","action","type","mainCategoryArr","subCategoryArr","categoryExpenseKeyArr","Object","keys","categoryExpense","categoryIncomeKeyArr","categoryIncome","firstCategoryExpense","firstCategoryIncome","value","category","mainCategory","subCategory","icon","iconObj","description","date","isValid","isTooLarge","trim","length","is","Number","price","priceTouch","AddDataForm","props","addExpenseData","editExpenseData","setEditModal","mainCateExpenseArr","mainCateIncomeArr","addDataFormModalToggler","initialObj","oldExpenseData","undefined","Date","formData","formDataDispatch","categoryChangeHandler","e","target","mainCategoryChangeHandler","subCategoryChangeHandler","descriptionChangeHandler","dateChangeHandler","priceChangeHandler","inputPriceTouchHandler","formSubmitHandler","preventDefault","newFormData","id","mainCate","subCate","time","year","slice","month","day","show","btnMoreToggler","BackdropClickHandler","dataset","modal","form"],"mappings":"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","sourcesContent":["import { useContext, useReducer } from \"react\";\nimport EditModalContext from \"../../../store/editModal/editModal--context\";\nimport Modal from \"../Modal/Modal\";\nimport useAddDataForm from \"../../../Others/Custom/useAddDataForm\";\nimport HorizontalLine from \"../HorizontalLine/HorizontalLine\";\nimport ExpenseDataContext from \"../../../store/expenseData/expenseData--context\";\nimport CategoryContext from \"../../../store/category/category--context\";\nimport createDateStringFormat from \"../../../Others/CreateDateStringFormat/CreateDateStringFormat\";\nimport FormBtn from \"./FormBtn\";\nimport FormPrice from \"./FormPrice\";\nimport FormDate from \"./FormDate\";\nimport FormDescription from \"./FormDescription\";\nimport FormSubCategory from \"./FormSubCategory\";\nimport FormMainCategory from \"./FormMainCategory\";\nimport FormTitle from \"./FormTitle\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport style from \"./AddDataForm.module.css\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"CATEGORY\": {\n      let mainCategoryArr, subCategoryArr;\n      const categoryExpenseKeyArr = Object.keys(state.categoryExpense);\n      const categoryIncomeKeyArr = Object.keys(state.categoryIncome);\n      const firstCategoryExpense = Object.keys(state.categoryExpense)[0];\n      const firstCategoryIncome = Object.keys(state.categoryIncome)[0];\n\n      /*\n      Note that do NOT directly hard code \"food\" or \"salary\"\n      because user may add, remove, edit main and sub category\n      what we want is showing the first main category, and it's sub category\n      */\n      if (action.value === \"expense\") {\n        mainCategoryArr = categoryExpenseKeyArr;\n        subCategoryArr = state.categoryExpense[categoryExpenseKeyArr[0]];\n      } else {\n        mainCategoryArr = categoryIncomeKeyArr;\n        subCategoryArr = state.categoryIncome[categoryIncomeKeyArr[0]];\n      }\n\n      return {\n        ...state,\n        category: action.value,\n        mainCategoryArr,\n        subCategoryArr,\n        mainCategory:\n          action.value === \"expense\"\n            ? firstCategoryExpense\n            : firstCategoryIncome,\n        subCategory:\n          action.value === \"expense\"\n            ? state.categoryExpense[categoryExpenseKeyArr[0]][0]\n            : state.categoryIncome[categoryIncomeKeyArr[0]][0],\n        icon: state.iconObj[\n          action.value === \"expense\"\n            ? firstCategoryExpense\n            : firstCategoryIncome\n        ],\n      };\n    }\n\n    case \"MAIN_CATEGORY\": {\n      let subCategoryArr;\n\n      if (state.category === \"expense\")\n        subCategoryArr = state.categoryExpense[action.value];\n      else subCategoryArr = state.categoryIncome[action.value];\n\n      return {\n        ...state,\n        mainCategory: action.value,\n        subCategoryArr,\n        subCategory: subCategoryArr[0],\n        icon: state.iconObj[action.value],\n      };\n    }\n\n    case \"SUB_CATEGORY\": {\n      return { ...state, subCategory: action.value };\n    }\n\n    case \"DESCRIPTION\": {\n      return { ...state, description: action.value };\n    }\n\n    case \"DATE\": {\n      return { ...state, date: action.value };\n    }\n\n    case \"PRICE\": {\n      let isValid = false,\n        isTooLarge = false;\n      if (\n        action.value.trim().length > 0 &&\n        !Object.is(-0, Number(action.value)) &&\n        Number(action.value) >= 0\n      )\n        isValid = true;\n\n      if (Number(action.value) > 1000000000000000) isTooLarge = true;\n\n      return { ...state, isValid, isTooLarge, price: action.value };\n    }\n\n    case \"PRICE--TOUCH\": {\n      // it will always be true once user have selected or touched the price input\n      return { ...state, priceTouch: true };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n\nfunction AddDataForm(props) {\n  const { addExpenseData, editExpenseData } = useContext(ExpenseDataContext);\n  const [, setEditModal] = useContext(EditModalContext);\n  const { categoryExpense, categoryIncome, iconObj } =\n    useContext(CategoryContext);\n  const mainCateExpenseArr = Object.keys(categoryExpense);\n  const mainCateIncomeArr = Object.keys(categoryIncome);\n  const [, addDataFormModalToggler] = useAddDataForm();\n\n  /*\n  the data storing in expenseDataProvider do NOT have\n  mainCategoryArr, subCategoryArr categoryExpense, categoryIncome, iconObj, priceTouch\n  but we need this data in the form, so add them\n  */\n  let initialObj;\n  if (props.oldExpenseData)\n    initialObj = {\n      ...props.oldExpenseData,\n      mainCategoryArr:\n        props.oldExpenseData.category === \"expense\"\n          ? mainCateExpenseArr\n          : mainCateIncomeArr,\n      subCategoryArr:\n        props.oldExpenseData.category === \"expense\"\n          ? categoryExpense[props.oldExpenseData.mainCategory]\n          : categoryIncome[props.oldExpenseData.mainCategory],\n      categoryExpense,\n      categoryIncome,\n      iconObj,\n      priceTouch: true,\n    };\n  else\n    initialObj = {\n      category: \"expense\",\n      mainCategoryArr: mainCateExpenseArr,\n      subCategoryArr: categoryExpense[mainCateExpenseArr[0]],\n      mainCategory: mainCateExpenseArr[0],\n      subCategory: categoryExpense[mainCateExpenseArr[0]][0],\n      date:\n        props.date === undefined\n          ? createDateStringFormat(new Date())\n          : createDateStringFormat(new Date(props.date)),\n      description: \"\",\n      price: \"\",\n      priceTouch: false,\n      icon: iconObj[Object.keys(categoryExpense)[0]],\n      isValid: false,\n      isTooLarge: false,\n      iconObj,\n      categoryExpense,\n      categoryIncome,\n    };\n\n  const [formData, formDataDispatch] = useReducer(reducer, initialObj);\n\n  function categoryChangeHandler(e) {\n    formDataDispatch({ type: \"CATEGORY\", value: e.target.value });\n  }\n\n  function mainCategoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"MAIN_CATEGORY\",\n      value: e.target.value,\n    });\n  }\n\n  function subCategoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"SUB_CATEGORY\",\n      value: e.target.value,\n    });\n  }\n\n  function descriptionChangeHandler(e) {\n    formDataDispatch({\n      type: \"DESCRIPTION\",\n      value: e.target.value,\n    });\n  }\n\n  function dateChangeHandler(e) {\n    formDataDispatch({\n      type: \"DATE\",\n      value: e.target.value,\n    });\n  }\n\n  function priceChangeHandler(e) {\n    formDataDispatch({\n      type: \"PRICE\",\n      value: e.target.value,\n    });\n  }\n\n  function inputPriceTouchHandler() {\n    // it will always be true until user select or touch the price input\n    formDataDispatch({\n      type: \"PRICE--TOUCH\",\n    });\n  }\n\n  function formSubmitHandler(e) {\n    e.preventDefault();\n\n    const newFormData = {\n      id: props.oldExpenseData ? props.oldExpenseData.id : uuidv4(),\n      category: formData.category,\n      mainCate: formData.mainCategory,\n      subCate: formData.subCategory,\n      time: formData.date,\n      description: formData.description,\n      price: Number(formData.price),\n      year: formData.date.slice(0, 4),\n      month: formData.date.slice(5, 7),\n      day: formData.date.slice(8, 10),\n    };\n\n    // if props.oldExpenseData exist, it means it's editing the old data\n    if (props.oldExpenseData) {\n      editExpenseData(newFormData);\n      setEditModal({\n        show: true,\n        type: \"data\",\n        value: \"edit\",\n      });\n    }\n    // add new data\n    else {\n      addExpenseData(newFormData);\n      setEditModal({\n        show: true,\n        type: \"data\",\n        value: \"add\",\n      });\n    }\n\n    // hide the more functionality after user edit the data\n    if (props.btnMoreToggler) props.btnMoreToggler();\n\n    props.addDataFormModalToggler();\n  }\n\n  function BackdropClickHandler(e) {\n    if (e.target.dataset.id === \"backdrop\") addDataFormModalToggler();\n  }\n\n  return (\n    <Modal onClick={BackdropClickHandler} classModal={style.modal}>\n      <form onSubmit={formSubmitHandler} className={style.form}>\n        <FormTitle\n          category={formData.category}\n          categoryChangeHandler={categoryChangeHandler}\n        />\n\n        <HorizontalLine />\n        <div className={style[\"form__container\"]}>\n          <FormMainCategory\n            mainCategory={formData.mainCategory}\n            type={formData.category}\n            icon={formData.icon}\n            mainCategoryChangeHandler={mainCategoryChangeHandler}\n            mainCategoryArr={formData.mainCategoryArr}\n            edit={!(props.oldExpenseData === undefined)}\n          />\n\n          <FormSubCategory\n            subCategoryChangeHandler={subCategoryChangeHandler}\n            subCategory={formData.subCategory}\n            subCategoryArr={formData.subCategoryArr}\n            edit={!(props.oldExpenseData === undefined)}\n          />\n\n          <FormDescription\n            description={formData.description}\n            descriptionChangeHandler={descriptionChangeHandler}\n          />\n\n          <FormDate\n            date={formData.date}\n            dateChangeHandler={dateChangeHandler}\n          />\n\n          <FormPrice\n            price={formData.price}\n            priceTouch={formData.priceTouch}\n            isValid={formData.isValid}\n            isTooLarge={formData.isTooLarge}\n            priceChangeHandler={priceChangeHandler}\n            inputPriceTouchHandler={inputPriceTouchHandler}\n          />\n\n          <FormBtn\n            addDataFormModalToggler={props.addDataFormModalToggler}\n            isValid={formData.isValid}\n            isTooLarge={formData.isTooLarge}\n            oldExpenseData={props.oldExpenseData}\n          />\n        </div>\n      </form>\n    </Modal>\n  );\n}\n\nexport default AddDataForm;\n"]},"metadata":{},"sourceType":"module"}