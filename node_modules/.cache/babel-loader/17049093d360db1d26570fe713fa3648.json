{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Calendar/CalendarTable/CreateCalendarTable.js\";\nimport { React } from \"react\";\nimport timeObj from \"../../../assets/timeObj/timeObj\";\nimport createYearMonthDay from \"../../../../Others/CreateYearMonthDay/createYearMonthDay\";\nimport coerceNumber from \"../../../../Others/CoerceNumber/coerceNumber\";\nimport CalendarCell from \"./CalendarCell\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  YEAR: year,\n  MONTH: month,\n  DAY: today\n} = timeObj;\nconst [YEAR, MONTH, TODAY] = coerceNumber(year, month, today);\n\nfunction CreateCalendarTable(date, showExpenseListModalHandler, expenseData) {\n  const [dataYear, dataMonth] = createYearMonthDay(date);\n  let key = String(dataYear);\n  if (dataMonth >= 10) key += `-${String(dataMonth)}`;else key += `-0${String(dataMonth)}`;\n  const [lastOfCurMonthDate, lastOfPrevMonthDate, firstOfCurMonthDay, daysOfNextMonth] = createCalendarPreData(date);\n  const curMonthData = createMonthData(date, expenseData, lastOfPrevMonthDate);\n  const res = []; // day of previous month\n\n  for (let i = firstOfCurMonthDay; i > 0; i--) {\n    res.push( /*#__PURE__*/_jsxDEV(CalendarCell, {\n      curMonthIndex: false,\n      children: lastOfPrevMonthDate - i + 1\n    }, uuidv4(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this));\n  } // put this outside, so that don't need to keep calling the same method along with the iteration\n\n\n  const curretYearMonth = date.getFullYear() === YEAR && date.getMonth() + 1 === MONTH; // day of current month\n\n  for (let i = 1; i <= lastOfCurMonthDate; i++) {\n    const todayIndex = curretYearMonth && i === TODAY;\n    const indexID = i >= 10 ? i + \"\" : \"0\" + i;\n    res.push( /*#__PURE__*/_jsxDEV(CalendarCell, {\n      dataID: key + \"-\" + indexID,\n      curMonthIndex: true,\n      onClick: showExpenseListModalHandler,\n      todayIndex: todayIndex,\n      expenseIndex: curMonthData[i - 1] === \"expense\",\n      incomeIndex: curMonthData[i - 1] === \"income\",\n      bothIndex: curMonthData[i - 1] === \"both\",\n      children: i\n    }, uuidv4(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this));\n  } // day of next month\n\n\n  for (let i = 1; i <= daysOfNextMonth; i++) {\n    res.push( /*#__PURE__*/_jsxDEV(CalendarCell, {\n      curMonthIndex: false,\n      children: i\n    }, uuidv4(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this));\n  }\n\n  return res;\n}\n\n_c = CreateCalendarTable;\nexport default CreateCalendarTable;\n\nfunction createCalendarPreData(date) {\n  const lastDayOfCurMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n  const lastDayOfPrevMonth = new Date(date.getFullYear(), date.getMonth(), 0);\n  const firstDayOfCurMonth = new Date(date.getFullYear(), date.getMonth(), 1);\n  const lastOfCurMonthDate = lastDayOfCurMonth.getDate();\n  const lastOfCurMonthDay = lastDayOfCurMonth.getDay();\n  const lastOfPrevMonthDate = lastDayOfPrevMonth.getDate();\n  const firstOfCurMonthDay = firstDayOfCurMonth.getDay();\n  const daysOfNextMonth = 7 - lastOfCurMonthDay - 1;\n  return [lastOfCurMonthDate, lastOfPrevMonthDate, firstOfCurMonthDay, daysOfNextMonth];\n}\n\nfunction createMonthData(date, expenseData, lastOfCurMonthDate) {\n  const [curYear, curMonth] = createYearMonthDay(date);\n  /*\n  use Set to avoid duplicate value(date)\n  both separately store the day of having expense and income\n  */\n\n  const expenseDaySet = new Set();\n  const incomeDaySet = new Set();\n  expenseData.forEach(data => {\n    const [dataYear, dataMonth, dataDay] = coerceNumber(data.year, data.month, data.day); // only store the data of current month\n\n    if (curYear === dataYear && curMonth === dataMonth) {\n      if (data.category === \"expense\") expenseDaySet.add(dataDay);else if (data.category === \"income\") incomeDaySet.add(dataDay);\n    }\n  }); // sort to descending order, later need to remove the element from small value\n\n  const expenseDayArr = Array.from(expenseDaySet).sort((a, b) => b - a);\n  const incomeDayArr = Array.from(incomeDaySet).sort((a, b) => b - a);\n  const curMonthData = [];\n  /*\n  iterate through from 1 ~ 30 or 31\n  for example\n  if day 5 in the expenseDayArr, add \"expense\" to curMonthData\n  then remove 5 from the expenseDayArr\n  we sort the array first above, so that now we can use .pop() here\n  */\n\n  for (let i = 1; i <= lastOfCurMonthDate; i++) {\n    const expenseIndex = i === expenseDayArr[expenseDayArr.length - 1];\n    const incomeIndex = i === incomeDayArr[incomeDayArr.length - 1];\n\n    if (expenseIndex && incomeIndex) {\n      curMonthData.push(\"both\");\n      expenseDayArr.pop();\n      incomeDayArr.pop();\n    } else if (expenseIndex && !incomeIndex) {\n      curMonthData.push(\"expense\");\n      expenseDayArr.pop();\n    } else if (incomeIndex && !expenseIndex) {\n      curMonthData.push(\"income\");\n      incomeDayArr.pop();\n    } else curMonthData.push(null);\n  }\n\n  return curMonthData;\n}\n/*\n1. get the date having expense and income in current month (array)\n2. get the last date of current month (30 or 31)\n3. get the last date of previous month (30 or 31)\n4. get the last day of current month (1 ~ 7)\n5. get the first day of curret month (1 ~ 7)\n6. create the last couple days of previous month\n   => How to know exactly number of days?\n   => first day of current month\n   => For example, the first day of current month is friday(5)\n   => then the calendar of this month can show 5 days of previous month\n   => sun ~ thu shows the previous month, and fri and sat shows the curret month\n\n7. create the all of days in current month\n   => simply iterate through from 1 to last date of current month(2.)\n\n8. create the next couple days of next month\n   => How to know exactly number of days?\n   => 7 - last day of current month - 1\n   => For example, the last day of current month is MON\n   => then the calendar of this month can show 5 days of next month\n   => Sun and Mon is current month, Tue ~ Sat is next month\n*/\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n// const DATE = new Date();\n// const MONTH = DATE.getMonth();\n// const TODAY = DATE.getDate();\n// const YEAR = DATE.getFullYear();\n// const cacheObj = {};\n// function CreateCalendarTable(date, showModalHandler, expenseData) {\n//   let key = date.getFullYear() + \"\" + (date.getMonth() + 1);\n//   if (key.length < 6) {\n//     key = date.getFullYear() + \"0\" + (date.getMonth() + 1);\n//   }\n//   // if (!cacheObj[key]) {\n//   //   addCacheData(cacheObj, date, key, expenseData);\n//   // }\n//   const res = [];\n//   const dayExpense = expenseData\n//     .filter(\n//       (element) =>\n//         Number(element.time.slice(0, 4)) === date.getFullYear() &&\n//         Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n//         element.category === \"expense\"\n//     )\n//     .map((element) => Number(element.time.slice(8)));\n//   const dayIncome = expenseData\n//     .filter(\n//       (element) =>\n//         Number(element.time.slice(0, 4)) === date.getFullYear() &&\n//         Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n//         element.category === \"income\"\n//     )\n//     .map((element) => Number(element.time.slice(8)));\n//   /*\n//   last day of current month\n//   0 gives us the last day of previous month\n//   + 1 makes to be last day fo current month\n//   getDate gives us the number type\n//   */\n//   const lastDay = new Date(\n//     date.getFullYear(),\n//     date.getMonth() + 1,\n//     0\n//   ).getDate();\n//   // last day of previous month\n//   const prevLastDay = new Date(\n//     date.getFullYear(),\n//     date.getMonth(),\n//     0\n//   ).getDate();\n//   // last day of the week (current month)\n//   const lastDayIndex = new Date(\n//     date.getFullYear(),\n//     date.getMonth() + 1,\n//     0\n//   ).getDay();\n//   // first day of the week (current month)\n//   const firstDayIndex = new Date(\n//     date.getFullYear(),\n//     date.getMonth(),\n//     1\n//   ).getDay();\n//   const nextDays = 7 - lastDayIndex - 1;\n//   // day of previous month\n//   for (let i = firstDayIndex; i > 0; i--) {\n//     res.push(\n//       <div className={style.negative} key={uuidv4()}>\n//         {prevLastDay - i + 1}\n//       </div>\n//     );\n//   }\n//   // day of current month\n//   for (let i = 1; i <= lastDay; i++) {\n//     // TODAY\n//     if (\n//       date.getFullYear() === YEAR &&\n//       date.getMonth() === MONTH &&\n//       i === TODAY\n//     ) {\n//       res.push(\n//         checkDot(\n//           i >= 10 ? i + \"\" : \"0\" + i,\n//           true,\n//           dayExpense,\n//           dayIncome,\n//           showModalHandler,\n//           key\n//         )\n//       );\n//     }\n//     // other days\n//     else\n//       res.push(\n//         checkDot(\n//           i >= 10 ? i + \"\" : \"0\" + i,\n//           false,\n//           dayExpense,\n//           dayIncome,\n//           showModalHandler,\n//           key\n//         )\n//       );\n//   }\n//   // day of next month\n//   for (let i = 1; i <= nextDays; i++) {\n//     res.push(\n//       <div className={style.negative} key={uuidv4()}>\n//         {i}\n//       </div>\n//     );\n//   }\n//   return res;\n// }\n// export default CreateCalendarTable;\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n// function checkDot(i, current, dayExpense, dayIncome, showModalHandler, key) {\n//   const numberI = Number(i);\n//   const noDots = !(dayExpense.includes(numberI) || dayIncome.includes(numberI));\n//   return (\n//     <div\n//       onClick={showModalHandler}\n//       className={current ? style.current : \"\"}\n//       key={uuidv4()}\n//       data-id={key + i}\n//     >\n//       {i}\n//       {noDots || (\n//         <div className={style[\"dot__container\"]}>\n//           {dayExpense.includes(numberI) && (\n//             <span className={`${style[\"dot--blue\"]} ${style.dot}`}></span>\n//           )}\n//           {dayIncome.includes(numberI) && (\n//             <span className={`${style[\"dot--pink\"]} ${style.dot}`}></span>\n//           )}\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n/*\nfunction addCacheData(cacheObj, date, key, expenseData) {\n  // each value in cache object is an array containing two arrays(day of expense and income)\n  cacheObj[key] = [];\n  const dayExpense = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"expense\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n  const dayIncome = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"income\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n  cacheObj[key].push(dayExpense);\n  cacheObj[key].push(dayIncome);\n}\n*/\n\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateCalendarTable\");","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Calendar/CalendarTable/CreateCalendarTable.js"],"names":["React","timeObj","createYearMonthDay","coerceNumber","CalendarCell","v4","uuidv4","YEAR","year","MONTH","month","DAY","today","TODAY","CreateCalendarTable","date","showExpenseListModalHandler","expenseData","dataYear","dataMonth","key","String","lastOfCurMonthDate","lastOfPrevMonthDate","firstOfCurMonthDay","daysOfNextMonth","createCalendarPreData","curMonthData","createMonthData","res","i","push","curretYearMonth","getFullYear","getMonth","todayIndex","indexID","lastDayOfCurMonth","Date","lastDayOfPrevMonth","firstDayOfCurMonth","getDate","lastOfCurMonthDay","getDay","curYear","curMonth","expenseDaySet","Set","incomeDaySet","forEach","data","dataDay","day","category","add","expenseDayArr","Array","from","sort","a","b","incomeDayArr","expenseIndex","length","incomeIndex","pop"],"mappings":"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;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { React } from \"react\";\nimport timeObj from \"../../../assets/timeObj/timeObj\";\nimport createYearMonthDay from \"../../../../Others/CreateYearMonthDay/createYearMonthDay\";\nimport coerceNumber from \"../../../../Others/CoerceNumber/coerceNumber\";\nimport CalendarCell from \"./CalendarCell\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nconst { YEAR: year, MONTH: month, DAY: today } = timeObj;\nconst [YEAR, MONTH, TODAY] = coerceNumber(year, month, today);\n\nfunction CreateCalendarTable(date, showExpenseListModalHandler, expenseData) {\n  const [dataYear, dataMonth] = createYearMonthDay(date);\n  let key = String(dataYear);\n  if (dataMonth >= 10) key += `-${String(dataMonth)}`;\n  else key += `-0${String(dataMonth)}`;\n\n  const [\n    lastOfCurMonthDate,\n    lastOfPrevMonthDate,\n    firstOfCurMonthDay,\n    daysOfNextMonth,\n  ] = createCalendarPreData(date);\n\n  const curMonthData = createMonthData(date, expenseData, lastOfPrevMonthDate);\n\n  const res = [];\n\n  // day of previous month\n  for (let i = firstOfCurMonthDay; i > 0; i--) {\n    res.push(\n      <CalendarCell key={uuidv4()} curMonthIndex={false}>\n        {lastOfPrevMonthDate - i + 1}\n      </CalendarCell>\n    );\n  }\n\n  // put this outside, so that don't need to keep calling the same method along with the iteration\n  const curretYearMonth =\n    date.getFullYear() === YEAR && date.getMonth() + 1 === MONTH;\n  // day of current month\n  for (let i = 1; i <= lastOfCurMonthDate; i++) {\n    const todayIndex = curretYearMonth && i === TODAY;\n\n    const indexID = i >= 10 ? i + \"\" : \"0\" + i;\n\n    res.push(\n      <CalendarCell\n        key={uuidv4()}\n        dataID={key + \"-\" + indexID}\n        curMonthIndex={true}\n        onClick={showExpenseListModalHandler}\n        todayIndex={todayIndex}\n        expenseIndex={curMonthData[i - 1] === \"expense\"}\n        incomeIndex={curMonthData[i - 1] === \"income\"}\n        bothIndex={curMonthData[i - 1] === \"both\"}\n      >\n        {i}\n      </CalendarCell>\n    );\n  }\n\n  // day of next month\n  for (let i = 1; i <= daysOfNextMonth; i++) {\n    res.push(\n      <CalendarCell key={uuidv4()} curMonthIndex={false}>\n        {i}\n      </CalendarCell>\n    );\n  }\n\n  return res;\n}\n\nexport default CreateCalendarTable;\n\nfunction createCalendarPreData(date) {\n  const lastDayOfCurMonth = new Date(\n    date.getFullYear(),\n    date.getMonth() + 1,\n    0\n  );\n  const lastDayOfPrevMonth = new Date(date.getFullYear(), date.getMonth(), 0);\n\n  const firstDayOfCurMonth = new Date(date.getFullYear(), date.getMonth(), 1);\n\n  const lastOfCurMonthDate = lastDayOfCurMonth.getDate();\n  const lastOfCurMonthDay = lastDayOfCurMonth.getDay();\n  const lastOfPrevMonthDate = lastDayOfPrevMonth.getDate();\n  const firstOfCurMonthDay = firstDayOfCurMonth.getDay();\n  const daysOfNextMonth = 7 - lastOfCurMonthDay - 1;\n\n  return [\n    lastOfCurMonthDate,\n    lastOfPrevMonthDate,\n    firstOfCurMonthDay,\n    daysOfNextMonth,\n  ];\n}\n\nfunction createMonthData(date, expenseData, lastOfCurMonthDate) {\n  const [curYear, curMonth] = createYearMonthDay(date);\n\n  /*\n  use Set to avoid duplicate value(date)\n  both separately store the day of having expense and income\n  */\n  const expenseDaySet = new Set();\n  const incomeDaySet = new Set();\n\n  expenseData.forEach((data) => {\n    const [dataYear, dataMonth, dataDay] = coerceNumber(\n      data.year,\n      data.month,\n      data.day\n    );\n\n    // only store the data of current month\n    if (curYear === dataYear && curMonth === dataMonth) {\n      if (data.category === \"expense\") expenseDaySet.add(dataDay);\n      else if (data.category === \"income\") incomeDaySet.add(dataDay);\n    }\n  });\n\n  // sort to descending order, later need to remove the element from small value\n  const expenseDayArr = Array.from(expenseDaySet).sort((a, b) => b - a);\n  const incomeDayArr = Array.from(incomeDaySet).sort((a, b) => b - a);\n\n  const curMonthData = [];\n\n  /*\n  iterate through from 1 ~ 30 or 31\n  for example\n  if day 5 in the expenseDayArr, add \"expense\" to curMonthData\n  then remove 5 from the expenseDayArr\n  we sort the array first above, so that now we can use .pop() here\n  */\n  for (let i = 1; i <= lastOfCurMonthDate; i++) {\n    const expenseIndex = i === expenseDayArr[expenseDayArr.length - 1];\n    const incomeIndex = i === incomeDayArr[incomeDayArr.length - 1];\n\n    if (expenseIndex && incomeIndex) {\n      curMonthData.push(\"both\");\n      expenseDayArr.pop();\n      incomeDayArr.pop();\n    } else if (expenseIndex && !incomeIndex) {\n      curMonthData.push(\"expense\");\n      expenseDayArr.pop();\n    } else if (incomeIndex && !expenseIndex) {\n      curMonthData.push(\"income\");\n      incomeDayArr.pop();\n    } else curMonthData.push(null);\n  }\n\n  return curMonthData;\n}\n\n/*\n1. get the date having expense and income in current month (array)\n2. get the last date of current month (30 or 31)\n3. get the last date of previous month (30 or 31)\n4. get the last day of current month (1 ~ 7)\n5. get the first day of curret month (1 ~ 7)\n6. create the last couple days of previous month\n   => How to know exactly number of days?\n   => first day of current month\n   => For example, the first day of current month is friday(5)\n   => then the calendar of this month can show 5 days of previous month\n   => sun ~ thu shows the previous month, and fri and sat shows the curret month\n\n7. create the all of days in current month\n   => simply iterate through from 1 to last date of current month(2.)\n\n8. create the next couple days of next month\n   => How to know exactly number of days?\n   => 7 - last day of current month - 1\n   => For example, the last day of current month is MON\n   => then the calendar of this month can show 5 days of next month\n   => Sun and Mon is current month, Tue ~ Sat is next month\n*/\n\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n// const DATE = new Date();\n// const MONTH = DATE.getMonth();\n// const TODAY = DATE.getDate();\n// const YEAR = DATE.getFullYear();\n\n// const cacheObj = {};\n\n// function CreateCalendarTable(date, showModalHandler, expenseData) {\n//   let key = date.getFullYear() + \"\" + (date.getMonth() + 1);\n//   if (key.length < 6) {\n//     key = date.getFullYear() + \"0\" + (date.getMonth() + 1);\n//   }\n\n//   // if (!cacheObj[key]) {\n//   //   addCacheData(cacheObj, date, key, expenseData);\n//   // }\n\n//   const res = [];\n\n//   const dayExpense = expenseData\n//     .filter(\n//       (element) =>\n//         Number(element.time.slice(0, 4)) === date.getFullYear() &&\n//         Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n//         element.category === \"expense\"\n//     )\n//     .map((element) => Number(element.time.slice(8)));\n\n//   const dayIncome = expenseData\n//     .filter(\n//       (element) =>\n//         Number(element.time.slice(0, 4)) === date.getFullYear() &&\n//         Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n//         element.category === \"income\"\n//     )\n//     .map((element) => Number(element.time.slice(8)));\n\n//   /*\n//   last day of current month\n//   0 gives us the last day of previous month\n//   + 1 makes to be last day fo current month\n//   getDate gives us the number type\n//   */\n//   const lastDay = new Date(\n//     date.getFullYear(),\n//     date.getMonth() + 1,\n//     0\n//   ).getDate();\n\n//   // last day of previous month\n//   const prevLastDay = new Date(\n//     date.getFullYear(),\n//     date.getMonth(),\n//     0\n//   ).getDate();\n\n//   // last day of the week (current month)\n//   const lastDayIndex = new Date(\n//     date.getFullYear(),\n//     date.getMonth() + 1,\n//     0\n//   ).getDay();\n\n//   // first day of the week (current month)\n//   const firstDayIndex = new Date(\n//     date.getFullYear(),\n//     date.getMonth(),\n//     1\n//   ).getDay();\n\n//   const nextDays = 7 - lastDayIndex - 1;\n\n//   // day of previous month\n//   for (let i = firstDayIndex; i > 0; i--) {\n//     res.push(\n//       <div className={style.negative} key={uuidv4()}>\n//         {prevLastDay - i + 1}\n//       </div>\n//     );\n//   }\n\n//   // day of current month\n//   for (let i = 1; i <= lastDay; i++) {\n//     // TODAY\n//     if (\n//       date.getFullYear() === YEAR &&\n//       date.getMonth() === MONTH &&\n//       i === TODAY\n//     ) {\n//       res.push(\n//         checkDot(\n//           i >= 10 ? i + \"\" : \"0\" + i,\n//           true,\n//           dayExpense,\n//           dayIncome,\n//           showModalHandler,\n//           key\n//         )\n//       );\n//     }\n//     // other days\n//     else\n//       res.push(\n//         checkDot(\n//           i >= 10 ? i + \"\" : \"0\" + i,\n//           false,\n//           dayExpense,\n//           dayIncome,\n//           showModalHandler,\n//           key\n//         )\n//       );\n//   }\n\n//   // day of next month\n//   for (let i = 1; i <= nextDays; i++) {\n//     res.push(\n//       <div className={style.negative} key={uuidv4()}>\n//         {i}\n//       </div>\n//     );\n//   }\n\n//   return res;\n// }\n\n// export default CreateCalendarTable;\n\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////\n// function checkDot(i, current, dayExpense, dayIncome, showModalHandler, key) {\n//   const numberI = Number(i);\n//   const noDots = !(dayExpense.includes(numberI) || dayIncome.includes(numberI));\n\n//   return (\n//     <div\n//       onClick={showModalHandler}\n//       className={current ? style.current : \"\"}\n//       key={uuidv4()}\n//       data-id={key + i}\n//     >\n//       {i}\n//       {noDots || (\n//         <div className={style[\"dot__container\"]}>\n//           {dayExpense.includes(numberI) && (\n//             <span className={`${style[\"dot--blue\"]} ${style.dot}`}></span>\n//           )}\n//           {dayIncome.includes(numberI) && (\n//             <span className={`${style[\"dot--pink\"]} ${style.dot}`}></span>\n//           )}\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n/*\nfunction addCacheData(cacheObj, date, key, expenseData) {\n  // each value in cache object is an array containing two arrays(day of expense and income)\n  cacheObj[key] = [];\n  const dayExpense = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"expense\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n  const dayIncome = expenseData\n    .filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        element.category === \"income\"\n    )\n    .map((element) => Number(element.time.slice(8)));\n  cacheObj[key].push(dayExpense);\n  cacheObj[key].push(dayIncome);\n}\n*/\n"]},"metadata":{},"sourceType":"module"}