{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/expense-tracker/src/components/UI/ExpenseItem/ExpenseItem.js\",\n    _s = $RefreshSig$();\n\nimport { Fragment, useState, useContext } from \"react\";\nimport BtnIcon from \"../BtnIcon/BtnIcon\";\nimport Button from \"../Button/Button\";\nimport DeleteModal from \"../DeleteModal/DeleteModal\";\nimport AddDataForm from \"../AddDataForm/AddDateForm\";\nimport DescriptionModal from \"../DescriptionModal/DescriptionModal\";\nimport CategoryContext from \"../../../store/category/category--context\";\nimport useAddDataForm from \"../../../Others/Custom/useAddDataForm\";\nimport formatMoney from \"../../../Others/FormatMoney/formatMoney\";\nimport createEditedDescription from \"../../../Others/CreateEditedDescription/createEditedDescription\";\nimport { MdMoreVert } from \"react-icons/md\";\nimport { AiFillDelete } from \"react-icons/ai\";\nimport { AiFillEdit } from \"react-icons/ai\";\nimport style from \"./ExpenseItem.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ExpenseItem(props) {\n  _s();\n\n  var _props$description, _props$description2;\n\n  const [btnMore, setBtnMore] = useState(false);\n  const [descriptionModal, setDescriptionModal] = useState(false);\n  const [deleteModal, setDeleteModal] = useState(false);\n  const [addDataFormModal, addDataFormModalToggler] = useAddDataForm();\n  const {\n    iconObj\n  } = useContext(CategoryContext);\n  const icon = iconObj[props.mainCate];\n  const oldExpenseData = {\n    id: props.id,\n    category: props.category,\n    mainCategoryArr: [],\n    mainCategory: props.mainCate,\n    subCategoryArr: [],\n    subCategory: props.subCate,\n    date: props.time,\n    description: props.description,\n    price: props.price,\n    isValid: true\n  };\n  const deletedDataInfo = {\n    mainCate: props.mainCate,\n    subCate: props.subCate,\n    price: props.price,\n    time: props.time,\n    description: props.description\n  };\n\n  function btnMoreToggler() {\n    setBtnMore(prev => !prev);\n  }\n\n  function showDeleteModalHandler() {\n    setDeleteModal(true);\n  }\n\n  function descriptionModalToggler(e) {\n    // Reference 1\n    if (descriptionModal) setDescriptionModal(prev => !prev);else if (e.target.dataset.id === \"true\") setDescriptionModal(prev => !prev);\n  }\n\n  const classMainCategory = props.category === \"expense\" ? `${style[\"item__category--blue\"]}` : `${style[\"item__category--pink\"]}`;\n  const limitedLength = props.modal ? 15 : 25;\n  const classLongDescription = ((_props$description = props.description) === null || _props$description === void 0 ? void 0 : _props$description.length) > limitedLength ? \"item__description--long\" : \"\";\n  const longIndex = classLongDescription.length > 0;\n  let editedDescription = props.description && props.description.length > limitedLength ? createEditedDescription(props.description, limitedLength) : props.description; // shorten the description after user clicking the btn(more)\n\n  if (props.description && ((_props$description2 = props.description) === null || _props$description2 === void 0 ? void 0 : _props$description2.length) > limitedLength - 10 && btnMore) editedDescription = createEditedDescription(props.description, limitedLength - 10);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [deleteModal && /*#__PURE__*/_jsxDEV(DeleteModal, {\n      id: props.id,\n      dataInfo: deletedDataInfo,\n      setDeleteModal: setDeleteModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), addDataFormModal && /*#__PURE__*/_jsxDEV(AddDataForm, {\n      oldExpenseData: oldExpenseData,\n      addDataFormModalToggler: addDataFormModalToggler,\n      btnMoreToggler: btnMoreToggler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), descriptionModal && /*#__PURE__*/_jsxDEV(DescriptionModal, {\n      descriptionModalToggler: descriptionModalToggler,\n      children: props.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n      className: props.classItem ? `${style.item} ${props.classItem}` : `${style.item}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: style[\"item__info\"],\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          title: props.mainCate,\n          className: `${style[\"item__category\"]} ${classMainCategory} center--flex`,\n          children: icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"capitalize\",\n            children: props.subCate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: style[\"item__time\"],\n            children: props.time\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          \"data-id\": longIndex,\n          onClick: descriptionModalToggler,\n          className: longIndex ? `${style[\"item__description\"]} ${style[classLongDescription]}` : `${style[\"item__description\"]}`,\n          children: [editedDescription, /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style[\"description__text--hover\"],\n            children: \"click to show description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), longIndex && !btnMore && /*#__PURE__*/_jsxDEV(\"p\", {\n          \"data-id\": longIndex,\n          onClick: descriptionModalToggler,\n          className: style[\"description__text\"],\n          children: \"click to show description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: style[\"item__price\"],\n          children: [\"$\", formatMoney(props.price)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), !props.inDeleteSection && btnMore && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style[\"btn__container\"],\n          children: [/*#__PURE__*/_jsxDEV(BtnIcon, {\n            onClick: showDeleteModalHandler,\n            classBtn: style[\"btn__icon\"],\n            text: \"delete\",\n            children: /*#__PURE__*/_jsxDEV(AiFillDelete, {\n              className: style.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.vertical\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(BtnIcon, {\n            onClick: addDataFormModalToggler,\n            classBtn: style[\"btn__icon\"],\n            text: \"edit\",\n            children: /*#__PURE__*/_jsxDEV(AiFillEdit, {\n              className: style.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 13\n        }, this), !props.inDeleteSection && /*#__PURE__*/_jsxDEV(Button, {\n          onClick: btnMoreToggler,\n          type: \"button\",\n          className: style[\"btn__more\"],\n          ariaLabel: \"more\",\n          children: /*#__PURE__*/_jsxDEV(MdMoreVert, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ExpenseItem, \"x5LkcIfCnedXWQgXf618+uO3r2M=\", false, function () {\n  return [useAddDataForm];\n});\n\n_c = ExpenseItem;\nexport default ExpenseItem;\n/*\nReference 1\nWe put this function on every single description\nbut we don't wanna trigger for every description, we only want to show the description modal when the description is too long\n\nThe logic is we only want to trigger that useState set method when\n1) descriptionModal is true, which means it's gonna close the modal\n2) e.target.dataset.id is true\n   (e.target.dataset.id is equal to variabe longIndex, which keep track if the description is too lo (see below)\n   (Note e.target.dataset.id represenat as string)\n*/\n\n/*\nReference 2\n Note that here and below\nwe only want to show \"more\", \"delete\", \"edit\" button and functionality when the expense list item do NOT in the delete section \n*/\n\n/*\nReference 3\nWhat does this mean longIndex && !btnMore && <content></content>\nIf longIndex is false\n=> it means the description is not too long\n=> we don't need to show the content at all\n\n** !btnMore\n=> If btnMore is true, it means showing the more content\n*/\n\nvar _c;\n\n$RefreshReg$(_c, \"ExpenseItem\");","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/components/UI/ExpenseItem/ExpenseItem.js"],"names":["Fragment","useState","useContext","BtnIcon","Button","DeleteModal","AddDataForm","DescriptionModal","CategoryContext","useAddDataForm","formatMoney","createEditedDescription","MdMoreVert","AiFillDelete","AiFillEdit","style","ExpenseItem","props","btnMore","setBtnMore","descriptionModal","setDescriptionModal","deleteModal","setDeleteModal","addDataFormModal","addDataFormModalToggler","iconObj","icon","mainCate","oldExpenseData","id","category","mainCategoryArr","mainCategory","subCategoryArr","subCategory","subCate","date","time","description","price","isValid","deletedDataInfo","btnMoreToggler","prev","showDeleteModalHandler","descriptionModalToggler","e","target","dataset","classMainCategory","limitedLength","modal","classLongDescription","length","longIndex","editedDescription","classItem","item","inDeleteSection","vertical"],"mappings":"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","sourcesContent":["import { Fragment, useState, useContext } from \"react\";\nimport BtnIcon from \"../BtnIcon/BtnIcon\";\nimport Button from \"../Button/Button\";\nimport DeleteModal from \"../DeleteModal/DeleteModal\";\nimport AddDataForm from \"../AddDataForm/AddDateForm\";\nimport DescriptionModal from \"../DescriptionModal/DescriptionModal\";\nimport CategoryContext from \"../../../store/category/category--context\";\nimport useAddDataForm from \"../../../Others/Custom/useAddDataForm\";\nimport formatMoney from \"../../../Others/FormatMoney/formatMoney\";\nimport createEditedDescription from \"../../../Others/CreateEditedDescription/createEditedDescription\";\nimport { MdMoreVert } from \"react-icons/md\";\nimport { AiFillDelete } from \"react-icons/ai\";\nimport { AiFillEdit } from \"react-icons/ai\";\nimport style from \"./ExpenseItem.module.css\";\n\nfunction ExpenseItem(props) {\n  const [btnMore, setBtnMore] = useState(false);\n  const [descriptionModal, setDescriptionModal] = useState(false);\n  const [deleteModal, setDeleteModal] = useState(false);\n  const [addDataFormModal, addDataFormModalToggler] = useAddDataForm();\n  const { iconObj } = useContext(CategoryContext);\n  const icon = iconObj[props.mainCate];\n\n  const oldExpenseData = {\n    id: props.id,\n    category: props.category,\n    mainCategoryArr: [],\n    mainCategory: props.mainCate,\n    subCategoryArr: [],\n    subCategory: props.subCate,\n    date: props.time,\n    description: props.description,\n    price: props.price,\n    isValid: true,\n  };\n\n  const deletedDataInfo = {\n    mainCate: props.mainCate,\n    subCate: props.subCate,\n    price: props.price,\n    time: props.time,\n    description: props.description,\n  };\n\n  function btnMoreToggler() {\n    setBtnMore((prev) => !prev);\n  }\n\n  function showDeleteModalHandler() {\n    setDeleteModal(true);\n  }\n\n  function descriptionModalToggler(e) {\n    // Reference 1\n    if (descriptionModal) setDescriptionModal((prev) => !prev);\n    else if (e.target.dataset.id === \"true\")\n      setDescriptionModal((prev) => !prev);\n  }\n\n  const classMainCategory =\n    props.category === \"expense\"\n      ? `${style[\"item__category--blue\"]}`\n      : `${style[\"item__category--pink\"]}`;\n\n  const limitedLength = props.modal ? 15 : 25;\n  const classLongDescription =\n    props.description?.length > limitedLength ? \"item__description--long\" : \"\";\n  const longIndex = classLongDescription.length > 0;\n  let editedDescription =\n    props.description && props.description.length > limitedLength\n      ? createEditedDescription(props.description, limitedLength)\n      : props.description;\n\n  // shorten the description after user clicking the btn(more)\n  if (\n    props.description &&\n    props.description?.length > limitedLength - 10 &&\n    btnMore\n  )\n    editedDescription = createEditedDescription(\n      props.description,\n      limitedLength - 10\n    );\n\n  return (\n    <Fragment>\n      {deleteModal && (\n        <DeleteModal\n          id={props.id}\n          dataInfo={deletedDataInfo}\n          setDeleteModal={setDeleteModal}\n        />\n      )}\n      {addDataFormModal && (\n        <AddDataForm\n          oldExpenseData={oldExpenseData}\n          addDataFormModalToggler={addDataFormModalToggler}\n          btnMoreToggler={btnMoreToggler}\n        />\n      )}\n      {descriptionModal && (\n        <DescriptionModal descriptionModalToggler={descriptionModalToggler}>\n          {props.description}\n        </DescriptionModal>\n      )}\n\n      <li\n        className={\n          props.classItem ? `${style.item} ${props.classItem}` : `${style.item}`\n        }\n      >\n        <div className={style[\"item__info\"]}>\n          <div\n            title={props.mainCate}\n            className={`${style[\"item__category\"]} ${classMainCategory} center--flex`}\n          >\n            {icon}\n          </div>\n          <div>\n            <p className=\"capitalize\">{props.subCate}</p>\n            <p className={style[\"item__time\"]}>{props.time}</p>\n          </div>\n          <p\n            data-id={longIndex}\n            onClick={descriptionModalToggler}\n            className={\n              longIndex\n                ? `${style[\"item__description\"]} ${style[classLongDescription]}`\n                : `${style[\"item__description\"]}`\n            }\n          >\n            {editedDescription}\n            <span className={style[\"description__text--hover\"]}>\n              click to show description\n            </span>\n          </p>\n\n          {longIndex && !btnMore && (\n            <p\n              data-id={longIndex}\n              onClick={descriptionModalToggler}\n              className={style[\"description__text\"]}\n            >\n              click to show description\n            </p>\n          )}\n        </div>\n\n        <div>\n          <p className={style[\"item__price\"]}>${formatMoney(props.price)}</p>\n\n          {!props.inDeleteSection && btnMore && (\n            <div className={style[\"btn__container\"]}>\n              <BtnIcon\n                onClick={showDeleteModalHandler}\n                classBtn={style[\"btn__icon\"]}\n                text=\"delete\"\n              >\n                <AiFillDelete className={style.icon} />\n              </BtnIcon>\n              <span className={style.vertical} />\n              <BtnIcon\n                onClick={addDataFormModalToggler}\n                classBtn={style[\"btn__icon\"]}\n                text=\"edit\"\n              >\n                <AiFillEdit className={style.icon} />\n              </BtnIcon>\n            </div>\n          )}\n          {!props.inDeleteSection && (\n            <Button\n              onClick={btnMoreToggler}\n              type=\"button\"\n              className={style[\"btn__more\"]}\n              ariaLabel=\"more\"\n            >\n              <MdMoreVert />\n            </Button>\n          )}\n        </div>\n      </li>\n    </Fragment>\n  );\n}\n\nexport default ExpenseItem;\n\n/*\nReference 1\nWe put this function on every single description\nbut we don't wanna trigger for every description, we only want to show the description modal when the description is too long\n\nThe logic is we only want to trigger that useState set method when\n1) descriptionModal is true, which means it's gonna close the modal\n2) e.target.dataset.id is true\n   (e.target.dataset.id is equal to variabe longIndex, which keep track if the description is too lo (see below)\n   (Note e.target.dataset.id represenat as string)\n*/\n\n/*\nReference 2\n Note that here and below\nwe only want to show \"more\", \"delete\", \"edit\" button and functionality when the expense list item do NOT in the delete section \n*/\n\n/*\nReference 3\nWhat does this mean longIndex && !btnMore && <content></content>\nIf longIndex is false\n=> it means the description is not too long\n=> we don't need to show the content at all\n\n** !btnMore\n=> If btnMore is true, it means showing the more content\n*/\n"]},"metadata":{},"sourceType":"module"}