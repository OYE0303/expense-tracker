{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/project-expenseTracker-main/src/store/searchListData/SearchListDataProvider.js\",\n    _s = $RefreshSig$();\n\nimport { useReducer, useContext } from \"react\";\nimport ExpenseDataContext from \"../expenseData/expenseData--context\";\nimport SearchListDataContext from \"./searchListData--context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet orginalObj;\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ADD\":\n      {\n        const value = action.value;\n        const newObj = { ...state.constraintObj\n        };\n        newObj[`${action.id}-${action.value}`] = value;\n        return {\n          expenseData: reducerHelperFunction(newObj),\n          constraintObj: newObj\n        };\n      }\n\n    case \"REMOVE\":\n      {\n        const id = `${action.id}-${action.value}`;\n        const newObj = { ...state.constraintObj\n        };\n        delete newObj[id];\n        let newState;\n        if (newObj.length === 0) newState = orginalObj;else {\n          newState = reducerHelperFunction(newObj);\n        }\n        return {\n          expenseData: newState,\n          constraintObj: newObj\n        };\n      }\n\n    case \"SEARCH\":\n      {\n        let newState;\n        if (action.value.length === 0) newState = orginalObj;else {\n          newState = state.expenseData.filter(element => element.description.includes(action.value));\n        }\n        return {\n          expenseData: newState,\n          constraintObj: state.constraintObj\n        };\n      }\n\n    case \"SORT_TIME\":\n      {\n        let newState;\n        if (action.sort) newState = state.expenseData.sort((elementA, elementB) => Number(new Date(elementA.time)) - Number(new Date(elementB.time)));else newState = state.expenseData.sort((elementA, elementB) => Number(new Date(elementB.time)) - Number(new Date(elementA.time)));\n        return {\n          expenseData: newState,\n          constraintObj: state.constraintObj\n        };\n      }\n\n    case \"SORT_PRICE\":\n      {\n        let newState;\n        if (action.sort) newState = state.expenseData.sort((elementA, elementB) => Number(elementA.price) - Number(elementB.price));else newState = state.expenseData.sort((elementA, elementB) => Number(elementB.price) - Number(elementA.price));\n        return {\n          expenseData: newState,\n          constraintObj: state.constraintObj\n        };\n      }\n\n    case \"SORT_CATEGORY\":\n      {\n        const incomeDataArr = state.expenseData.filter(element => element.category === \"income\");\n        const expenseDataArr = state.expenseData.filter(element => element.category === \"expense\");\n        let newState;\n        if (action.sort) newState = [...incomeDataArr, ...expenseDataArr];else newState = [...expenseDataArr, ...incomeDataArr];\n        return {\n          expenseData: newState,\n          constraintObj: state.constraintObj\n        };\n      }\n\n    default:\n      return state;\n  }\n}\n\nfunction SearchListDataProvider(props) {\n  _s();\n\n  const expenseDataCtx = useContext(ExpenseDataContext);\n  const [filteredData, setFilteredData] = useReducer(reducer, {\n    constraintObj: {},\n    expenseData: expenseDataCtx.EXPENSE_DATA\n  });\n  orginalObj = expenseDataCtx.EXPENSE_DATA;\n  const SearchListDataContextInitialObject = {\n    setFilteredData,\n    expenseData: filteredData.expenseData\n  };\n  return /*#__PURE__*/_jsxDEV(SearchListDataContext.Provider, {\n    value: SearchListDataContextInitialObject,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchListDataProvider, \"tb6Rz/xXOkXUVgkzHcc2XN9uKcQ=\");\n\n_c = SearchListDataProvider;\nexport default SearchListDataProvider;\n\nfunction filterTime(data, filterArr) {\n  if (filterArr.length === 0) return data;\n  const date = new Date(); // console.log(data);\n  // console.log(filterArr);\n\n  let dayArr = [];\n  let monthArr = [];\n  let yearArr = [];\n  filterArr.forEach(element => {\n    if (element[0] === \"d\") dayArr.push(element.split(\",\")[1]);\n    if (element[0] === \"m\") monthArr.push(element.split(\",\")[1]);\n    if (element[0] === \"y\") yearArr.push(element.split(\",\")[1]);\n  }); // console.log(dayArr);\n  // console.log(monthArr);\n  // console.log(yearArr);\n\n  let filteredData; // if only having day-base array, then check 1) year 2) month 3) range of day\n\n  if (monthArr.length === 0 && yearArr.length === 0) {\n    filteredData = data.filter(element => Number(element.time.slice(0, 4)) === date.getFullYear() && Number(element.time.slice(5, 7)) === date.getMonth() + 1 && Number(element.time.slice(8)) <= Number(dayArr[0]) && Number(element.time.slice(8)) >= Number(dayArr[dayArr.length - 1]));\n  } // if having month-base array and not having year-base array, then we only need to check 1) year 2) month\n\n\n  if (monthArr.length === 0 && yearArr.length !== 0) {}\n\n  console.log(filteredData);\n  let dayState = [];\n  let monthState = [];\n  let yearState = []; // Number(element.time.slice(8)) >=\n\n  if (dayArr.length > 0) {\n    dayState = data.filter(element => Number(element.time.slice(8)) >= Number(Math.min(...dayArr)) && Number(element.time.slice(5, 7)) === date.getMonth() + 1);\n  }\n\n  if (monthArr.length > 0) {\n    monthState = data.filter(element => Number(element.time.slice(5, 7)) >= Number(Math.min(...monthArr)) && Number(element.time.slice(5, 7)) !== date.getMonth() + 1);\n  }\n\n  if (yearArr.length > 0) {\n    yearState = data.filter(element => Number(element.time.slice(0, 4)) === Number(Math.min(...yearArr)));\n  }\n\n  return [...dayState, ...monthState, ...yearState];\n}\n\nfunction filterCategory(data, filterArr) {\n  if (filterArr.length === 0) return data;\n  return data.filter(element => filterArr.includes(element.mainCate));\n}\n\nfunction filterPrice(data, filterArr) {\n  if (filterArr.length === 0) return data;\n  let min = Infinity;\n  let max = 0;\n  let tmpMin;\n  let tmpMax;\n  const newFilterArr = filterArr.map(arr => arr.split(\",\"));\n  newFilterArr.forEach(element => {\n    [tmpMin, tmpMax] = element;\n    if (Number(tmpMin) < min) min = Number(tmpMin);\n    if (Number(tmpMax) > max) max = Number(tmpMax);\n  });\n  return data.filter(element => Number(element.price) >= Number(min) && Number(element.price) <= Number(max));\n}\n\nfunction reducerDescription(data) {}\n\nfunction reducerHelperFunction(newObj) {\n  let currentType;\n  let currentKey;\n  let timeArr = [];\n  let priceArr = [];\n  let categoryArr = [];\n\n  for (const key of Object.keys(newObj)) {\n    [currentType, currentKey] = key.split(\"-\");\n    if (currentType === \"category\") categoryArr.push(currentKey);else if (currentType === \"time\") timeArr.push(currentKey);else priceArr.push(currentKey);\n  }\n\n  return filterCategory(filterPrice(filterTime(orginalObj, timeArr), priceArr), categoryArr);\n}\n/*\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"TIME\": {\n      return reducerTime(state, action);\n    }\n\n    case \"PRICE\": {\n      return reducerPrice(state, action);\n    }\n\n    case \"CATEGORY\": {\n      return reducerCategory(state, action);\n    }\n\n    default:\n      break;\n  }\n}\n\nfunction reducerCategory(state, action) {\n  let newState;\n  let totalCount = state.checkTotalCount;\n  let categoryCount = state.checkCategoryCount;\n\n  if (action.checked) {\n    if (totalCount === 0) {\n      totalCount++;\n      categoryCount++;\n\n      newState = state.expenseData.filter(\n        (element) => element.mainCate === action.value\n      );\n    } else {\n      totalCount++;\n      categoryCount++;\n\n      if (state.checkPriceCount !== 0 || state.checkTimeCount !== 0) {\n        newState = state.expenseData.filter(\n          (element) => element.mainCate === action.value\n        );\n      } else {\n        const concatArr = orginalObj.filter(\n          (element) => element.mainCate === action.value\n        );\n\n        newState = state.expenseData.concat(concatArr);\n      }\n    }\n  } else {\n    totalCount--;\n    categoryCount--;\n\n    if (totalCount === 0) newState = orginalObj;\n    else {\n      newState = state.expenseData.filter(\n        (element) => element.mainCate !== action.value\n      );\n    }\n  }\n\n  return {\n    checkTotalCount: totalCount,\n    checkTimeCount: state.checkTimeCount,\n    checkPriceCount: state.checkPriceCount,\n    checkCategoryCount: categoryCount,\n    expenseData: newState,\n  };\n}\n\nfunction reducerPrice(state, action) {\n  const [lowestPrice, highestPrice] = action.value.split(\",\");\n  let newState;\n  let totalCount = state.checkTotalCount;\n  let priceCount = state.checkPriceCount;\n\n  if (action.checked) {\n    if (totalCount === 0) {\n      totalCount++;\n      priceCount++;\n\n      newState = state.expenseData.filter(\n        (element) =>\n          Number(element.price) >= lowestPrice &&\n          Number(element.price) <= highestPrice\n      );\n    } else {\n      totalCount++;\n      priceCount++;\n\n      if (state.checkTimeCount !== 0 || state.checkCategoryCount !== 0) {\n        newState = state.expenseData.filter(\n          (element) =>\n            Number(element.price) >= lowestPrice &&\n            Number(element.price) <= highestPrice\n        );\n      } else {\n        const concatArr = orginalObj.filter(\n          (element) =>\n            Number(element.price) >= lowestPrice &&\n            Number(element.price) <= highestPrice\n        );\n\n        newState = state.expenseData.concat(concatArr);\n      }\n    }\n  } else {\n    totalCount--;\n    priceCount--;\n\n    if (totalCount === 0) newState = orginalObj;\n    else {\n      newState = state.expenseData.filter(\n        (element) =>\n          Number(element.price) < lowestPrice ||\n          Number(element.price) > highestPrice\n      );\n    }\n  }\n\n  return {\n    checkTotalCount: totalCount,\n    checkTimeCount: state.checkTimeCount,\n    checkPriceCount: priceCount,\n    checkCategoryCount: state.checkCategoryCount,\n    expenseData: newState,\n  };\n}\n\nfunction reducerTime(state, action) {\n  let dateArr = [];\n  let newState;\n\n  // days\n  if (action.value < 30) {\n    const currenDate = date.getDate();\n\n    if (action.value === 0) dateArr.push(currenDate);\n    else\n      for (let i = 1; i <= action.value; i++) {\n        dateArr.push(currenDate - i);\n      }\n\n    if (action.checked) {\n      newState = state.expenseData.filter(\n        (element) =>\n          dateArr.includes(Number(element.time.slice(8))) &&\n          Number(element.time.slice(5, 7)) === date.getMonth() + 1\n      );\n    } else {\n      const concatArr = orginalObj.filter(\n        (element) =>\n          !dateArr.includes(Number(element.time.slice(8))) ||\n          !(Number(element.time.slice(5, 7)) === date.getMonth() + 1)\n      );\n\n      newState = state.expenseData.concat(concatArr);\n    }\n  }\n  // months\n  else if (action.value === 30 || action.value === 90) {\n    if (action.value === 30) dateArr.push(date.getMonth());\n    else {\n      for (let i = 0; i < 3; i++) {\n        dateArr.push(date.getMonth() - i);\n      }\n    }\n\n    if (action.checked) {\n      newState = state.expenseData.filter((element) =>\n        dateArr.includes(Number(element.time.slice(5, 7)))\n      );\n    } else {\n      const concatArr = orginalObj.filter(\n        (element) => !dateArr.includes(Number(element.time.slice(5, 7)))\n      );\n\n      newState = state.expenseData.concat(concatArr);\n    }\n  }\n  // years\n  else {\n    dateArr.push(date.getFullYear() - 1);\n\n    if (action.checked) {\n      newState = state.expenseData.filter((element) =>\n        dateArr.includes(Number(element.time.slice(0, 4)))\n      );\n    } else {\n      const concatArr = orginalObj.filter(\n        (element) => !dateArr.includes(Number(element.time.slice(0, 4)))\n      );\n\n      newState = state.expenseData.concat(concatArr);\n    }\n  }\n\n  return { ...state, expenseData: newState };\n}\n\nconst checkboxTime = [\n  { category: \"time\", text: \"today\", value: 0, checked: false },\n  { category: \"time\", text: \"yesterady\", value: 1, checked: false },\n  { category: \"time\", text: \"three days ago\", value: 3, checked: false },\n  { category: \"time\", text: \"a week ago\", value: 7, checked: false },\n  { category: \"time\", text: \"a month ago\", value: 30, checked: false },\n  { category: \"time\", text: \"three months ago\", value: 90, checked: false },\n  { category: \"time\", text: \"a year ago\", value: 100, checked: false },\n  { category: \"price\", text: \"0 ~ $100\", value: [0, 100], checked: false },\n  { category: \"price\", text: \"$100 ~ $300\", value: [100, 300], checked: false },\n  { category: \"price\", text: \"$300 ~ $500\", value: [300, 500], checked: false },\n  {\n    category: \"price\",\n    text: \"$500 ~ $1000\",\n    value: [500, 1000],\n    checked: false,\n  },\n  {\n    category: \"price\",\n    text: \"above $1000\",\n    value: [1000, Infinity],\n    checked: false,\n  },\n];\n\n*/\n\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchListDataProvider\");","map":{"version":3,"sources":["/Users/eyo/Desktop/project-expenseTracker-main/src/store/searchListData/SearchListDataProvider.js"],"names":["useReducer","useContext","ExpenseDataContext","SearchListDataContext","orginalObj","reducer","state","action","type","value","newObj","constraintObj","id","expenseData","reducerHelperFunction","newState","length","filter","element","description","includes","sort","elementA","elementB","Number","Date","time","price","incomeDataArr","category","expenseDataArr","SearchListDataProvider","props","expenseDataCtx","filteredData","setFilteredData","EXPENSE_DATA","SearchListDataContextInitialObject","children","filterTime","data","filterArr","date","dayArr","monthArr","yearArr","forEach","push","split","slice","getFullYear","getMonth","console","log","dayState","monthState","yearState","Math","min","filterCategory","mainCate","filterPrice","Infinity","max","tmpMin","tmpMax","newFilterArr","map","arr","reducerDescription","currentType","currentKey","timeArr","priceArr","categoryArr","key","Object","keys"],"mappings":"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IAA4BI,GAAG,CAAC3B,KAAJ,CAAU,GAAV,CAA5B;AAEA,QAAIsB,WAAW,KAAK,UAApB,EAAgCI,WAAW,CAAC3B,IAAZ,CAAiBwB,UAAjB,EAAhC,KACK,IAAID,WAAW,KAAK,MAApB,EAA4BE,OAAO,CAACzB,IAAR,CAAawB,UAAb,EAA5B,KACAE,QAAQ,CAAC1B,IAAT,CAAcwB,UAAd;AACN;;AAED,SAAOZ,cAAc,CACnBE,WAAW,CAACtB,UAAU,CAACnC,UAAD,EAAaoE,OAAb,CAAX,EAAkCC,QAAlC,CADQ,EAEnBC,WAFmB,CAArB;AAID;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { useReducer, useContext } from \"react\";\nimport ExpenseDataContext from \"../expenseData/expenseData--context\";\nimport SearchListDataContext from \"./searchListData--context\";\n\nlet orginalObj;\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ADD\": {\n      const value = action.value;\n\n      const newObj = { ...state.constraintObj };\n      newObj[`${action.id}-${action.value}`] = value;\n\n      return {\n        expenseData: reducerHelperFunction(newObj),\n        constraintObj: newObj,\n      };\n    }\n\n    case \"REMOVE\": {\n      const id = `${action.id}-${action.value}`;\n\n      const newObj = { ...state.constraintObj };\n\n      delete newObj[id];\n\n      let newState;\n      if (newObj.length === 0) newState = orginalObj;\n      else {\n        newState = reducerHelperFunction(newObj);\n      }\n\n      return { expenseData: newState, constraintObj: newObj };\n    }\n\n    case \"SEARCH\": {\n      let newState;\n\n      if (action.value.length === 0) newState = orginalObj;\n      else {\n        newState = state.expenseData.filter((element) =>\n          element.description.includes(action.value)\n        );\n      }\n\n      return { expenseData: newState, constraintObj: state.constraintObj };\n    }\n\n    case \"SORT_TIME\": {\n      let newState;\n\n      if (action.sort)\n        newState = state.expenseData.sort(\n          (elementA, elementB) =>\n            Number(new Date(elementA.time)) - Number(new Date(elementB.time))\n        );\n      else\n        newState = state.expenseData.sort(\n          (elementA, elementB) =>\n            Number(new Date(elementB.time)) - Number(new Date(elementA.time))\n        );\n\n      return { expenseData: newState, constraintObj: state.constraintObj };\n    }\n\n    case \"SORT_PRICE\": {\n      let newState;\n\n      if (action.sort)\n        newState = state.expenseData.sort(\n          (elementA, elementB) =>\n            Number(elementA.price) - Number(elementB.price)\n        );\n      else\n        newState = state.expenseData.sort(\n          (elementA, elementB) =>\n            Number(elementB.price) - Number(elementA.price)\n        );\n\n      return { expenseData: newState, constraintObj: state.constraintObj };\n    }\n\n    case \"SORT_CATEGORY\": {\n      const incomeDataArr = state.expenseData.filter(\n        (element) => element.category === \"income\"\n      );\n\n      const expenseDataArr = state.expenseData.filter(\n        (element) => element.category === \"expense\"\n      );\n\n      let newState;\n\n      if (action.sort) newState = [...incomeDataArr, ...expenseDataArr];\n      else newState = [...expenseDataArr, ...incomeDataArr];\n\n      return { expenseData: newState, constraintObj: state.constraintObj };\n    }\n\n    default:\n      return state;\n  }\n}\n\nfunction SearchListDataProvider(props) {\n  const expenseDataCtx = useContext(ExpenseDataContext);\n  const [filteredData, setFilteredData] = useReducer(reducer, {\n    constraintObj: {},\n    expenseData: expenseDataCtx.EXPENSE_DATA,\n  });\n\n  orginalObj = expenseDataCtx.EXPENSE_DATA;\n\n  const SearchListDataContextInitialObject = {\n    setFilteredData,\n    expenseData: filteredData.expenseData,\n  };\n\n  return (\n    <SearchListDataContext.Provider value={SearchListDataContextInitialObject}>\n      {props.children}\n    </SearchListDataContext.Provider>\n  );\n}\n\nexport default SearchListDataProvider;\n\nfunction filterTime(data, filterArr) {\n  if (filterArr.length === 0) return data;\n  const date = new Date();\n  // console.log(data);\n  // console.log(filterArr);\n\n  let dayArr = [];\n  let monthArr = [];\n  let yearArr = [];\n  filterArr.forEach((element) => {\n    if (element[0] === \"d\") dayArr.push(element.split(\",\")[1]);\n    if (element[0] === \"m\") monthArr.push(element.split(\",\")[1]);\n    if (element[0] === \"y\") yearArr.push(element.split(\",\")[1]);\n  });\n\n  // console.log(dayArr);\n  // console.log(monthArr);\n  // console.log(yearArr);\n\n  let filteredData;\n\n  // if only having day-base array, then check 1) year 2) month 3) range of day\n  if (monthArr.length === 0 && yearArr.length === 0) {\n    filteredData = data.filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === date.getFullYear() &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1 &&\n        Number(element.time.slice(8)) <= Number(dayArr[0]) &&\n        Number(element.time.slice(8)) >= Number(dayArr[dayArr.length - 1])\n    );\n  }\n\n  // if having month-base array and not having year-base array, then we only need to check 1) year 2) month\n  if (monthArr.length === 0 && yearArr.length !== 0) {\n  }\n\n  console.log(filteredData);\n\n  let dayState = [];\n  let monthState = [];\n  let yearState = []; // Number(element.time.slice(8)) >=\n\n  if (dayArr.length > 0) {\n    dayState = data.filter(\n      (element) =>\n        Number(element.time.slice(8)) >= Number(Math.min(...dayArr)) &&\n        Number(element.time.slice(5, 7)) === date.getMonth() + 1\n    );\n  }\n\n  if (monthArr.length > 0) {\n    monthState = data.filter(\n      (element) =>\n        Number(element.time.slice(5, 7)) >= Number(Math.min(...monthArr)) &&\n        Number(element.time.slice(5, 7)) !== date.getMonth() + 1\n    );\n  }\n\n  if (yearArr.length > 0) {\n    yearState = data.filter(\n      (element) =>\n        Number(element.time.slice(0, 4)) === Number(Math.min(...yearArr))\n    );\n  }\n\n  return [...dayState, ...monthState, ...yearState];\n}\n\nfunction filterCategory(data, filterArr) {\n  if (filterArr.length === 0) return data;\n\n  return data.filter((element) => filterArr.includes(element.mainCate));\n}\n\nfunction filterPrice(data, filterArr) {\n  if (filterArr.length === 0) return data;\n\n  let min = Infinity;\n  let max = 0;\n  let tmpMin;\n  let tmpMax;\n  const newFilterArr = filterArr.map((arr) => arr.split(\",\"));\n  newFilterArr.forEach((element) => {\n    [tmpMin, tmpMax] = element;\n\n    if (Number(tmpMin) < min) min = Number(tmpMin);\n    if (Number(tmpMax) > max) max = Number(tmpMax);\n  });\n\n  return data.filter(\n    (element) =>\n      Number(element.price) >= Number(min) &&\n      Number(element.price) <= Number(max)\n  );\n}\n\nfunction reducerDescription(data) {}\n\nfunction reducerHelperFunction(newObj) {\n  let currentType;\n  let currentKey;\n  let timeArr = [];\n  let priceArr = [];\n  let categoryArr = [];\n  for (const key of Object.keys(newObj)) {\n    [currentType, currentKey] = key.split(\"-\");\n\n    if (currentType === \"category\") categoryArr.push(currentKey);\n    else if (currentType === \"time\") timeArr.push(currentKey);\n    else priceArr.push(currentKey);\n  }\n\n  return filterCategory(\n    filterPrice(filterTime(orginalObj, timeArr), priceArr),\n    categoryArr\n  );\n}\n\n/*\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"TIME\": {\n      return reducerTime(state, action);\n    }\n\n    case \"PRICE\": {\n      return reducerPrice(state, action);\n    }\n\n    case \"CATEGORY\": {\n      return reducerCategory(state, action);\n    }\n\n    default:\n      break;\n  }\n}\n\nfunction reducerCategory(state, action) {\n  let newState;\n  let totalCount = state.checkTotalCount;\n  let categoryCount = state.checkCategoryCount;\n\n  if (action.checked) {\n    if (totalCount === 0) {\n      totalCount++;\n      categoryCount++;\n\n      newState = state.expenseData.filter(\n        (element) => element.mainCate === action.value\n      );\n    } else {\n      totalCount++;\n      categoryCount++;\n\n      if (state.checkPriceCount !== 0 || state.checkTimeCount !== 0) {\n        newState = state.expenseData.filter(\n          (element) => element.mainCate === action.value\n        );\n      } else {\n        const concatArr = orginalObj.filter(\n          (element) => element.mainCate === action.value\n        );\n\n        newState = state.expenseData.concat(concatArr);\n      }\n    }\n  } else {\n    totalCount--;\n    categoryCount--;\n\n    if (totalCount === 0) newState = orginalObj;\n    else {\n      newState = state.expenseData.filter(\n        (element) => element.mainCate !== action.value\n      );\n    }\n  }\n\n  return {\n    checkTotalCount: totalCount,\n    checkTimeCount: state.checkTimeCount,\n    checkPriceCount: state.checkPriceCount,\n    checkCategoryCount: categoryCount,\n    expenseData: newState,\n  };\n}\n\nfunction reducerPrice(state, action) {\n  const [lowestPrice, highestPrice] = action.value.split(\",\");\n  let newState;\n  let totalCount = state.checkTotalCount;\n  let priceCount = state.checkPriceCount;\n\n  if (action.checked) {\n    if (totalCount === 0) {\n      totalCount++;\n      priceCount++;\n\n      newState = state.expenseData.filter(\n        (element) =>\n          Number(element.price) >= lowestPrice &&\n          Number(element.price) <= highestPrice\n      );\n    } else {\n      totalCount++;\n      priceCount++;\n\n      if (state.checkTimeCount !== 0 || state.checkCategoryCount !== 0) {\n        newState = state.expenseData.filter(\n          (element) =>\n            Number(element.price) >= lowestPrice &&\n            Number(element.price) <= highestPrice\n        );\n      } else {\n        const concatArr = orginalObj.filter(\n          (element) =>\n            Number(element.price) >= lowestPrice &&\n            Number(element.price) <= highestPrice\n        );\n\n        newState = state.expenseData.concat(concatArr);\n      }\n    }\n  } else {\n    totalCount--;\n    priceCount--;\n\n    if (totalCount === 0) newState = orginalObj;\n    else {\n      newState = state.expenseData.filter(\n        (element) =>\n          Number(element.price) < lowestPrice ||\n          Number(element.price) > highestPrice\n      );\n    }\n  }\n\n  return {\n    checkTotalCount: totalCount,\n    checkTimeCount: state.checkTimeCount,\n    checkPriceCount: priceCount,\n    checkCategoryCount: state.checkCategoryCount,\n    expenseData: newState,\n  };\n}\n\nfunction reducerTime(state, action) {\n  let dateArr = [];\n  let newState;\n\n  // days\n  if (action.value < 30) {\n    const currenDate = date.getDate();\n\n    if (action.value === 0) dateArr.push(currenDate);\n    else\n      for (let i = 1; i <= action.value; i++) {\n        dateArr.push(currenDate - i);\n      }\n\n    if (action.checked) {\n      newState = state.expenseData.filter(\n        (element) =>\n          dateArr.includes(Number(element.time.slice(8))) &&\n          Number(element.time.slice(5, 7)) === date.getMonth() + 1\n      );\n    } else {\n      const concatArr = orginalObj.filter(\n        (element) =>\n          !dateArr.includes(Number(element.time.slice(8))) ||\n          !(Number(element.time.slice(5, 7)) === date.getMonth() + 1)\n      );\n\n      newState = state.expenseData.concat(concatArr);\n    }\n  }\n  // months\n  else if (action.value === 30 || action.value === 90) {\n    if (action.value === 30) dateArr.push(date.getMonth());\n    else {\n      for (let i = 0; i < 3; i++) {\n        dateArr.push(date.getMonth() - i);\n      }\n    }\n\n    if (action.checked) {\n      newState = state.expenseData.filter((element) =>\n        dateArr.includes(Number(element.time.slice(5, 7)))\n      );\n    } else {\n      const concatArr = orginalObj.filter(\n        (element) => !dateArr.includes(Number(element.time.slice(5, 7)))\n      );\n\n      newState = state.expenseData.concat(concatArr);\n    }\n  }\n  // years\n  else {\n    dateArr.push(date.getFullYear() - 1);\n\n    if (action.checked) {\n      newState = state.expenseData.filter((element) =>\n        dateArr.includes(Number(element.time.slice(0, 4)))\n      );\n    } else {\n      const concatArr = orginalObj.filter(\n        (element) => !dateArr.includes(Number(element.time.slice(0, 4)))\n      );\n\n      newState = state.expenseData.concat(concatArr);\n    }\n  }\n\n  return { ...state, expenseData: newState };\n}\n\nconst checkboxTime = [\n  { category: \"time\", text: \"today\", value: 0, checked: false },\n  { category: \"time\", text: \"yesterady\", value: 1, checked: false },\n  { category: \"time\", text: \"three days ago\", value: 3, checked: false },\n  { category: \"time\", text: \"a week ago\", value: 7, checked: false },\n  { category: \"time\", text: \"a month ago\", value: 30, checked: false },\n  { category: \"time\", text: \"three months ago\", value: 90, checked: false },\n  { category: \"time\", text: \"a year ago\", value: 100, checked: false },\n  { category: \"price\", text: \"0 ~ $100\", value: [0, 100], checked: false },\n  { category: \"price\", text: \"$100 ~ $300\", value: [100, 300], checked: false },\n  { category: \"price\", text: \"$300 ~ $500\", value: [300, 500], checked: false },\n  {\n    category: \"price\",\n    text: \"$500 ~ $1000\",\n    value: [500, 1000],\n    checked: false,\n  },\n  {\n    category: \"price\",\n    text: \"above $1000\",\n    value: [1000, Infinity],\n    checked: false,\n  },\n];\n\n*/\n"]},"metadata":{},"sourceType":"module"}