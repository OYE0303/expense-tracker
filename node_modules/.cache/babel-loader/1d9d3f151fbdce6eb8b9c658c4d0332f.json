{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useReducer } from \"react\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"CATEGORY\":\n      {\n        let mainCategoryArr, subCategoryArr;\n        const categoryExpenseKeyArr = Object.keys(state.categoryExpense);\n        const categoryIncomeKeyArr = Object.keys(state.categoryIncome);\n        /*\n        Note that do NOT directly hard code \"food\" or \"salary\"\n        because user may add, remove, edit main and sub category\n        what we want is showing the first main category, and it's sub category\n        */\n\n        if (action.value === \"expense\") {\n          mainCategoryArr = categoryExpenseKeyArr;\n          subCategoryArr = state.categoryExpense[categoryExpenseKeyArr[0]];\n        } else {\n          mainCategoryArr = categoryIncomeKeyArr;\n          subCategoryArr = state.categoryIncome[categoryIncomeKeyArr[0]];\n        }\n\n        return { ...state,\n          category: action.value,\n          mainCategoryArr,\n          subCategoryArr,\n          mainCategory: action.value === \"expense\" ? Object.keys(state.categoryExpense)[0] : Object.keys(state.categoryIncome)[0],\n          subCategory: action.value === \"expense\" ? state.categoryExpense[categoryExpenseKeyArr[0]][0] : state.categoryIncome[categoryIncomeKeyArr[0]][0],\n          icon: state.iconObj[action.value === \"expense\" ? Object.keys(state.categoryExpense)[0] : Object.keys(state.categoryIncome)[0]]\n        };\n      }\n\n    case \"MAIN_CATEGORY\":\n      {\n        let subCategoryArr;\n        if (state.category === \"expense\") subCategoryArr = state.categoryExpense[action.value];else subCategoryArr = state.categoryIncome[action.value];\n        return { ...state,\n          mainCategory: action.value,\n          subCategoryArr,\n          subCategory: subCategoryArr[0],\n          icon: state.iconObj[action.value]\n        };\n      }\n\n    case \"SUB_CATEGORY\":\n      {\n        return { ...state,\n          subCategory: action.value\n        };\n      }\n\n    case \"DESCRIPTION\":\n      {\n        return { ...state,\n          description: action.value\n        };\n      }\n\n    case \"DATE\":\n      {\n        return { ...state,\n          date: action.value\n        };\n      }\n\n    case \"PRICE\":\n      {\n        let valid = false;\n        if (action.value.trim().length > 0 && !Object.is(-0, Number(action.value)) && Number(action.value) >= 0) valid = true;\n        return { ...state,\n          isValid: valid,\n          price: action.value\n        };\n      }\n\n    case \"PRICE--TOUCH\":\n      {\n        // it will always be true once user have selected or touched the price input\n        return { ...state,\n          priceTouch: true\n        };\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n\nfunction useAddDataForm(props) {\n  _s();\n\n  /*\n  the data storing in expenseDataProvider do NOT have\n  mainCategoryArr, subCategoryArr categoryExpense, categoryIncome, iconObj, priceTouch\n  but we need this data in the form, so add them\n  */\n  let initialObj;\n  if (props.initialObj) initialObj = { ...props.initialObj,\n    mainCategoryArr: props.initialObj.category === \"expense\" ? props.mainCateExpenseArr : props.mainCateIncomeArr,\n    subCategoryArr: props.initialObj.category === \"expense\" ? props.categoryExpense[props.initialObj.mainCategory] : props.categoryIncome[props.initialObj.mainCategory],\n    categoryExpense: props.categoryExpense,\n    categoryIncome,\n    iconObj,\n    priceTouch: true\n  };else initialObj = {\n    category: \"expense\",\n    mainCategoryArr: mainCateExpenseArr,\n    subCategoryArr: categoryExpense[mainCateExpenseArr[0]],\n    mainCategory: mainCateExpenseArr[0],\n    subCategory: categoryExpense[mainCateExpenseArr[0]][0],\n    date: props.date === undefined ? createDateStringFormat(new Date()) : createDateStringFormat(new Date(props.date)),\n    description: \"\",\n    price: \"\",\n    priceTouch: false,\n    icon: iconObj[Object.keys(categoryExpense)[0]],\n    isValid: false,\n    iconObj,\n    categoryExpense,\n    categoryIncome\n  };\n  const [formData, formDataDispatch] = useReducer(reducer, initialObj);\n  const [addDataFormModal, setAddDataFormModal] = useState({\n    show: false,\n    date: undefined\n  });\n\n  function categoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"CATEGORY\",\n      value: e.target.value\n    });\n  }\n\n  function mainCategoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"MAIN_CATEGORY\",\n      value: e.target.value\n    });\n  }\n\n  function subCategoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"SUB_CATEGORY\",\n      value: e.target.value\n    });\n  }\n\n  function descriptionChangeHandler(e) {\n    formDataDispatch({\n      type: \"DESCRIPTION\",\n      value: e.target.value\n    });\n  }\n\n  function dateChangeHandler(e) {\n    formDataDispatch({\n      type: \"DATE\",\n      value: e.target.value\n    });\n  }\n\n  function priceChangeHandler(e) {\n    formDataDispatch({\n      type: \"PRICE\",\n      value: e.target.value\n    });\n  }\n\n  function inputPriceTouchHandler() {\n    // it will always be true until user select or touch the price input\n    formDataDispatch({\n      type: \"PRICE--TOUCH\"\n    });\n  }\n\n  function cancelClickHandler() {\n    setAddDataFormModal({\n      show: false,\n      date: undefined\n    });\n  }\n\n  function formSubmitHandler(e) {\n    e.preventDefault();\n    const newFormData = {\n      id: props.initialObj ? props.initialObj.id : uuidv4(),\n      category: formData.category,\n      mainCate: formData.mainCategory,\n      subCate: formData.subCategory,\n      time: formData.date,\n      description: formData.description,\n      price: formData.price,\n      year: formData.date.slice(0, 4),\n      month: formData.date.slice(5, 7),\n      day: formData.date.slice(8, 10)\n    }; //////////////////////////////////////////////////\n    // add new data or edited old data\n    // if props.initialObj exist, it means it's editing the old data\n\n    if (props.initialObj) {\n      props.editExpenseData(newFormData);\n      setEditModal(true);\n    } else props.addExpenseData(newFormData);\n\n    cancelClickHandler();\n  }\n\n  return {\n    categoryChangeHandler,\n    mainCategoryChangeHandler,\n    subCategoryChangeHandler,\n    descriptionChangeHandler,\n    dateChangeHandler,\n    priceChangeHandler,\n    inputPriceTouchHandler,\n    cancelClickHandler,\n    formSubmitHandler,\n    addDataFormModal,\n    formData\n  };\n}\n\n_s(useAddDataForm, \"8ynXNSrsZa5COXpMx1ofqnDATUs=\");\n\nexport default useAddDataForm; // function useAddDataForm(props) {\n//   const [addDataFromState, setAddDataFormState] = useState({\n//     show: false,\n//     initialObj: {},\n//     date: undefined,\n//   });\n//   function showAddFormHandler() {\n//     setAddDataFormState({\n//       show: true,\n//       date: props.date,\n//       initialObj: props.initialObj,\n//     });\n//   }\n//   function closeAddDataFormHandler() {\n//     setAddDataFormState({\n//       show: false,\n//       initialObj: {},\n//       date: undefined,\n//     });\n//   }\n//   return [\n//     addDataFromState,\n//     setAddDataFormState,\n//     showAddFormHandler,\n//     closeAddDataFormHandler,\n//   ];\n// }\n// export default useAddDataForm;","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/Others/Custom/useAddDataForm.js"],"names":["useState","useReducer","reducer","state","action","type","mainCategoryArr","subCategoryArr","categoryExpenseKeyArr","Object","keys","categoryExpense","categoryIncomeKeyArr","categoryIncome","value","category","mainCategory","subCategory","icon","iconObj","description","date","valid","trim","length","is","Number","isValid","price","priceTouch","useAddDataForm","props","initialObj","mainCateExpenseArr","mainCateIncomeArr","undefined","createDateStringFormat","Date","formData","formDataDispatch","addDataFormModal","setAddDataFormModal","show","categoryChangeHandler","e","target","mainCategoryChangeHandler","subCategoryChangeHandler","descriptionChangeHandler","dateChangeHandler","priceChangeHandler","inputPriceTouchHandler","cancelClickHandler","formSubmitHandler","preventDefault","newFormData","id","uuidv4","mainCate","subCate","time","year","slice","month","day","editExpenseData","setEditModal","addExpenseData"],"mappings":"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","sourcesContent":["import { useState, useReducer } from \"react\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"CATEGORY\": {\n      let mainCategoryArr, subCategoryArr;\n      const categoryExpenseKeyArr = Object.keys(state.categoryExpense);\n      const categoryIncomeKeyArr = Object.keys(state.categoryIncome);\n\n      /*\n      Note that do NOT directly hard code \"food\" or \"salary\"\n      because user may add, remove, edit main and sub category\n      what we want is showing the first main category, and it's sub category\n      */\n      if (action.value === \"expense\") {\n        mainCategoryArr = categoryExpenseKeyArr;\n        subCategoryArr = state.categoryExpense[categoryExpenseKeyArr[0]];\n      } else {\n        mainCategoryArr = categoryIncomeKeyArr;\n        subCategoryArr = state.categoryIncome[categoryIncomeKeyArr[0]];\n      }\n\n      return {\n        ...state,\n        category: action.value,\n        mainCategoryArr,\n        subCategoryArr,\n        mainCategory:\n          action.value === \"expense\"\n            ? Object.keys(state.categoryExpense)[0]\n            : Object.keys(state.categoryIncome)[0],\n        subCategory:\n          action.value === \"expense\"\n            ? state.categoryExpense[categoryExpenseKeyArr[0]][0]\n            : state.categoryIncome[categoryIncomeKeyArr[0]][0],\n        icon: state.iconObj[\n          action.value === \"expense\"\n            ? Object.keys(state.categoryExpense)[0]\n            : Object.keys(state.categoryIncome)[0]\n        ],\n      };\n    }\n\n    case \"MAIN_CATEGORY\": {\n      let subCategoryArr;\n\n      if (state.category === \"expense\")\n        subCategoryArr = state.categoryExpense[action.value];\n      else subCategoryArr = state.categoryIncome[action.value];\n\n      return {\n        ...state,\n        mainCategory: action.value,\n        subCategoryArr,\n        subCategory: subCategoryArr[0],\n        icon: state.iconObj[action.value],\n      };\n    }\n\n    case \"SUB_CATEGORY\": {\n      return { ...state, subCategory: action.value };\n    }\n\n    case \"DESCRIPTION\": {\n      return { ...state, description: action.value };\n    }\n\n    case \"DATE\": {\n      return { ...state, date: action.value };\n    }\n\n    case \"PRICE\": {\n      let valid = false;\n      if (\n        action.value.trim().length > 0 &&\n        !Object.is(-0, Number(action.value)) &&\n        Number(action.value) >= 0\n      )\n        valid = true;\n\n      return { ...state, isValid: valid, price: action.value };\n    }\n\n    case \"PRICE--TOUCH\": {\n      // it will always be true once user have selected or touched the price input\n      return { ...state, priceTouch: true };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\nfunction useAddDataForm(props) {\n  /*\n  the data storing in expenseDataProvider do NOT have\n  mainCategoryArr, subCategoryArr categoryExpense, categoryIncome, iconObj, priceTouch\n  but we need this data in the form, so add them\n  */\n  let initialObj;\n  if (props.initialObj)\n    initialObj = {\n      ...props.initialObj,\n      mainCategoryArr:\n        props.initialObj.category === \"expense\"\n          ? props.mainCateExpenseArr\n          : props.mainCateIncomeArr,\n      subCategoryArr:\n        props.initialObj.category === \"expense\"\n          ? props.categoryExpense[props.initialObj.mainCategory]\n          : props.categoryIncome[props.initialObj.mainCategory],\n      categoryExpense: props.categoryExpense,\n      categoryIncome,\n      iconObj,\n      priceTouch: true,\n    };\n  else\n    initialObj = {\n      category: \"expense\",\n      mainCategoryArr: mainCateExpenseArr,\n      subCategoryArr: categoryExpense[mainCateExpenseArr[0]],\n      mainCategory: mainCateExpenseArr[0],\n      subCategory: categoryExpense[mainCateExpenseArr[0]][0],\n      date:\n        props.date === undefined\n          ? createDateStringFormat(new Date())\n          : createDateStringFormat(new Date(props.date)),\n      description: \"\",\n      price: \"\",\n      priceTouch: false,\n      icon: iconObj[Object.keys(categoryExpense)[0]],\n      isValid: false,\n      iconObj,\n      categoryExpense,\n      categoryIncome,\n    };\n\n  const [formData, formDataDispatch] = useReducer(reducer, initialObj);\n  const [addDataFormModal, setAddDataFormModal] = useState({\n    show: false,\n    date: undefined,\n  });\n\n  function categoryChangeHandler(e) {\n    formDataDispatch({ type: \"CATEGORY\", value: e.target.value });\n  }\n\n  function mainCategoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"MAIN_CATEGORY\",\n      value: e.target.value,\n    });\n  }\n\n  function subCategoryChangeHandler(e) {\n    formDataDispatch({\n      type: \"SUB_CATEGORY\",\n      value: e.target.value,\n    });\n  }\n\n  function descriptionChangeHandler(e) {\n    formDataDispatch({\n      type: \"DESCRIPTION\",\n      value: e.target.value,\n    });\n  }\n\n  function dateChangeHandler(e) {\n    formDataDispatch({\n      type: \"DATE\",\n      value: e.target.value,\n    });\n  }\n\n  function priceChangeHandler(e) {\n    formDataDispatch({\n      type: \"PRICE\",\n      value: e.target.value,\n    });\n  }\n\n  function inputPriceTouchHandler() {\n    // it will always be true until user select or touch the price input\n    formDataDispatch({\n      type: \"PRICE--TOUCH\",\n    });\n  }\n\n  function cancelClickHandler() {\n    setAddDataFormModal({\n      show: false,\n      date: undefined,\n    });\n  }\n\n  function formSubmitHandler(e) {\n    e.preventDefault();\n\n    const newFormData = {\n      id: props.initialObj ? props.initialObj.id : uuidv4(),\n      category: formData.category,\n      mainCate: formData.mainCategory,\n      subCate: formData.subCategory,\n      time: formData.date,\n      description: formData.description,\n      price: formData.price,\n      year: formData.date.slice(0, 4),\n      month: formData.date.slice(5, 7),\n      day: formData.date.slice(8, 10),\n    };\n\n    //////////////////////////////////////////////////\n    // add new data or edited old data\n    // if props.initialObj exist, it means it's editing the old data\n    if (props.initialObj) {\n      props.editExpenseData(newFormData);\n      setEditModal(true);\n    } else props.addExpenseData(newFormData);\n\n    cancelClickHandler();\n  }\n\n  return {\n    categoryChangeHandler,\n    mainCategoryChangeHandler,\n    subCategoryChangeHandler,\n    descriptionChangeHandler,\n    dateChangeHandler,\n    priceChangeHandler,\n    inputPriceTouchHandler,\n    cancelClickHandler,\n    formSubmitHandler,\n    addDataFormModal,\n    formData,\n  };\n}\n\nexport default useAddDataForm;\n\n// function useAddDataForm(props) {\n//   const [addDataFromState, setAddDataFormState] = useState({\n//     show: false,\n//     initialObj: {},\n//     date: undefined,\n//   });\n\n//   function showAddFormHandler() {\n//     setAddDataFormState({\n//       show: true,\n//       date: props.date,\n//       initialObj: props.initialObj,\n//     });\n//   }\n\n//   function closeAddDataFormHandler() {\n//     setAddDataFormState({\n//       show: false,\n//       initialObj: {},\n//       date: undefined,\n//     });\n//   }\n\n//   return [\n//     addDataFromState,\n//     setAddDataFormState,\n//     showAddFormHandler,\n//     closeAddDataFormHandler,\n//   ];\n// }\n\n// export default useAddDataForm;\n"]},"metadata":{},"sourceType":"module"}