{"ast":null,"code":"var _jsxFileName = \"/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Setting/SettingContent/SettingCategory/SettingCategory.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useReducer, Fragment, useEffect } from \"react\";\nimport CategoryContext from \"../../../../../store/category/category--context\";\nimport InputRadio from \"../../../../UI/InputRadio/InputRadio\";\nimport Button from \"../../../../UI/Button/Button\";\nimport AddMainCategoryModal from \"../../../../UI/AddMainCategoryModal/AddMainCategoryModal\";\nimport AddingSubCategoryModal from \"../../../../UI/AddingSubCategoryModal/AddingSubCategoryModal\";\nimport DeleteCategoryModal from \"../../../../UI/DeleteCategoryModal/DeleteCategoryModal\";\nimport BtnIcon from \"../../../../UI/BtnIcon/BtnIcon\";\nimport { AiFillEdit } from \"react-icons/ai\";\nimport style from \"./SettingCategory.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet expenseObj, incomeObj;\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"FIRST_CATEGORY\":\n      {\n        let mainCategoryArr, subCategoryArr, mainCategory;\n\n        if (action.value === \"expense\") {\n          const expenseKeyArr = Object.keys(expenseObj);\n          mainCategoryArr = expenseKeyArr;\n          subCategoryArr = expenseObj[expenseKeyArr[0]];\n          mainCategory = expenseKeyArr[0];\n        } else {\n          const incomeKeyArr = Object.keys(incomeObj);\n          mainCategoryArr = incomeKeyArr;\n          subCategoryArr = incomeObj[incomeKeyArr[0]];\n          mainCategory = incomeKeyArr[0];\n        }\n\n        return { ...state,\n          category: action.value,\n          mainCategoryArr,\n          subCategoryArr,\n          mainCategory,\n          // whenever use change the category, the removing state should be canceled\n          removeMain: false,\n          removeSub: false\n        };\n      }\n\n    case \"MAIN_CATEGORY\":\n      {\n        let subCategoryArr;\n        let subCategory;\n\n        if (state.category === \"expense\") {\n          subCategoryArr = expenseObj[action.value];\n          subCategory = expenseObj[Object.keys(expenseObj)[0]][0];\n        } else {\n          subCategoryArr = incomeObj[action.value];\n          subCategory = incomeObj[Object.keys(incomeObj)[0]][0];\n        }\n\n        return { ...state,\n          subCategoryArr,\n          subCategory,\n          mainCategory: action.value\n        };\n      }\n\n    case \"CLICK_SUB_CATEGORY\":\n      {\n        return { ...state,\n          subCategory: action.value\n        };\n      }\n\n    case \"EDIT_MAIN_CATEGORY_STATE\":\n      {\n        return { ...state,\n          editMainCategory: !state.editMainCategory\n        };\n      }\n\n    case \"EDIT_SUB_CATEGORY_STATE\":\n      {\n        return { ...state,\n          editSubCategory: !state.editSubCategory\n        };\n      }\n\n    case \"REMOVE_CATEGORY_MODAL_TOGGLER\":\n      {\n        if (state.removeModal) return { ...state,\n          removeModal: false,\n          clickingCategoryForDelete: \"\"\n        };else {\n          let clickingCategoryForDelete = state.subCategory;\n          if (action.value === \"main\") clickingCategoryForDelete = state.mainCategory;\n          return { ...state,\n            removeModal: true,\n            clickingCategoryForDelete\n          };\n        }\n      }\n\n    case \"REMOVE_MAIN_CATEGORY_STATE\":\n      {\n        return { ...state,\n          removeMain: !state.removeMain\n        };\n      }\n\n    case \"REMOVE_SUB_CATEGORY_STATE\":\n      {\n        return { ...state,\n          removeSub: !state.removeSub\n        };\n      }\n\n    case \"ADD_MAIN_CATEGORY_STATE\":\n      {\n        return { ...state,\n          addMainCategoryModal: !state.addMainCategoryModal\n        };\n      }\n\n    case \"ADD_SUB_CATEGORY_STATE\":\n      {\n        return { ...state,\n          addSubCategoryModal: !state.addSubCategoryModal\n        };\n      }\n\n    case \"ADD_MAIN_CATEGORY\":\n      {\n        const mainCategoryArr = state.mainCategoryArr.concat(action.value);\n        return { ...state,\n          mainCategoryArr\n        };\n      }\n\n    case \"ADD_SUB_CATEGORY\":\n      {\n        const subCategoryArr = state.subCategoryArr.concat(action.value);\n        return { ...state,\n          subCategoryArr\n        };\n      }\n\n    case \"DELETE_CATEGORY_MODAL\":\n      {\n        return { ...state,\n          deleteCategoryModal: !state.deleteCategoryModal,\n          clickingCategoryForDelete: action.value\n        };\n      }\n\n    case \"DELETE_CATEGORY\":\n      {\n        // main category\n        if (state.mainCategoryArr.includes(action.value)) {\n          const mainCategoryArr = state.mainCategoryArr.filter(element => element !== action.value);\n          /*\n          here is very important\n           isSame variable tracking\n          if the current chosen category is as same as the user's gonna delete\n           for example,\n          user now may choose food, and food category is now labeled blue\n          but once user click the \"remove\" button, then the remove state is showing\n          all the category now will have \"x\" button, which means we allow user to delete every category, not necessary the currently choosing category\n          so, the situation may be user choose the food category, and show it's subcategory\n          then remove clothing category\n          \n          */\n\n          const isSame = state.mainCategory === state.clickingCategoryForDelete;\n          /*\n          if the chossing category is as same as deleting category\n          then make main category to be whatever the first element in the main category array, so does sub category\n           if it's not, then we do nothing\n           it's very important we do this for the user\n          if the chossing category is as same as deleting category,\n          and we do nothing,\n          then there's no element labeling blue after deletion\n          and the sub category element would still be the old, deleted one\n           for example, food is deleted,\n          but subcategory may still show food's subcategory, which is very weird\n          */\n\n          return { ...state,\n            mainCategoryArr,\n            mainCategory: isSame ? mainCategoryArr[0] : state.mainCategory,\n\n            /*\n            if isSame variable is true,\n            then we want to dynamically change the sub category\n            based on if now it's expense or income\n            */\n            subCategoryArr: isSame ? state.category === \"expense\" ? expenseObj[mainCategoryArr[0]] : incomeObj[mainCategoryArr[0]] : state.subCategoryArr\n          };\n        } // sub category\n        else {\n          const subCategoryArr = state.subCategoryArr.filter(element => element !== action.value);\n          return { ...state,\n            subCategoryArr\n          };\n        }\n      }\n\n    case \"CLOSE_DELETE_MODAL\":\n      {\n        return { ...state,\n          deleteCategoryModal: !state.deleteCategoryModal\n        };\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n\nfunction SettingCategory() {\n  _s();\n\n  const {\n    categoryExpense,\n    categoryIncome,\n    removeMainCategory,\n    removeSubCategory\n  } = useContext(CategoryContext);\n  const [categoryState, categoryStateDispatch] = useReducer(reducer, {\n    category: \"expense\",\n    mainCategory: Object.keys(categoryExpense)[0],\n    mainCategoryArr: Object.keys(categoryExpense),\n    subCategory: categoryExpense[Object.keys(categoryExpense)[0]][0],\n    subCategoryArr: categoryExpense[Object.keys(categoryExpense)[0]],\n    editMainCategory: false,\n    editSubCategory: false,\n    removeModal: false,\n    removeMain: false,\n    removeSub: false,\n    addMainCategoryModal: false,\n    addSubCategoryModal: false,\n    deleteCategoryModal: false,\n    clickingCategoryForDelete: \"\"\n  }); // make these variables connect with object because they are used in reducer function\n\n  expenseObj = categoryExpense;\n  incomeObj = categoryIncome;\n\n  function clickEditBtnHandler(e) {\n    const id = e.target.dataset.id;\n    if (id === \"main\") categoryStateDispatch({\n      type: \"EDIT_MAIN_CATEGORY_STATE\"\n    });else if (id === \"sub\") categoryStateDispatch({\n      type: \"EDIT_SUB_CATEGORY_STATE\"\n    });else return;\n  }\n\n  function clickSubCategoryHandler(e) {\n    categoryStateDispatch({\n      type: \"CLICK_SUB_CATEGORY\",\n      value: e.target.textContent\n    });\n  }\n\n  function removeModalToggler(e) {\n    categoryStateDispatch({\n      type: \"REMOVE_CATEGORY_MODAL_TOGGLER\",\n      value: e.target.dataset.id\n    });\n  }\n\n  const mainDataContent = categoryState.mainCategoryArr.map(element => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${style.data}  ${element === categoryState.mainCategory ? categoryState.category === \"expense\" ? style[\"data--active--expense\"] : style[\"data--active--income\"] : \"\"} ${categoryState.removeMain && style[\"data--remove\"]}`,\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      onClick: mainCategoryClickHandler,\n      children: element\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), categoryState.removeMain && /*#__PURE__*/_jsxDEV(\"span\", {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: deleteIconClickHandler,\n        className: style[\"btn--remove\"],\n        type: \"button\",\n        dataID: element,\n        children: \"x\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 9\n    }, this)]\n  }, element, true, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 5\n  }, this));\n  const subDataContent = categoryState.subCategoryArr.map(element => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${style.data}  ${element === categoryState.subCategory ? categoryState.category === \"expense\" ? style[\"data--active--expense\"] : style[\"data--active--income\"] : \"\"}  ${categoryState.removeSub && style[\"data--remove\"]} `,\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      onClick: clickSubCategoryHandler,\n      children: element\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this), categoryState.removeSub && /*#__PURE__*/_jsxDEV(\"span\", {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: deleteIconClickHandler,\n        className: style[\"btn--remove\"],\n        type: \"button\",\n        dataID: element,\n        children: \"x\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }, this)]\n  }, element, true, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 5\n  }, this)); // expense & income\n\n  function categoryChangeHandler(e) {\n    categoryStateDispatch({\n      type: \"FIRST_CATEGORY\",\n      value: e.target.value\n    });\n  } // based on main categoey, show the corresponding sub category\n\n\n  function mainCategoryClickHandler(e) {\n    categoryStateDispatch({\n      type: \"MAIN_CATEGORY\",\n      value: e.target.textContent\n    });\n  }\n\n  function removeBtnMainCategoryStateClickHandler() {\n    categoryStateDispatch({\n      type: \"REMOVE_MAIN_CATEGORY_STATE\"\n    });\n  }\n\n  function removeBtnSubCategoryStateClickHandler() {\n    categoryStateDispatch({\n      type: \"REMOVE_SUB_CATEGORY_STATE\"\n    });\n  }\n\n  function deleteIconClickHandler(e) {\n    categoryStateDispatch({\n      type: \"DELETE_CATEGORY_MODAL\",\n      value: e.target.dataset.id\n    });\n  }\n\n  function deleteCategory() {\n    categoryStateDispatch({\n      type: \"DELETE_CATEGORY\",\n      value: categoryState.clickingCategoryForDelete\n    }); // main category\n\n    if (categoryState.mainCategoryArr.includes(categoryState.clickingCategoryForDelete)) removeMainCategory(categoryState.clickingCategoryForDelete, categoryState.category); // sub category\n    else removeSubCategory(categoryState.clickingCategoryForDelete, categoryState.category, categoryState.mainCategory);\n  }\n\n  function closeDeleteModal() {\n    categoryStateDispatch({\n      type: \"CLOSE_DELETE_MODAL\"\n    });\n  }\n  /*\n  These two functions do two things respectively\n  1) toggle the adding main or sub categeory modal state\n     (show and close the modal)\n  2) add the category \n     (this will only invoke when there's value which is the name of new category)\n  */\n\n\n  function addMainCategoryAndModal(e, value) {\n    categoryStateDispatch({\n      type: \"ADD_MAIN_CATEGORY_STATE\"\n    });\n    if (value) categoryStateDispatch({\n      type: \"ADD_MAIN_CATEGORY\",\n      value\n    });\n  }\n\n  function addSubCategoryAndModal(e, value) {\n    categoryStateDispatch({\n      type: \"ADD_SUB_CATEGORY_STATE\"\n    });\n    if (value) categoryStateDispatch({\n      type: \"ADD_SUB_CATEGORY\",\n      value\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [categoryState.addMainCategoryModal && /*#__PURE__*/_jsxDEV(AddMainCategoryModal, {\n      category: categoryState.category,\n      addMainCategoryAndModal: addMainCategoryAndModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 9\n    }, this), categoryState.addSubCategoryModal && /*#__PURE__*/_jsxDEV(AddingSubCategoryModal, {\n      category: categoryState.category,\n      mainCategory: categoryState.mainCategory,\n      addSubCategoryAndModal: addSubCategoryAndModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 9\n    }, this), categoryState.removeModal && /*#__PURE__*/_jsxDEV(DeleteCategoryModal, {\n      category: categoryState.category,\n      clickingCategoryForDelete: categoryState.clickingCategoryForDelete,\n      mainCategoryArr: categoryState.mainCategoryArr,\n      subCategoryArr: categoryState.subCategoryArr,\n      deleteCategory: deleteCategory,\n      removeModalToggler: removeModalToggler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: style.form,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style[\"form__list\"],\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.category,\n          children: [/*#__PURE__*/_jsxDEV(InputRadio, {\n            classContainer: style[\"radio__container\"],\n            classInput: style.input,\n            classLabel: `${style.labelBlue} ${style.label}`,\n            classCheck: style.check,\n            id: \"expense\",\n            name: \"category\",\n            value: \"expense\",\n            label: \"expense\",\n            checked: categoryState.category === \"expense\",\n            onChange: categoryChangeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InputRadio, {\n            classContainer: style[\"radio__container\"],\n            classInput: style.input,\n            classLabel: `${style.labelPink} ${style.label}`,\n            classCheck: style.check,\n            id: \"income\",\n            name: \"category\",\n            value: \"income\",\n            label: \"income\",\n            checked: categoryState.category === \"income\",\n            onChange: categoryChangeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.container,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: style[\"subtitle__container\"],\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: style.subtitle,\n              children: \"main category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(BtnIcon, {\n              onClick: clickEditBtnHandler,\n              dataID: \"main\",\n              children: /*#__PURE__*/_jsxDEV(AiFillEdit, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style[\"data__container\"],\n            children: mainDataContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), categoryState.editMainCategory && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style[\"btn__container\"],\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: removeModalToggler,\n              type: \"button\",\n              className: style.btn,\n              dataID: \"main\",\n              children: \"remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: addMainCategoryAndModal,\n              type: \"button\",\n              className: style.btn,\n              dataID: \"main\",\n              children: \"add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style.container,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: style[\"subtitle__container\"],\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: style.subtitle,\n              children: \"sub category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(BtnIcon, {\n              onClick: clickEditBtnHandler,\n              dataID: \"sub\",\n              children: /*#__PURE__*/_jsxDEV(AiFillEdit, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style[\"data__container\"],\n            children: subDataContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this), categoryState.editSubCategory && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: style[\"btn__container\"],\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: removeModalToggler,\n              type: \"button\",\n              className: style.btn,\n              dataID: \"sub\",\n              children: \"remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: addSubCategoryAndModal,\n              type: \"button\",\n              className: style.btn,\n              dataID: \"sub\",\n              children: \"add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 396,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SettingCategory, \"T8c77ASrCLrlqvLK6HdeHfmm5pM=\");\n\n_c = SettingCategory;\nexport default SettingCategory;\n\nvar _c;\n\n$RefreshReg$(_c, \"SettingCategory\");","map":{"version":3,"sources":["/Users/eyo/Desktop/expense-tracker/src/components/MainContent/Setting/SettingContent/SettingCategory/SettingCategory.js"],"names":["useContext","useReducer","Fragment","useEffect","CategoryContext","InputRadio","Button","AddMainCategoryModal","AddingSubCategoryModal","DeleteCategoryModal","BtnIcon","AiFillEdit","style","expenseObj","incomeObj","reducer","state","action","type","mainCategoryArr","subCategoryArr","mainCategory","value","expenseKeyArr","Object","keys","incomeKeyArr","category","removeMain","removeSub","subCategory","editMainCategory","editSubCategory","removeModal","clickingCategoryForDelete","addMainCategoryModal","addSubCategoryModal","concat","deleteCategoryModal","includes","filter","element","isSame","SettingCategory","categoryExpense","categoryIncome","removeMainCategory","removeSubCategory","categoryState","categoryStateDispatch","clickEditBtnHandler","e","id","target","dataset","clickSubCategoryHandler","textContent","removeModalToggler","mainDataContent","map","data","mainCategoryClickHandler","deleteIconClickHandler","subDataContent","categoryChangeHandler","removeBtnMainCategoryStateClickHandler","removeBtnSubCategoryStateClickHandler","deleteCategory","closeDeleteModal","addMainCategoryAndModal","addSubCategoryAndModal","form","input","labelBlue","label","check","labelPink","container","subtitle","btn"],"mappings":"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","sourcesContent":["import { useContext, useReducer, Fragment, useEffect } from \"react\";\nimport CategoryContext from \"../../../../../store/category/category--context\";\nimport InputRadio from \"../../../../UI/InputRadio/InputRadio\";\nimport Button from \"../../../../UI/Button/Button\";\nimport AddMainCategoryModal from \"../../../../UI/AddMainCategoryModal/AddMainCategoryModal\";\nimport AddingSubCategoryModal from \"../../../../UI/AddingSubCategoryModal/AddingSubCategoryModal\";\nimport DeleteCategoryModal from \"../../../../UI/DeleteCategoryModal/DeleteCategoryModal\";\nimport BtnIcon from \"../../../../UI/BtnIcon/BtnIcon\";\nimport { AiFillEdit } from \"react-icons/ai\";\nimport style from \"./SettingCategory.module.css\";\n\nlet expenseObj, incomeObj;\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"FIRST_CATEGORY\": {\n      let mainCategoryArr, subCategoryArr, mainCategory;\n\n      if (action.value === \"expense\") {\n        const expenseKeyArr = Object.keys(expenseObj);\n\n        mainCategoryArr = expenseKeyArr;\n        subCategoryArr = expenseObj[expenseKeyArr[0]];\n        mainCategory = expenseKeyArr[0];\n      } else {\n        const incomeKeyArr = Object.keys(incomeObj);\n\n        mainCategoryArr = incomeKeyArr;\n        subCategoryArr = incomeObj[incomeKeyArr[0]];\n        mainCategory = incomeKeyArr[0];\n      }\n\n      return {\n        ...state,\n        category: action.value,\n        mainCategoryArr,\n        subCategoryArr,\n        mainCategory,\n\n        // whenever use change the category, the removing state should be canceled\n        removeMain: false,\n        removeSub: false,\n      };\n    }\n\n    case \"MAIN_CATEGORY\": {\n      let subCategoryArr;\n      let subCategory;\n\n      if (state.category === \"expense\") {\n        subCategoryArr = expenseObj[action.value];\n        subCategory = expenseObj[Object.keys(expenseObj)[0]][0];\n      } else {\n        subCategoryArr = incomeObj[action.value];\n        subCategory = incomeObj[Object.keys(incomeObj)[0]][0];\n      }\n\n      return {\n        ...state,\n        subCategoryArr,\n        subCategory,\n        mainCategory: action.value,\n      };\n    }\n\n    case \"CLICK_SUB_CATEGORY\": {\n      return { ...state, subCategory: action.value };\n    }\n\n    case \"EDIT_MAIN_CATEGORY_STATE\": {\n      return { ...state, editMainCategory: !state.editMainCategory };\n    }\n\n    case \"EDIT_SUB_CATEGORY_STATE\": {\n      return { ...state, editSubCategory: !state.editSubCategory };\n    }\n\n    case \"REMOVE_CATEGORY_MODAL_TOGGLER\": {\n      if (state.removeModal)\n        return { ...state, removeModal: false, clickingCategoryForDelete: \"\" };\n      else {\n        let clickingCategoryForDelete = state.subCategory;\n        if (action.value === \"main\")\n          clickingCategoryForDelete = state.mainCategory;\n\n        return {\n          ...state,\n          removeModal: true,\n          clickingCategoryForDelete,\n        };\n      }\n    }\n\n    case \"REMOVE_MAIN_CATEGORY_STATE\": {\n      return { ...state, removeMain: !state.removeMain };\n    }\n\n    case \"REMOVE_SUB_CATEGORY_STATE\": {\n      return { ...state, removeSub: !state.removeSub };\n    }\n\n    case \"ADD_MAIN_CATEGORY_STATE\": {\n      return { ...state, addMainCategoryModal: !state.addMainCategoryModal };\n    }\n\n    case \"ADD_SUB_CATEGORY_STATE\": {\n      return { ...state, addSubCategoryModal: !state.addSubCategoryModal };\n    }\n\n    case \"ADD_MAIN_CATEGORY\": {\n      const mainCategoryArr = state.mainCategoryArr.concat(action.value);\n\n      return { ...state, mainCategoryArr };\n    }\n\n    case \"ADD_SUB_CATEGORY\": {\n      const subCategoryArr = state.subCategoryArr.concat(action.value);\n\n      return { ...state, subCategoryArr };\n    }\n\n    case \"DELETE_CATEGORY_MODAL\": {\n      return {\n        ...state,\n        deleteCategoryModal: !state.deleteCategoryModal,\n        clickingCategoryForDelete: action.value,\n      };\n    }\n\n    case \"DELETE_CATEGORY\": {\n      // main category\n      if (state.mainCategoryArr.includes(action.value)) {\n        const mainCategoryArr = state.mainCategoryArr.filter(\n          (element) => element !== action.value\n        );\n\n        /*\n        here is very important\n\n        isSame variable tracking\n        if the current chosen category is as same as the user's gonna delete\n\n        for example,\n        user now may choose food, and food category is now labeled blue\n        but once user click the \"remove\" button, then the remove state is showing\n        all the category now will have \"x\" button, which means we allow user to delete every category, not necessary the currently choosing category\n        so, the situation may be user choose the food category, and show it's subcategory\n        then remove clothing category\n        \n        */\n        const isSame = state.mainCategory === state.clickingCategoryForDelete;\n\n        /*\n        if the chossing category is as same as deleting category\n        then make main category to be whatever the first element in the main category array, so does sub category\n\n        if it's not, then we do nothing\n\n        it's very important we do this for the user\n        if the chossing category is as same as deleting category,\n        and we do nothing,\n        then there's no element labeling blue after deletion\n        and the sub category element would still be the old, deleted one\n\n        for example, food is deleted,\n        but subcategory may still show food's subcategory, which is very weird\n        */\n\n        return {\n          ...state,\n          mainCategoryArr,\n          mainCategory: isSame ? mainCategoryArr[0] : state.mainCategory,\n\n          /*\n          if isSame variable is true,\n          then we want to dynamically change the sub category\n          based on if now it's expense or income\n          */\n          subCategoryArr: isSame\n            ? state.category === \"expense\"\n              ? expenseObj[mainCategoryArr[0]]\n              : incomeObj[mainCategoryArr[0]]\n            : state.subCategoryArr,\n        };\n      }\n      // sub category\n      else {\n        const subCategoryArr = state.subCategoryArr.filter(\n          (element) => element !== action.value\n        );\n\n        return {\n          ...state,\n          subCategoryArr,\n        };\n      }\n    }\n\n    case \"CLOSE_DELETE_MODAL\": {\n      return { ...state, deleteCategoryModal: !state.deleteCategoryModal };\n    }\n\n    default: {\n      return state;\n    }\n  }\n}\n\nfunction SettingCategory() {\n  const {\n    categoryExpense,\n    categoryIncome,\n    removeMainCategory,\n    removeSubCategory,\n  } = useContext(CategoryContext);\n  const [categoryState, categoryStateDispatch] = useReducer(reducer, {\n    category: \"expense\",\n    mainCategory: Object.keys(categoryExpense)[0],\n    mainCategoryArr: Object.keys(categoryExpense),\n    subCategory: categoryExpense[Object.keys(categoryExpense)[0]][0],\n    subCategoryArr: categoryExpense[Object.keys(categoryExpense)[0]],\n    editMainCategory: false,\n    editSubCategory: false,\n    removeModal: false,\n    removeMain: false,\n    removeSub: false,\n    addMainCategoryModal: false,\n    addSubCategoryModal: false,\n    deleteCategoryModal: false,\n    clickingCategoryForDelete: \"\",\n  });\n  // make these variables connect with object because they are used in reducer function\n  expenseObj = categoryExpense;\n  incomeObj = categoryIncome;\n\n  function clickEditBtnHandler(e) {\n    const id = e.target.dataset.id;\n    if (id === \"main\")\n      categoryStateDispatch({ type: \"EDIT_MAIN_CATEGORY_STATE\" });\n    else if (id === \"sub\")\n      categoryStateDispatch({ type: \"EDIT_SUB_CATEGORY_STATE\" });\n    else return;\n  }\n\n  function clickSubCategoryHandler(e) {\n    categoryStateDispatch({\n      type: \"CLICK_SUB_CATEGORY\",\n      value: e.target.textContent,\n    });\n  }\n\n  function removeModalToggler(e) {\n    categoryStateDispatch({\n      type: \"REMOVE_CATEGORY_MODAL_TOGGLER\",\n      value: e.target.dataset.id,\n    });\n  }\n\n  const mainDataContent = categoryState.mainCategoryArr.map((element) => (\n    <div\n      className={`${style.data}  ${\n        element === categoryState.mainCategory\n          ? categoryState.category === \"expense\"\n            ? style[\"data--active--expense\"]\n            : style[\"data--active--income\"]\n          : \"\"\n      } ${categoryState.removeMain && style[\"data--remove\"]}`}\n      key={element}\n    >\n      <span onClick={mainCategoryClickHandler}>{element}</span>\n      {categoryState.removeMain && (\n        <span>\n          <Button\n            onClick={deleteIconClickHandler}\n            className={style[\"btn--remove\"]}\n            type=\"button\"\n            dataID={element}\n          >\n            x\n          </Button>\n        </span>\n      )}\n    </div>\n  ));\n\n  const subDataContent = categoryState.subCategoryArr.map((element) => (\n    <div\n      className={`${style.data}  ${\n        element === categoryState.subCategory\n          ? categoryState.category === \"expense\"\n            ? style[\"data--active--expense\"]\n            : style[\"data--active--income\"]\n          : \"\"\n      }  ${categoryState.removeSub && style[\"data--remove\"]} `}\n      key={element}\n    >\n      <span onClick={clickSubCategoryHandler}>{element}</span>\n      {categoryState.removeSub && (\n        <span>\n          <Button\n            onClick={deleteIconClickHandler}\n            className={style[\"btn--remove\"]}\n            type=\"button\"\n            dataID={element}\n          >\n            x\n          </Button>\n        </span>\n      )}\n    </div>\n  ));\n\n  // expense & income\n  function categoryChangeHandler(e) {\n    categoryStateDispatch({ type: \"FIRST_CATEGORY\", value: e.target.value });\n  }\n\n  // based on main categoey, show the corresponding sub category\n  function mainCategoryClickHandler(e) {\n    categoryStateDispatch({\n      type: \"MAIN_CATEGORY\",\n      value: e.target.textContent,\n    });\n  }\n\n  function removeBtnMainCategoryStateClickHandler() {\n    categoryStateDispatch({\n      type: \"REMOVE_MAIN_CATEGORY_STATE\",\n    });\n  }\n\n  function removeBtnSubCategoryStateClickHandler() {\n    categoryStateDispatch({\n      type: \"REMOVE_SUB_CATEGORY_STATE\",\n    });\n  }\n\n  function deleteIconClickHandler(e) {\n    categoryStateDispatch({\n      type: \"DELETE_CATEGORY_MODAL\",\n      value: e.target.dataset.id,\n    });\n  }\n\n  function deleteCategory() {\n    categoryStateDispatch({\n      type: \"DELETE_CATEGORY\",\n      value: categoryState.clickingCategoryForDelete,\n    });\n\n    // main category\n    if (\n      categoryState.mainCategoryArr.includes(\n        categoryState.clickingCategoryForDelete\n      )\n    )\n      removeMainCategory(\n        categoryState.clickingCategoryForDelete,\n        categoryState.category\n      );\n    // sub category\n    else\n      removeSubCategory(\n        categoryState.clickingCategoryForDelete,\n        categoryState.category,\n        categoryState.mainCategory\n      );\n  }\n\n  function closeDeleteModal() {\n    categoryStateDispatch({\n      type: \"CLOSE_DELETE_MODAL\",\n    });\n  }\n\n  /*\n  These two functions do two things respectively\n  1) toggle the adding main or sub categeory modal state\n     (show and close the modal)\n  2) add the category \n     (this will only invoke when there's value which is the name of new category)\n  */\n  function addMainCategoryAndModal(e, value) {\n    categoryStateDispatch({ type: \"ADD_MAIN_CATEGORY_STATE\" });\n\n    if (value) categoryStateDispatch({ type: \"ADD_MAIN_CATEGORY\", value });\n  }\n\n  function addSubCategoryAndModal(e, value) {\n    categoryStateDispatch({ type: \"ADD_SUB_CATEGORY_STATE\" });\n\n    if (value) categoryStateDispatch({ type: \"ADD_SUB_CATEGORY\", value });\n  }\n\n  return (\n    <Fragment>\n      {categoryState.addMainCategoryModal && (\n        <AddMainCategoryModal\n          category={categoryState.category}\n          addMainCategoryAndModal={addMainCategoryAndModal}\n        />\n      )}\n      {categoryState.addSubCategoryModal && (\n        <AddingSubCategoryModal\n          category={categoryState.category}\n          mainCategory={categoryState.mainCategory}\n          addSubCategoryAndModal={addSubCategoryAndModal}\n        />\n      )}\n      {categoryState.removeModal && (\n        <DeleteCategoryModal\n          category={categoryState.category}\n          clickingCategoryForDelete={categoryState.clickingCategoryForDelete}\n          mainCategoryArr={categoryState.mainCategoryArr}\n          subCategoryArr={categoryState.subCategoryArr}\n          deleteCategory={deleteCategory}\n          removeModalToggler={removeModalToggler}\n        />\n      )}\n      <form className={style.form}>\n        <div className={style[\"form__list\"]}>\n          <div className={style.category}>\n            <InputRadio\n              classContainer={style[\"radio__container\"]}\n              classInput={style.input}\n              classLabel={`${style.labelBlue} ${style.label}`}\n              classCheck={style.check}\n              id=\"expense\"\n              name=\"category\"\n              value=\"expense\"\n              label=\"expense\"\n              checked={categoryState.category === \"expense\"}\n              onChange={categoryChangeHandler}\n            />\n            <InputRadio\n              classContainer={style[\"radio__container\"]}\n              classInput={style.input}\n              classLabel={`${style.labelPink} ${style.label}`}\n              classCheck={style.check}\n              id=\"income\"\n              name=\"category\"\n              value=\"income\"\n              label=\"income\"\n              checked={categoryState.category === \"income\"}\n              onChange={categoryChangeHandler}\n            />\n          </div>\n          <div className={style.container}>\n            <div className={style[\"subtitle__container\"]}>\n              <p className={style.subtitle}>main category</p>\n              <BtnIcon onClick={clickEditBtnHandler} dataID=\"main\">\n                <AiFillEdit />\n              </BtnIcon>\n            </div>\n            <div className={style[\"data__container\"]}>{mainDataContent}</div>\n            {categoryState.editMainCategory && (\n              <div className={style[\"btn__container\"]}>\n                <Button\n                  onClick={removeModalToggler}\n                  type=\"button\"\n                  className={style.btn}\n                  dataID=\"main\"\n                >\n                  remove\n                </Button>\n                <Button\n                  onClick={addMainCategoryAndModal}\n                  type=\"button\"\n                  className={style.btn}\n                  dataID=\"main\"\n                >\n                  add\n                </Button>\n              </div>\n            )}\n          </div>\n          <div className={style.container}>\n            <div className={style[\"subtitle__container\"]}>\n              <p className={style.subtitle}>sub category</p>\n              <BtnIcon onClick={clickEditBtnHandler} dataID=\"sub\">\n                <AiFillEdit />\n              </BtnIcon>\n            </div>\n            <div className={style[\"data__container\"]}>{subDataContent}</div>\n            {categoryState.editSubCategory && (\n              <div className={style[\"btn__container\"]}>\n                <Button\n                  onClick={removeModalToggler}\n                  type=\"button\"\n                  className={style.btn}\n                  dataID=\"sub\"\n                >\n                  remove\n                </Button>\n                <Button\n                  onClick={addSubCategoryAndModal}\n                  type=\"button\"\n                  className={style.btn}\n                  dataID=\"sub\"\n                >\n                  add\n                </Button>\n              </div>\n            )}\n          </div>\n        </div>\n      </form>\n    </Fragment>\n  );\n}\n\nexport default SettingCategory;\n"]},"metadata":{},"sourceType":"module"}